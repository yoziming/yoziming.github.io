<!DOCTYPE html>
<html><head>
<meta name="google-site-verification" content="XrwF-xUZWSGJVBBm7jM8vqemVqx--zo5Tb9d-Vr7BCc" />
<title>å¾Œå°:å•†å“åˆ†é¡ã€ç¶²é—œè½‰ç™¼å¾®æœå‹™ã€è·¨åŸŸ</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="SpringBootå¾®æœå‹™é …ç›®ç­†è¨˜-03">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="å¾Œå°:å•†å“åˆ†é¡ã€ç¶²é—œè½‰ç™¼å¾®æœå‹™ã€è·¨åŸŸ" />
<meta property="og:description" content="SpringBootå¾®æœå‹™é …ç›®ç­†è¨˜-03" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yoziming.github.io/post/220120-gulimall-03-gateway/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-01-20T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-01-20T00:00:00+00:00" /><meta property="og:site_name" content="My Blog" />






<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="å¾Œå°:å•†å“åˆ†é¡ã€ç¶²é—œè½‰ç™¼å¾®æœå‹™ã€è·¨åŸŸ"/>
<meta name="twitter:description" content="SpringBootå¾®æœå‹™é …ç›®ç­†è¨˜-03"/>







<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">


  




<link rel="icon" href="https://yoziming.github.io/images/favicon.png">



<link rel="stylesheet" href="https://yoziming.github.io/scss/journal.min.3f72a5fc8f5b5dd732a4b476aced0eece2156958d9d414316494ddb10593ddf7.css" integrity="sha256-P3Kl/I9bXdcypLR2rO0O7OIVaVjZ1BQxZJTdsQWT3fc=" media="screen">



<link rel="stylesheet" href="https://yoziming.github.io/scss/dark-mode.min.f7c2efa7183435a6bd1842f91c541481c7a5137b5991629a870f24e4a516ad4b.css" integrity="sha256-98Lvpxg0Naa9GEL5HFQUgcelE3tZkWKahw8k5KUWrUs=" media="screen">


<script src="/vendor/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>






  <script src="/js/toc.js"></script>











<script src="//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js"></script>





</head>
<body>
    	<div id="app"><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://yoziming.github.io/">
    
        <div class="nav-title">
            æŸšå­èŒ¶å®¤
        </div>
        
        <div class="nav-subtitle">
            ç´€éŒ„è‡ªå­¸å¤§å°äº‹
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/">
                é¦–é ğŸ 
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                ç³»åˆ—æ–‡ğŸ“–
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                æ¨™ç±¤ğŸ·ï¸
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about-me">
                é—œæ–¼æˆ‘ğŸ£
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
ç§»æ¤è‡ª <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Yoziming
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®éŒ„ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%8c%e5%8f%b0%e9%a0%81%e9%9d%a2" onclick="onNavClick(`#å¾Œå°é é¢-nav`)" id="å¾Œå°é é¢-nav">
									å¾Œå°é é¢
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e8%a8%88%e7%ae%97%e5%b1%ac%e6%80%a7%e8%88%87%e7%9b%a3%e8%81%bd%e5%99%a8" onclick="onNavClick(`#è¨ˆç®—å±¬æ€§èˆ‡ç›£è½å™¨-nav`)" id="è¨ˆç®—å±¬æ€§èˆ‡ç›£è½å™¨-nav">
									è¨ˆç®—å±¬æ€§èˆ‡ç›£è½å™¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%81%8e%e6%bf%be%e5%99%a8" onclick="onNavClick(`#éæ¿¾å™¨-nav`)" id="éæ¿¾å™¨-nav">
									éæ¿¾å™¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%b5%84%e4%bb%b6%e5%8c%96" onclick="onNavClick(`#çµ„ä»¶åŒ–-nav`)" id="çµ„ä»¶åŒ–-nav">
									çµ„ä»¶åŒ–
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%94%9f%e5%91%bd%e9%80%b1%e6%9c%9f" onclick="onNavClick(`#ç”Ÿå‘½é€±æœŸ-nav`)" id="ç”Ÿå‘½é€±æœŸ-nav">
									ç”Ÿå‘½é€±æœŸ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%85%b3%e6%89%8b%e6%9e%b6%e5%89%b5%e5%bb%ba%e8%a1%a8%e5%96%ae" onclick="onNavClick(`#è…³æ‰‹æ¶å‰µå»ºè¡¨å–®-nav`)" id="è…³æ‰‹æ¶å‰µå»ºè¡¨å–®-nav">
									è…³æ‰‹æ¶å‰µå»ºè¡¨å–®
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#javax%e5%95%8f%e9%a1%8c" onclick="onNavClick(`#javaxå•é¡Œ-nav`)" id="javaxå•é¡Œ-nav">
									javaxå•é¡Œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%be%8c%e7%ab%af" onclick="onNavClick(`#å¾Œç«¯-nav`)" id="å¾Œç«¯-nav">
									å¾Œç«¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e8%a8%ad%e5%ae%9a%e7%b6%b2%e9%97%9c" onclick="onNavClick(`#è¨­å®šç¶²é—œ-nav`)" id="è¨­å®šç¶²é—œ-nav">
									è¨­å®šç¶²é—œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#rewritepath%e6%ad%a3%e5%89%87" onclick="onNavClick(`#rewritepathæ­£å‰‡-nav`)" id="rewritepathæ­£å‰‡-nav">
									RewritePathæ­£å‰‡
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e8%b7%a8%e5%9f%9f%e5%95%8f%e9%a1%8c" onclick="onNavClick(`#è·¨åŸŸå•é¡Œ-nav`)" id="è·¨åŸŸå•é¡Œ-nav">
									è·¨åŸŸå•é¡Œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#spring-boot%e7%81%b0%e8%89%b2%e5%9c%96%e6%a1%88" onclick="onNavClick(`#spring-bootç°è‰²åœ–æ¡ˆ-nav`)" id="spring-bootç°è‰²åœ–æ¡ˆ-nav">
									spring bootç°è‰²åœ–æ¡ˆ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%85%b6%e4%bb%96%e5%8a%9f%e8%83%bd" onclick="onNavClick(`#å…¶ä»–åŠŸèƒ½-nav`)" id="å…¶ä»–åŠŸèƒ½-nav">
									å…¶ä»–åŠŸèƒ½
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e9%82%8f%e8%bc%af%e5%88%aa%e9%99%a4" onclick="onNavClick(`#é‚è¼¯åˆªé™¤-nav`)" id="é‚è¼¯åˆªé™¤-nav">
									é‚è¼¯åˆªé™¤
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%96%b0%e5%a2%9e%e8%88%87%e4%bf%ae%e6%94%b9%e7%af%80%e9%bb%9e" onclick="onNavClick(`#æ–°å¢èˆ‡ä¿®æ”¹ç¯€é»-nav`)" id="æ–°å¢èˆ‡ä¿®æ”¹ç¯€é»-nav">
									æ–°å¢èˆ‡ä¿®æ”¹ç¯€é»
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%8b%96%e6%9b%b3%e6%94%b9%e8%ae%8a%e6%8e%92%e5%ba%8f" onclick="onNavClick(`#æ‹–æ›³æ”¹è®Šæ’åº-nav`)" id="æ‹–æ›³æ”¹è®Šæ’åº-nav">
									æ‹–æ›³æ”¹è®Šæ’åº
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/">
                    é¦–é ğŸ 
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    ç³»åˆ—æ–‡ğŸ“–
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    æ¨™ç±¤ğŸ·ï¸
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about-me">
                    é—œæ–¼æˆ‘ğŸ£
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®éŒ„ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%8c%e5%8f%b0%e9%a0%81%e9%9d%a2" onclick="onNavClick(`#å¾Œå°é é¢-nav`)" id="å¾Œå°é é¢-nav">
									å¾Œå°é é¢
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e8%a8%88%e7%ae%97%e5%b1%ac%e6%80%a7%e8%88%87%e7%9b%a3%e8%81%bd%e5%99%a8" onclick="onNavClick(`#è¨ˆç®—å±¬æ€§èˆ‡ç›£è½å™¨-nav`)" id="è¨ˆç®—å±¬æ€§èˆ‡ç›£è½å™¨-nav">
									è¨ˆç®—å±¬æ€§èˆ‡ç›£è½å™¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%81%8e%e6%bf%be%e5%99%a8" onclick="onNavClick(`#éæ¿¾å™¨-nav`)" id="éæ¿¾å™¨-nav">
									éæ¿¾å™¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%b5%84%e4%bb%b6%e5%8c%96" onclick="onNavClick(`#çµ„ä»¶åŒ–-nav`)" id="çµ„ä»¶åŒ–-nav">
									çµ„ä»¶åŒ–
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%94%9f%e5%91%bd%e9%80%b1%e6%9c%9f" onclick="onNavClick(`#ç”Ÿå‘½é€±æœŸ-nav`)" id="ç”Ÿå‘½é€±æœŸ-nav">
									ç”Ÿå‘½é€±æœŸ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%85%b3%e6%89%8b%e6%9e%b6%e5%89%b5%e5%bb%ba%e8%a1%a8%e5%96%ae" onclick="onNavClick(`#è…³æ‰‹æ¶å‰µå»ºè¡¨å–®-nav`)" id="è…³æ‰‹æ¶å‰µå»ºè¡¨å–®-nav">
									è…³æ‰‹æ¶å‰µå»ºè¡¨å–®
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#javax%e5%95%8f%e9%a1%8c" onclick="onNavClick(`#javaxå•é¡Œ-nav`)" id="javaxå•é¡Œ-nav">
									javaxå•é¡Œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%be%8c%e7%ab%af" onclick="onNavClick(`#å¾Œç«¯-nav`)" id="å¾Œç«¯-nav">
									å¾Œç«¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e8%a8%ad%e5%ae%9a%e7%b6%b2%e9%97%9c" onclick="onNavClick(`#è¨­å®šç¶²é—œ-nav`)" id="è¨­å®šç¶²é—œ-nav">
									è¨­å®šç¶²é—œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#rewritepath%e6%ad%a3%e5%89%87" onclick="onNavClick(`#rewritepathæ­£å‰‡-nav`)" id="rewritepathæ­£å‰‡-nav">
									RewritePathæ­£å‰‡
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e8%b7%a8%e5%9f%9f%e5%95%8f%e9%a1%8c" onclick="onNavClick(`#è·¨åŸŸå•é¡Œ-nav`)" id="è·¨åŸŸå•é¡Œ-nav">
									è·¨åŸŸå•é¡Œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#spring-boot%e7%81%b0%e8%89%b2%e5%9c%96%e6%a1%88" onclick="onNavClick(`#spring-bootç°è‰²åœ–æ¡ˆ-nav`)" id="spring-bootç°è‰²åœ–æ¡ˆ-nav">
									spring bootç°è‰²åœ–æ¡ˆ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%85%b6%e4%bb%96%e5%8a%9f%e8%83%bd" onclick="onNavClick(`#å…¶ä»–åŠŸèƒ½-nav`)" id="å…¶ä»–åŠŸèƒ½-nav">
									å…¶ä»–åŠŸèƒ½
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e9%82%8f%e8%bc%af%e5%88%aa%e9%99%a4" onclick="onNavClick(`#é‚è¼¯åˆªé™¤-nav`)" id="é‚è¼¯åˆªé™¤-nav">
									é‚è¼¯åˆªé™¤
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%96%b0%e5%a2%9e%e8%88%87%e4%bf%ae%e6%94%b9%e7%af%80%e9%bb%9e" onclick="onNavClick(`#æ–°å¢èˆ‡ä¿®æ”¹ç¯€é»-nav`)" id="æ–°å¢èˆ‡ä¿®æ”¹ç¯€é»-nav">
									æ–°å¢èˆ‡ä¿®æ”¹ç¯€é»
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%8b%96%e6%9b%b3%e6%94%b9%e8%ae%8a%e6%8e%92%e5%ba%8f" onclick="onNavClick(`#æ‹–æ›³æ”¹è®Šæ’åº-nav`)" id="æ‹–æ›³æ”¹è®Šæ’åº-nav">
									æ‹–æ›³æ”¹è®Šæ’åº
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://yoziming.github.io/">
            æŸšå­èŒ¶å®¤
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://yoziming.github.io/">
        <div class="single-column-header-title">æŸšå­èŒ¶å®¤</div>
        
        <div class="single-column-header-subtitle">ç´€éŒ„è‡ªå­¸å¤§å°äº‹</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://yoziming.github.io/images/gulimall.png')"
                    
                
            >
                <div class="post-title">
                    å¾Œå°:å•†å“åˆ†é¡ã€ç¶²é—œè½‰ç™¼å¾®æœå‹™ã€è·¨åŸŸ
                    
                    <div class="post-subtitle">
                        SpringBootå¾®æœå‹™é …ç›®ç­†è¨˜-03
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2022-01-20 00:00
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/java%E5%BE%AE%E6%9C%8D%E5%8B%99%E5%95%86%E5%9F%8E%E9%A0%85%E7%9B%AE">Javaå¾®æœå‹™å•†åŸé …ç›®</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/java">java</a>
                                &nbsp;
                            
                                <a href="/tags/microservice">microservice</a>
                                &nbsp;
                            
                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h1 id="å¾Œå°é é¢">å¾Œå°é é¢</h1>
<blockquote>
<p>åˆ¥çš„é …ç›®å­¸éäº†ï¼Œé€™é‚Šå¿«é€Ÿè·³éï¼Œåªè¨˜å¹¾å€‹æ–°çŸ¥è­˜</p>
</blockquote>
<h3 id="è¨ˆç®—å±¬æ€§èˆ‡ç›£è½å™¨">è¨ˆç®—å±¬æ€§èˆ‡ç›£è½å™¨</h3>
<p><img src="image-20220112144118867.png" alt="image-20220112144118867"></p>
<h3 id="éæ¿¾å™¨">éæ¿¾å™¨</h3>
<p><img src="image-20220112144352550.png" alt="image-20220112144352550"></p>
<h3 id="çµ„ä»¶åŒ–">çµ„ä»¶åŒ–</h3>
<blockquote>
<p>å¯ä»¥å¾©ç”¨çš„æ¨¡æ¿</p>
</blockquote>
<ul>
<li>æ²’æœ‰elå±¬æ€§ï¼Œä¸èˆ‡é é¢ä¸­çš„å…ƒç´ ç¶å®š</li>
<li>templateå°±æ˜¯ä»–çš„HTMLæ¨¡æ¿</li>
<li>data()å¿…é ˆæ˜¯ä¸€å€‹å‡½æ•¸è€Œéç‰©ä»¶</li>
</ul>
<p><img src="image-20220112144809947.png" alt="image-20220112144809947"></p>
<ul>
<li>å±€éƒ¨çµ„ä»¶
<ul>
<li>ç”¨componmentsè²æ˜ï¼Œå…¶ä¸­çš„keyåå°±æ˜¯æ¨™ç°½å</li>
</ul>
</li>
</ul>
<p><img src="image-20220112145205606.png" alt="image-20220112145205606"></p>
<p><img src="image-20220112145338652.png" alt="image-20220112145338652"></p>
<h3 id="ç”Ÿå‘½é€±æœŸ">ç”Ÿå‘½é€±æœŸ</h3>
<ul>
<li>åƒè€ƒ <a href="https://book.vue.tw/CH1/1-7-lifecycle.html">https://book.vue.tw/CH1/1-7-lifecycle.html</a></li>
</ul>
<p><img src="image-20220112145744902.png" alt="image-20220112145744902"></p>
<h3 id="è…³æ‰‹æ¶å‰µå»ºè¡¨å–®">è…³æ‰‹æ¶å‰µå»ºè¡¨å–®</h3>
<ul>
<li>ä¹‹å‰é€™é‚Šæ‰‹å‹•è¦å…ˆå»routerå‰µå»ºå³é‚Šçš„å°èˆªæ¬„ï¼Œè…³æ‰‹æ¶å¯ä»¥ç”¨å¯è¦–åŒ–å·¥å…·ç›´æ¥å‰µé€ ï¼Œéå¸¸æ–¹ä¾¿</li>
<li>è‡ªå·±è¦å¯¦ç¾çš„éƒ¨åˆ†åªå‰©æ¥å¾Œç«¯APIçš„ç¶²å€èˆ‡è³‡æ–™å‘ˆç¾</li>
</ul>
<p><img src="image-20220112223255308.png" alt="image-20220112223255308"></p>
<h3 id="javaxå•é¡Œ">javaxå•é¡Œ</h3>
<ul>
<li>å•Ÿå‹•renren-fastæœå‹™æ™‚å› ç‚ºå¼•ç”¨äº†commonæ¨¡çµ„(ç‚ºäº†è®“å¾Œå°çš„serverä¹Ÿèƒ½ä¸Šnacosæœå‹™ç™¼ç¾)ï¼Œåˆå‡ºäº†é»å•é¡Œï¼Œæ’æŸ¥äº†åŠå¤©</li>
</ul>
<pre tabindex="0"><code>package javax.validation.constraints does not exist
è§£æ³•:
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre><ul>
<li>æˆ‘æ„Ÿè¦ºäººäººé–‹æºé€™å€‹é …ç›®å·²ç¶“è·Ÿä¸ä¸Šæ™‚ä»£äº†ï¼Œç¶²è·¯ä¸Šç›®å‰2022å¹´1æœˆæ¯”è¼ƒæ¨è–¦çš„æ˜¯è‹¥ä¾è…³æ‰‹æ¶ï¼Œä»–é€™å€‹starè¶…é«˜å…¨ç«™ç¬¬2ï¼Œä¹Ÿæœ‰ä¸€ç›´åœ¨ç¶­è­·ï¼Œissueè™•ç†å¾ˆç©æ¥µï¼Œæœ‰æ©Ÿæœƒå˜—è©¦çœ‹çœ‹</li>
<li><a href="https://gitee.com/y_project/RuoYi">https://gitee.com/y_project/RuoYi</a></li>
</ul>
<h1 id="å¾Œç«¯">å¾Œç«¯</h1>
<ul>
<li>ç¾åœ¨è¦å¯¦ç¾åœ¨å¾Œå°æª¢è¦–å•†å“åˆ—è¡¨åŠŸèƒ½ï¼Œé€²åˆ°productæ¨¡çµ„çš„controllerï¼Œå¯«æŸ¥è©¢çš„æ§åˆ¶å™¨èˆ‡æœå‹™ã€å¯¦ç¾é¡</li>
<li>è¦è¿”å›çš„è³‡æ–™æ˜¯é€™ç¨®è¡¨æ ¼</li>
</ul>
<p><img src="image-20220112224741940.png" alt="image-20220112224741940"></p>
<ul>
<li>ä¸‰ç´šæ¨¹å½¢åˆ—è¡¨ï¼Œè€å¸«é€™é‚Šä¸€æ¬¡sqlæŸ¥å‡ºå…¨éƒ¨è³‡æ–™ç„¶å¾Œç”¨streamå·¥å…·é¡æ“ä½œè³¦å¥½å€¼ï¼Œå¯¦åœ¨å¤ªå¼·ã€‚æˆ‘æƒ³çœ‹æ‡‚å°±èŠ±äº†å¤§åŠå¤©ï¼Œé‚„æ˜¯è€å¯¦forå¾ªç’°ï¼Œæˆ–æ˜¯å¤šæŸ¥å¹¾æ¬¡SQLå§&hellip;</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * ä¸‰ç´šæ¨¹å‹åˆ—è¡¨
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     *
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> List&lt;CategoryEntity&gt; <span style="color:#008b45">listTree</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// æŸ¥æ‰€æœ‰åˆ†é¡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        List&lt;CategoryEntity&gt; entities = baseMapper.<span style="color:#658b00">selectList</span>(<span style="color:#8b008b;font-weight:bold">null</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// lamdbaè¡¨é”å¼å·¦é‚Šå½¢åƒï¼Œå³é‚Šæ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        List&lt;CategoryEntity&gt; levelMenus = entities.<span style="color:#658b00">stream</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#658b00">filter</span>(e -&gt; e.<span style="color:#658b00">getParentCid</span>() == 0) <span style="color:#228b22">// å…ˆç¯©å‡ºç¬¬ä¸€ç´šï¼Œsetä»–çš„å­ç´šï¼Œèª¿ç”¨ä¸‹é¢çš„æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>                .<span style="color:#658b00">map</span>((menu) -&gt; {
</span></span><span style="display:flex;"><span>                    menu.<span style="color:#658b00">setChildren</span>(findChildren(menu, entities));
</span></span><span style="display:flex;"><span>                    <span style="color:#8b008b;font-weight:bold">return</span> menu;
</span></span><span style="display:flex;"><span>                })
</span></span><span style="display:flex;"><span>                .<span style="color:#658b00">sorted</span>(Comparator.<span style="color:#658b00">comparingInt</span>(menu -&gt; (menu.<span style="color:#658b00">getSort</span>() == <span style="color:#8b008b;font-weight:bold">null</span> ? 0 : menu.<span style="color:#658b00">getSort</span>())))
</span></span><span style="display:flex;"><span>                .<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">toList</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> levelMenus;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * æ‰¾å‡ºæ‰€æœ‰å­ç´šä¸¦è³¦ä¸Š
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     *
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param root
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param all
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> List&lt;CategoryEntity&gt; <span style="color:#008b45">findChildren</span>(CategoryEntity root, List&lt;CategoryEntity&gt; all) {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// allæ˜¯å…¨éƒ¨çš„å“é …
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        List&lt;CategoryEntity&gt; children = all.<span style="color:#658b00">stream</span>().<span style="color:#658b00">filter</span>(categoryEntity -&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">return</span> categoryEntity.<span style="color:#658b00">getParentCid</span>().<span style="color:#658b00">equals</span>(root.<span style="color:#658b00">getCatId</span>());
</span></span><span style="display:flex;"><span>        }).<span style="color:#658b00">map</span>(categoryEntity -&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// æ‰¾åˆ°å­èœå–®(éæ­¸)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            categoryEntity.<span style="color:#658b00">setChildren</span>(findChildren(categoryEntity, all));
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">return</span> categoryEntity;
</span></span><span style="display:flex;"><span>        }).<span style="color:#658b00">sorted</span>((menu, menu2) -&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// èœå–®çš„æ’åº
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            <span style="color:#8b008b;font-weight:bold">return</span> (menu.<span style="color:#658b00">getSort</span>() == <span style="color:#8b008b;font-weight:bold">null</span> ? 0 : menu.<span style="color:#658b00">getSort</span>()) - (menu2.<span style="color:#658b00">getSort</span>() == <span style="color:#8b008b;font-weight:bold">null</span> ? 0 : menu2.<span style="color:#658b00">getSort</span>());
</span></span><span style="display:flex;"><span>        }).<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">toList</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> children;
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h2 id="è¨­å®šç¶²é—œ">è¨­å®šç¶²é—œ</h2>
<ul>
<li>é¦–å…ˆæŠŠå¾Œå°å‰ç«¯çš„<code>baseUrl</code>æ”¹äº†ï¼Œè®“ä»–æŒ‡å‘ç¶²é—œçš„é˜œ88
<ul>
<li>é€™è¦ç†ä¸€ä¸‹ï¼Œ<code>baseUrl</code>æŒ‡çš„æ˜¯å¾Œå°é é¢ç™¼å‡ºå»çš„è«‹æ±‚</li>
<li>å¾Œå°çš„<code>renren-fast-vue</code>æœ¬èº«å•Ÿå‹•å ç”¨çš„é‚„æ˜¯8000æˆ–8001</li>
</ul>
</li>
</ul>
<p><img src="image-20220112225502089.png" alt="image-20220112225502089"></p>
<ul>
<li>è€Œå¾Œå°çš„server(renren-fast)å•Ÿå‹•çš„é˜œç„¡æ‰€è¬‚ï¼Œé‡é»æ˜¯é€™å€‹æœå‹™è¦è¨»å†Šåˆ°nacos</li>
</ul>
<p><img src="image-20220112230026696.png" alt="image-20220112230026696"></p>
<ul>
<li>ç„¶å¾Œåœ¨ç¶²é—œä¸­è¨­å®šè½‰ç™¼</li>
<li><code>uri</code>æ˜¯è¦å»çš„è³‡æºåï¼Œå°±æ˜¯å¾®æœå‹™å(åŒæ¨¡çµ„åï¼Œä½†æœ‰äººæ˜¯ç”¨åŒ…åè¦æ³¨æ„å¯èƒ½æœ‰<code>-</code>æˆ–<code>.</code>çš„å·®åˆ¥)ï¼Œ<code>lb://</code>æ˜¯è² è¼‰å‡è¡¡çš„æ„æ€</li>
<li><code>predicates</code> æ–·è¨€ï¼Œåˆ¤æ–·çš„æ¢ä»¶ï¼Œç¶²å€é•·é€™æ¨£çš„äºº</li>
</ul>
<pre tabindex="0"><code>spring:
  cloud:
    gateway:
      routes:
        - id: admin_route
          uri: lb://renren-fast
          predicates:
            - Path=/api/**
          filters:
            - =/api/(?&lt;segment&gt;.*),/renren-fast/$\{segment}
</code></pre><ul>
<li>ç„¶å¾Œç”¨<code>RewritePath</code>é‡å¯«è·¯å¾‘ï¼Œå› ç‚ºä»–æœ¬ä¾†æ˜¯é€™æ¨£</li>
</ul>
<p><img src="image-20220112230347982.png" alt="image-20220112230347982"></p>
<h3 id="rewritepathæ­£å‰‡">RewritePathæ­£å‰‡</h3>
<ul>
<li>æˆ‘å› ç‚ºç¶²é—œè½‰ç™¼å¯«éŒ¯åˆæ‰¾å¥½ä¹…
<ul>
<li>é‡é»ä¸€:<code>predicates</code>å¾Œé¢çš„<code>/**</code>åƒè¬åˆ¥å¿˜å¯«</li>
<li>é‡é»äºŒ: åŒ¹é…ç²¾ç¢ºåº¦é«˜çš„è¦æ”¾ä¸Šé¢(é¡ä¼¼å¤šå±¤ifçš„æ¦‚å¿µ)</li>
</ul>
</li>
</ul>
<pre tabindex="0"><code>spring:
  cloud:
    gateway:
      routes:
        - id: product_route
          uri: lb://product
          predicates:
            - Path=/api/product/**
          filters:
            - RewritePath=/api/(?&lt;segment&gt;.*),/$\{segment}
</code></pre><ul>
<li>ç¬¬ä¸€å€‹<code>?&lt;segment&gt;</code>æ˜¯è¦åˆ‡å‡ºä¾†çš„ï¼Œå¯ä»¥å«ä»»ä½•è‡ªè¨‚çš„è®Šæ•¸å</li>
<li>ç·Šæ¥çš„<code>.*</code>è¡¨ç¤ºåŒ¹é…å¹¾æ¬¡ï¼Œé€™è£¡æ˜¯ç„¡æ•¸æ¬¡ä¹Ÿå°±æ˜¯å…¨éƒ¨</li>
<li>ç„¶å¾Œæ‹¬è™Ÿ)å¾Œçš„<code>,</code>å¾Œé¢æ”¾çš„æ˜¯é‡å¯«æˆå•¥æ¨£ï¼Œæ¥å»çµ¦å¾®æœå‹™</li>
<li><code>$\</code>æ˜¯å› ç‚ºyamlæ ¼å¼æ€•å®ƒç•¶æˆç·¨è­¯æ™‚çš„è®Šæ•¸æ‰€ä»¥å¯«æˆé€™æ¨£ï¼Œç›¸ç•¶æ–¼é‹è¡Œæ™‚çš„<code>$</code></li>
</ul>
<p><img src="image-20220112234936510.png" alt="image-20220112234936510"></p>
<ul>
<li>ä¹Ÿå¯ä»¥ç”¨StripPrefixï¼Œåˆ‡æ‰å¹¾ç´š
<ul>
<li>åƒè€ƒ <a href="https://www.jianshu.com/p/e7f126f4e00b">https://www.jianshu.com/p/e7f126f4e00b</a></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">filters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>- StripPrefix=1<span style="color:#bbb">
</span></span></span></code></pre></div><ul>
<li>éƒ½è¨­å®šå®Œå¾Œï¼Œç›¸ç•¶æ–¼è«‹æ±‚è¨ªå•éƒ½åˆ°88æ‰¾ç¶²é—œï¼Œç¶²é—œè—‰ç”±æœå‹™ç™¼ç¾è½‰ä»‹çµ¦å…¶ä»–æœå‹™</li>
</ul>
<p><img src="image-20220112225902832.png" alt="image-20220112225902832"></p>
<ul>
<li>åˆ°é€™è£¡ç™»å…¥ç•«é¢æ‡‰è©²åˆèƒ½æˆåŠŸé¡¯ç¤ºé©—è­‰ç¢¼äº†ï¼Œç„¶è€Œé‚„æ²’å®Œ</li>
</ul>
<h2 id="è·¨åŸŸå•é¡Œ">è·¨åŸŸå•é¡Œ</h2>
<ul>
<li>è€æœ‹å‹åˆä¾†äº†ï¼Œé™¤äº†ç°¡å–®è«‹æ±‚ï¼Œè¤‡é›œçš„ä¾‹å¦‚ajaxè«‹æ±‚åªè¦æœ‰ä»¥ä¸‹ä¸‰ç¨®æƒ…æ³éƒ½æœƒå¼•èµ·è·¨åŸŸå•é¡Œ:
<ul>
<li>å”è­°ä¸åŒ:httpèˆ‡https</li>
<li>ç«¯å£ä¸åŒ:9528èˆ‡8201</li>
<li>ipä¸åŒ</li>
</ul>
</li>
<li>è§£æ³•å¾ˆå¤šä¾‹å¦‚:
<ul>
<li>ä½¿ç”¨nginxåå‘ä»£ç†</li>
<li>å¾Œç«¯Controllerè¨»è§£<code>@CrossOrigin</code></li>
<li>å¾Œç«¯æ›ä¸€å€‹å…¨å±€éæ¿¾å™¨ï¼Œé€™é‚Šå…ˆç”¨é€™å€‹</li>
</ul>
</li>
</ul>
<p><img src="image-20220112211942792.png" alt="image-20220112211942792"></p>
<ul>
<li>è…³æ‰‹æ¶å¾Œå°serverè‡ªå¸¶ä¸€å€‹è·¨åŸŸï¼Œé¿å…å¤šé‡è«‹æ±‚ä¸€æ¨£æœƒå ±éŒ¯è¦é—œæ‰</li>
</ul>
<p><img src="image-20220112212229477.png" alt="image-20220112212229477"></p>
<ul>
<li>çµæœè€å¸«æ•™çš„æ–¹æ³•ä¸è¡Œï¼Œç¶²è·¯ä¸Šè©¦äº†å¹¾å€‹ä¹Ÿä¸è¡Œï¼Œæ‰¾åŠå¤©æœ€å¾Œçµ‚æ–¼æ‰¾åˆ°ä¸€å€‹å¯ä»¥çš„ï¼Œéœ€è¦é€ 2å€‹é¡(PS.ç‰ˆæœ¬spring boot=2.3.2.RELEASEï¼Œcloud=Hoxton.SR9)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">CorsConfig</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> CorsResponseHeaderFilter <span style="color:#008b45">corsResponseHeaderFilter</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> CorsResponseHeaderFilter();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> CorsWebFilter <span style="color:#008b45">corsWebFilter</span>() {
</span></span><span style="display:flex;"><span>        UrlBasedCorsConfigurationSource source = <span style="color:#8b008b;font-weight:bold">new</span> UrlBasedCorsConfigurationSource();
</span></span><span style="display:flex;"><span>        CorsConfiguration corsConfiguration = <span style="color:#8b008b;font-weight:bold">new</span> CorsConfiguration();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        corsConfiguration.<span style="color:#658b00">addAllowedHeader</span>(<span style="color:#cd5555">&#34;*&#34;</span>);
</span></span><span style="display:flex;"><span>        corsConfiguration.<span style="color:#658b00">addAllowedMethod</span>(<span style="color:#cd5555">&#34;*&#34;</span>);
</span></span><span style="display:flex;"><span>        corsConfiguration.<span style="color:#658b00">addAllowedOrigin</span>(<span style="color:#cd5555">&#34;*&#34;</span>);
</span></span><span style="display:flex;"><span>        corsConfiguration.<span style="color:#658b00">setAllowCredentials</span>(<span style="color:#8b008b;font-weight:bold">true</span>);
</span></span><span style="display:flex;"><span>        corsConfiguration.<span style="color:#658b00">setMaxAge</span>(600L);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        source.<span style="color:#658b00">registerCorsConfiguration</span>(<span style="color:#cd5555">&#34;/**&#34;</span>, corsConfiguration);
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> CorsWebFilter(source);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">CorsResponseHeaderFilter</span> <span style="color:#8b008b;font-weight:bold">implements</span> GlobalFilter, Ordered {
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">getOrder</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// æŒ‡å®šæ­¤éæ¿¾å™¨ä½æ–¼NettyWriteResponseFilterä¹‹å¾Œ
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#228b22">// å³å¾…è™•ç†å®ŒéŸ¿æ‡‰é«”å¾Œæ¥ç€è™•ç†éŸ¿æ‡‰é ­
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">return</span> NettyWriteResponseFilter.<span style="color:#658b00">WRITE_RESPONSE_FILTER_ORDER</span> + 1;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@SuppressWarnings</span>(<span style="color:#cd5555">&#34;serial&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> Mono&lt;Void&gt; <span style="color:#008b45">filter</span>(ServerWebExchange exchange, GatewayFilterChain chain) {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> chain.<span style="color:#658b00">filter</span>(exchange).<span style="color:#658b00">then</span>(Mono.<span style="color:#658b00">defer</span>(() -&gt; {
</span></span><span style="display:flex;"><span>            exchange.<span style="color:#658b00">getResponse</span>().<span style="color:#658b00">getHeaders</span>().<span style="color:#658b00">entrySet</span>().<span style="color:#658b00">stream</span>()
</span></span><span style="display:flex;"><span>                    .<span style="color:#658b00">filter</span>(kv -&gt; (kv.<span style="color:#658b00">getValue</span>() != <span style="color:#8b008b;font-weight:bold">null</span> &amp;&amp; kv.<span style="color:#658b00">getValue</span>().<span style="color:#658b00">size</span>() &gt; 1))
</span></span><span style="display:flex;"><span>                    .<span style="color:#658b00">filter</span>(kv -&gt; (kv.<span style="color:#658b00">getKey</span>().<span style="color:#658b00">equals</span>(HttpHeaders.<span style="color:#658b00">ACCESS_CONTROL_ALLOW_ORIGIN</span>)
</span></span><span style="display:flex;"><span>                            || kv.<span style="color:#658b00">getKey</span>().<span style="color:#658b00">equals</span>(HttpHeaders.<span style="color:#658b00">ACCESS_CONTROL_ALLOW_CREDENTIALS</span>)))
</span></span><span style="display:flex;"><span>                    .<span style="color:#658b00">forEach</span>(kv -&gt;
</span></span><span style="display:flex;"><span>                    {
</span></span><span style="display:flex;"><span>                        kv.<span style="color:#658b00">setValue</span>(<span style="color:#8b008b;font-weight:bold">new</span> ArrayList&lt;String&gt;() {{
</span></span><span style="display:flex;"><span>                            add(kv.<span style="color:#658b00">getValue</span>().<span style="color:#658b00">get</span>(0));
</span></span><span style="display:flex;"><span>                        }});
</span></span><span style="display:flex;"><span>                    });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">return</span> chain.<span style="color:#658b00">filter</span>(exchange);
</span></span><span style="display:flex;"><span>        }));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>æœ€å¾Œçµ‚æ–¼æˆåŠŸäº†ï¼Œç›¸ç•¶æ–¼é€éç¶²é—œè½‰ç™¼è«‹æ±‚çµ¦å¾®æœå‹™ç„¶å¾ŒéŸ¿æ‡‰å›å»</li>
</ul>
<p><img src="image-20220113000015404.png" alt="image-20220113000015404"></p>
<hr>
<h3 id="spring-bootç°è‰²åœ–æ¡ˆ">spring bootç°è‰²åœ–æ¡ˆ</h3>
<ul>
<li>å›°æ“¾æˆ‘è¨±ä¹…çš„å°å•é¡Œ</li>
</ul>
<p><img src="image-20220113160956445.png" alt="image-20220113160956445"></p>
<ul>
<li>æŒ‰+è™Ÿæ‰‹å‹•æ·»åŠ å³å¯</li>
</ul>
<p><img src="image-20220113161327010.png" alt="image-20220113161327010"></p>
<ul>
<li>ä¸¦ä¸”é€™ç©æ„åŸä¾†å¯ä»¥æ‹–å‹•æ’åºï¼Œæ›å€‹è¾¨è­˜åº¦é«˜çš„åå­—+æ’åºå¥½ï¼Œæ¸¬è©¦æ™‚æ‰¹æ¬¡å•Ÿå‹•é¸å–æ›´æ–¹ä¾¿</li>
</ul>
<p><img src="image-20220113161551510.png" alt="image-20220113161551510"></p>
<h1 id="å…¶ä»–åŠŸèƒ½">å…¶ä»–åŠŸèƒ½</h1>
<blockquote>
<p>å¤§å¤šæ˜¯å‰ç«¯æ¨¡æ¿çš„ä½¿ç”¨ï¼Œæœ‰äº›æˆ‘ç›´æ¥è¤‡è£½è²¼ä¸Šäº†</p>
</blockquote>
<h2 id="é‚è¼¯åˆªé™¤">é‚è¼¯åˆªé™¤</h2>
<p><img src="image-20220113023331862.png" alt="image-20220113023331862"></p>
<ul>
<li>ç”±æ–¼é€™è£¡æ˜¯åçš„ï¼Œ1æ‰æ˜¯è¦é¡¯ç¤ºï¼Œæ‰€ä»¥æ‰‹å‹•åœ¨è¨»è§£ä¸­æŒ‡å®šdelval
<ul>
<li>é€šå¸¸æ˜¯å«is_deletedä¹‹é¡çš„æ¬„ä½</li>
</ul>
</li>
</ul>
<p><img src="image-20220113023053838.png" alt="image-20220113023053838"></p>
<ul>
<li>å‰ç«¯:
<ul>
<li>ç¶ç¢ºèªæç¤ºæ¡†</li>
<li><code>.then()</code>å°æ¥åˆªé™¤API</li>
<li>åˆ·æ–°é é¢</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>    remove(node, data) {
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">const</span> ids = [data.catId];
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.$confirm(<span style="color:#cd5555">`æ˜¯å¦åˆªé™¤ã€</span><span style="color:#cd5555">${</span>data.name<span style="color:#cd5555">}</span><span style="color:#cd5555">ã€‘åˆ†é¡?`</span>, <span style="color:#cd5555">&#34;æç¤º&#34;</span>, {
</span></span><span style="display:flex;"><span>        confirmButtonText: <span style="color:#cd5555">&#34;ç¢ºå®š&#34;</span>,
</span></span><span style="display:flex;"><span>        cancelButtonText: <span style="color:#cd5555">&#34;å–æ¶ˆ&#34;</span>,
</span></span><span style="display:flex;"><span>        type: <span style="color:#cd5555">&#34;warning&#34;</span>,
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>        .then(() =&gt; {
</span></span><span style="display:flex;"><span>          <span style="color:#8b008b;font-weight:bold">this</span>.$http({
</span></span><span style="display:flex;"><span>            url: <span style="color:#8b008b;font-weight:bold">this</span>.$http.adornUrl(<span style="color:#cd5555">&#34;/product/category/delete&#34;</span>),
</span></span><span style="display:flex;"><span>            method: <span style="color:#cd5555">&#34;post&#34;</span>,
</span></span><span style="display:flex;"><span>            data: <span style="color:#8b008b;font-weight:bold">this</span>.$http.adornData(ids, <span style="color:#8b008b;font-weight:bold">false</span>),
</span></span><span style="display:flex;"><span>          }).then(({ data }) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">this</span>.$message({
</span></span><span style="display:flex;"><span>              message: <span style="color:#cd5555">&#34;åˆ†é¡åˆªé™¤æˆåŠŸ&#34;</span>,
</span></span><span style="display:flex;"><span>              type: <span style="color:#cd5555">&#34;success&#34;</span>,
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">//åˆ·æ–°å‡ºæ–°çš„åˆ†é¡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            <span style="color:#8b008b;font-weight:bold">this</span>.getMenus();
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">//è¨­ç½®éœ€è¦é è¨­å±•é–‹çš„åˆ†é¡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            <span style="color:#8b008b;font-weight:bold">this</span>.expandedKey = [node.parent.data.catId];
</span></span><span style="display:flex;"><span>          });
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>        .<span style="color:#8b008b;font-weight:bold">catch</span>(() =&gt; {});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      console.log(<span style="color:#cd5555">&#34;remove&#34;</span>, node, data);
</span></span><span style="display:flex;"><span>    },
</span></span></code></pre></div><h2 id="æ–°å¢èˆ‡ä¿®æ”¹ç¯€é»">æ–°å¢èˆ‡ä¿®æ”¹ç¯€é»</h2>
<ul>
<li>å‰ç«¯:
<ul>
<li>ç¶ä¸€å€‹è·³å‡ºçš„ä¿®æ”¹è¡¨å–®ï¼Œgetå›é¡¯è¡¨æ ¼</li>
<li>å°æ¥å¾Œç«¯API</li>
<li>åˆ·æ–°é é¢</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>    edit(data) {
</span></span><span style="display:flex;"><span>      console.log(<span style="color:#cd5555">&#34;è¦ä¿®æ”¹çš„æ•¸æ“š&#34;</span>, data);
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.dialogType = <span style="color:#cd5555">&#34;edit&#34;</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.title = <span style="color:#cd5555">&#34;ä¿®æ”¹åˆ†é¡&#34;</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.dialogVisible = <span style="color:#8b008b;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#228b22">//ç™¼é€è«‹æ±‚ç²å–ç•¶å‰ç¯€é»æœ€æ–°çš„æ•¸æ“š
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>      <span style="color:#8b008b;font-weight:bold">this</span>.$http({
</span></span><span style="display:flex;"><span>        url: <span style="color:#8b008b;font-weight:bold">this</span>.$http.adornUrl(<span style="color:#cd5555">`/product/category/info/</span><span style="color:#cd5555">${</span>data.catId<span style="color:#cd5555">}</span><span style="color:#cd5555">`</span>),
</span></span><span style="display:flex;"><span>        method: <span style="color:#cd5555">&#34;get&#34;</span>,
</span></span><span style="display:flex;"><span>      }).then(({ data }) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">//è«‹æ±‚æˆåŠŸ
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        console.log(<span style="color:#cd5555">&#34;è¦å›é¡¯çš„æ•¸æ“š&#34;</span>, data);
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.category.name = data.data.name;
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.category.catId = data.data.catId;
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.category.icon = data.data.icon;
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.category.productUnit = data.data.productUnit;
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.category.parentCid = data.data.parentCid;
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.category.catLevel = data.data.catLevel;
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.category.sort = data.data.sort;
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.category.showStatus = data.data.showStatus;
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">         *         parentCid: 0,
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">         catLevel: 0,
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">         showStatus: 1,
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">         sort: 0,
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">         */</span>
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    append(data) {
</span></span><span style="display:flex;"><span>      console.log(<span style="color:#cd5555">&#34;append&#34;</span>, data);
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.dialogType = <span style="color:#cd5555">&#34;add&#34;</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.title = <span style="color:#cd5555">&#34;æ·»åŠ åˆ†é¡&#34;</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.dialogVisible = <span style="color:#8b008b;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.category.parentCid = data.catId;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.category.catLevel = data.catLevel * <span style="color:#b452cd">1</span> + <span style="color:#b452cd">1</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.category.catId = <span style="color:#8b008b;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.category.name = <span style="color:#cd5555">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.category.icon = <span style="color:#cd5555">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.category.productUnit = <span style="color:#cd5555">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.category.sort = <span style="color:#b452cd">0</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.category.showStatus = <span style="color:#b452cd">1</span>;
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    submitData() {
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">if</span> (<span style="color:#8b008b;font-weight:bold">this</span>.dialogType === <span style="color:#cd5555">&#34;add&#34;</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.addCategory();
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">if</span> (<span style="color:#8b008b;font-weight:bold">this</span>.dialogType === <span style="color:#cd5555">&#34;edit&#34;</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.editCategory();
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">//ä¿®æ”¹ä¸‰ç´šåˆ†é¡æ•¸æ“š
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    editCategory() {
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">const</span> { catId, name, icon, productUnit } = <span style="color:#8b008b;font-weight:bold">this</span>.category;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.$http({
</span></span><span style="display:flex;"><span>        url: <span style="color:#8b008b;font-weight:bold">this</span>.$http.adornUrl(<span style="color:#cd5555">&#34;/product/category/update&#34;</span>),
</span></span><span style="display:flex;"><span>        method: <span style="color:#cd5555">&#34;post&#34;</span>,
</span></span><span style="display:flex;"><span>        data: <span style="color:#8b008b;font-weight:bold">this</span>.$http.adornData({ catId, name, icon, productUnit }, <span style="color:#8b008b;font-weight:bold">false</span>),
</span></span><span style="display:flex;"><span>      }).then(({ data }) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.$message({
</span></span><span style="display:flex;"><span>          message: <span style="color:#cd5555">&#34;åˆ†é¡ä¿®æ”¹æˆåŠŸ&#34;</span>,
</span></span><span style="display:flex;"><span>          type: <span style="color:#cd5555">&#34;success&#34;</span>,
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">//é—œé–‰å°è©±æ¡†
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">this</span>.dialogVisible = <span style="color:#8b008b;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">//åˆ·æ–°å‡ºæ–°çš„åˆ†é¡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">this</span>.getMenus();
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">//è¨­ç½®éœ€è¦é è¨­å±•é–‹çš„åˆ†é¡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">this</span>.expandedKey = [<span style="color:#8b008b;font-weight:bold">this</span>.category.parentCid];
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">//æ·»åŠ ä¸‰ç´šåˆ†é¡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    addCategory() {
</span></span><span style="display:flex;"><span>      console.log(<span style="color:#cd5555">&#34;æäº¤çš„ä¸‰ç´šåˆ†é¡æ•¸æ“š&#34;</span>, <span style="color:#8b008b;font-weight:bold">this</span>.category);
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.$http({
</span></span><span style="display:flex;"><span>        url: <span style="color:#8b008b;font-weight:bold">this</span>.$http.adornUrl(<span style="color:#cd5555">&#34;/product/category/save&#34;</span>),
</span></span><span style="display:flex;"><span>        method: <span style="color:#cd5555">&#34;post&#34;</span>,
</span></span><span style="display:flex;"><span>        data: <span style="color:#8b008b;font-weight:bold">this</span>.$http.adornData(<span style="color:#8b008b;font-weight:bold">this</span>.category, <span style="color:#8b008b;font-weight:bold">false</span>),
</span></span><span style="display:flex;"><span>      }).then(({ data }) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.$message({
</span></span><span style="display:flex;"><span>          message: <span style="color:#cd5555">&#34;åˆ†é¡ä¿å­˜æˆåŠŸ&#34;</span>,
</span></span><span style="display:flex;"><span>          type: <span style="color:#cd5555">&#34;success&#34;</span>,
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">//é—œé–‰å°è©±æ¡†
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">this</span>.dialogVisible = <span style="color:#8b008b;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">//åˆ·æ–°å‡ºæ–°çš„åˆ†é¡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">this</span>.getMenus();
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">//è¨­ç½®éœ€è¦é è¨­å±•é–‹çš„åˆ†é¡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">this</span>.expandedKey = [<span style="color:#8b008b;font-weight:bold">this</span>.category.parentCid];
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>    },
</span></span></code></pre></div><h2 id="æ‹–æ›³æ”¹è®Šæ’åº">æ‹–æ›³æ”¹è®Šæ’åº</h2>
<blockquote>
<p>é€™å€‹å¤ªéº»ç…©ï¼Œè‰è‰ç•¥é</p>
</blockquote>
<ul>
<li>
<p>åšé–‹é—œæ§åˆ¶æ‹–æ›³è¨±å¯</p>
</li>
<li>
<p>åˆ¤æ–·æ“ºæ”¾çš„ç¯€é»æ·±åº¦</p>
</li>
<li>
<p>æŠŠå®Œæ•´çš„é †åº<code>(&quot;catId&quot;:23,&quot;sort&quot;:0,&quot;parentCid&quot;:1),...</code>å‚³çµ¦å¾Œç«¯</p>
<ul>
<li>å› ç‚ºå¯èƒ½æ”¹è®Šä¸Šä¸‹å±¤ç´šï¼Œæ‰€ä»¥å…±å‚³è‡ªå·±ã€æ’åºã€çˆ¶ç¯€é»</li>
</ul>
</li>
<li>
<p>å¾Œç«¯ç”¨listå»æ¥ã€èª¿ç”¨<code>updateBatchById(list)</code>æ–¹æ³•</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>    batchSave() {
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.$http({
</span></span><span style="display:flex;"><span>        url: <span style="color:#8b008b;font-weight:bold">this</span>.$http.adornUrl(<span style="color:#cd5555">&#34;/product/category/update/sort&#34;</span>),
</span></span><span style="display:flex;"><span>        method: <span style="color:#cd5555">&#34;post&#34;</span>,
</span></span><span style="display:flex;"><span>        data: <span style="color:#8b008b;font-weight:bold">this</span>.$http.adornData(<span style="color:#8b008b;font-weight:bold">this</span>.updateNodes, <span style="color:#8b008b;font-weight:bold">false</span>),
</span></span><span style="display:flex;"><span>      }).then(({ data }) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.$message({
</span></span><span style="display:flex;"><span>          message: <span style="color:#cd5555">&#34;åˆ†é¡é †åºç­‰ä¿®æ”¹æˆåŠŸ&#34;</span>,
</span></span><span style="display:flex;"><span>          type: <span style="color:#cd5555">&#34;success&#34;</span>,
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">//åˆ·æ–°å‡ºæ–°çš„åˆ†é¡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">this</span>.getMenus();
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">//è¨­ç½®éœ€è¦é è¨­å±•é–‹çš„åˆ†é¡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">this</span>.expandedKey = <span style="color:#8b008b;font-weight:bold">this</span>.pCid;
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.updateNodes = [];
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.maxLevel = <span style="color:#b452cd">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// this.pCid = 0;
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>      });
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    handleDrop(draggingNode, dropNode, dropType, ev) {
</span></span><span style="display:flex;"><span>      console.log(<span style="color:#cd5555">&#34;handleDrop: &#34;</span>, draggingNode, dropNode, dropType);
</span></span><span style="display:flex;"><span>      <span style="color:#228b22">//1ã€ç•¶å‰ç¯€é»æœ€æ–°çš„çˆ¶ç¯€é»id
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>      <span style="color:#8b008b;font-weight:bold">let</span> pCid = <span style="color:#b452cd">0</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">let</span> siblings = <span style="color:#8b008b;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">if</span> (dropType == <span style="color:#cd5555">&#34;before&#34;</span> || dropType == <span style="color:#cd5555">&#34;after&#34;</span>) {
</span></span><span style="display:flex;"><span>        pCid =
</span></span><span style="display:flex;"><span>          dropNode.parent.data.catId == <span style="color:#8b008b;font-weight:bold">undefined</span>
</span></span><span style="display:flex;"><span>            ? <span style="color:#b452cd">0</span>
</span></span><span style="display:flex;"><span>            : dropNode.parent.data.catId;
</span></span><span style="display:flex;"><span>        siblings = dropNode.parent.childNodes;
</span></span><span style="display:flex;"><span>      } <span style="color:#8b008b;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        pCid = dropNode.data.catId;
</span></span><span style="display:flex;"><span>        siblings = dropNode.childNodes;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.pCid.push(pCid);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#228b22">//2ã€ç•¶å‰æ‹–æ‹½ç¯€é»çš„æœ€æ–°é †åºï¼Œ
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>      <span style="color:#8b008b;font-weight:bold">for</span> (<span style="color:#8b008b;font-weight:bold">let</span> i = <span style="color:#b452cd">0</span>; i &lt; siblings.length; i++) {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">if</span> (siblings[i].data.catId == draggingNode.data.catId) {
</span></span><span style="display:flex;"><span>          <span style="color:#228b22">//å¦‚æœéæ­·çš„æ˜¯ç•¶å‰æ­£åœ¨æ‹–æ‹½çš„ç¯€é»
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>          <span style="color:#8b008b;font-weight:bold">let</span> catLevel = draggingNode.level;
</span></span><span style="display:flex;"><span>          <span style="color:#8b008b;font-weight:bold">if</span> (siblings[i].level != draggingNode.level) {
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">//ç•¶å‰ç¯€é»çš„å±¤ç´šç™¼ç”Ÿè®ŠåŒ–
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            catLevel = siblings[i].level;
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">//ä¿®æ”¹ä»–å­ç¯€é»çš„å±¤ç´š
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            <span style="color:#8b008b;font-weight:bold">this</span>.updateChildNodeLevel(siblings[i]);
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>          <span style="color:#8b008b;font-weight:bold">this</span>.updateNodes.push({
</span></span><span style="display:flex;"><span>            catId: siblings[i].data.catId,
</span></span><span style="display:flex;"><span>            sort: i,
</span></span><span style="display:flex;"><span>            parentCid: pCid,
</span></span><span style="display:flex;"><span>            catLevel: catLevel,
</span></span><span style="display:flex;"><span>          });
</span></span><span style="display:flex;"><span>        } <span style="color:#8b008b;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>          <span style="color:#8b008b;font-weight:bold">this</span>.updateNodes.push({ catId: siblings[i].data.catId, sort: i });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#228b22">//3ã€ç•¶å‰æ‹–æ‹½ç¯€é»çš„æœ€æ–°å±¤ç´š
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>      console.log(<span style="color:#cd5555">&#34;updateNodes&#34;</span>, <span style="color:#8b008b;font-weight:bold">this</span>.updateNodes);
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    updateChildNodeLevel(node) {
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">if</span> (node.childNodes.length &gt; <span style="color:#b452cd">0</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">for</span> (<span style="color:#8b008b;font-weight:bold">let</span> i = <span style="color:#b452cd">0</span>; i &lt; node.childNodes.length; i++) {
</span></span><span style="display:flex;"><span>          <span style="color:#8b008b;font-weight:bold">const</span> cNode = node.childNodes[i].data;
</span></span><span style="display:flex;"><span>          <span style="color:#8b008b;font-weight:bold">this</span>.updateNodes.push({
</span></span><span style="display:flex;"><span>            catId: cNode.catId,
</span></span><span style="display:flex;"><span>            catLevel: node.childNodes[i].level,
</span></span><span style="display:flex;"><span>          });
</span></span><span style="display:flex;"><span>          <span style="color:#8b008b;font-weight:bold">this</span>.updateChildNodeLevel(node.childNodes[i]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    allowDrop(draggingNode, dropNode, type) {
</span></span><span style="display:flex;"><span>      <span style="color:#228b22">//1ã€è¢«æ‹–å‹•çš„ç•¶å‰ç¯€é»ä»¥åŠæ‰€åœ¨çš„çˆ¶ç¯€é»ç¸½å±¤æ•¸ä¸èƒ½å¤§æ–¼3
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>
</span></span><span style="display:flex;"><span>      <span style="color:#228b22">//1ï¼‰ã€è¢«æ‹–å‹•çš„ç•¶å‰ç¯€é»ç¸½å±¤æ•¸
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>      console.log(<span style="color:#cd5555">&#34;allowDrop:&#34;</span>, draggingNode, dropNode, type);
</span></span><span style="display:flex;"><span>      <span style="color:#228b22">//
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>      <span style="color:#8b008b;font-weight:bold">this</span>.countNodeLevel(draggingNode);
</span></span><span style="display:flex;"><span>      <span style="color:#228b22">//ç•¶å‰æ­£åœ¨æ‹–å‹•çš„ç¯€é»+çˆ¶ç¯€é»æ‰€åœ¨çš„æ·±åº¦ä¸å¤§æ–¼3å³å¯
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>      <span style="color:#8b008b;font-weight:bold">let</span> deep = <span style="color:#658b00">Math</span>.abs(<span style="color:#8b008b;font-weight:bold">this</span>.maxLevel - draggingNode.level) + <span style="color:#b452cd">1</span>;
</span></span><span style="display:flex;"><span>      console.log(<span style="color:#cd5555">&#34;æ·±åº¦ï¼š&#34;</span>, deep);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#228b22">//   this.maxLevel
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>      <span style="color:#8b008b;font-weight:bold">if</span> (type == <span style="color:#cd5555">&#34;inner&#34;</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// console.log(
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#228b22">//   `this.maxLevelï¼š${this.maxLevel}ï¼›draggingNode.data.catLevelï¼š${draggingNode.data.catLevel}ï¼›dropNode.levelï¼š${dropNode.level}`
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#228b22">// );
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">return</span> deep + dropNode.level &lt;= <span style="color:#b452cd">3</span>;
</span></span><span style="display:flex;"><span>      } <span style="color:#8b008b;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> deep + dropNode.parent.level &lt;= <span style="color:#b452cd">3</span>;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    countNodeLevel(node) {
</span></span><span style="display:flex;"><span>      <span style="color:#228b22">//æ‰¾åˆ°æ‰€æœ‰å­ç¯€é»ï¼Œæ±‚å‡ºæœ€å¤§æ·±åº¦
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>      <span style="color:#8b008b;font-weight:bold">if</span> (node.childNodes != <span style="color:#8b008b;font-weight:bold">null</span> &amp;&amp; node.childNodes.length &gt; <span style="color:#b452cd">0</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">for</span> (<span style="color:#8b008b;font-weight:bold">let</span> i = <span style="color:#b452cd">0</span>; i &lt; node.childNodes.length; i++) {
</span></span><span style="display:flex;"><span>          <span style="color:#8b008b;font-weight:bold">if</span> (node.childNodes[i].level &gt; <span style="color:#8b008b;font-weight:bold">this</span>.maxLevel) {
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">this</span>.maxLevel = node.childNodes[i].level;
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>          <span style="color:#8b008b;font-weight:bold">this</span>.countNodeLevel(node.childNodes[i]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    },
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * ä¿®æ”¹æ’åº
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@RequestMapping</span>(<span style="color:#cd5555">&#34;/update/sort&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">//@RequiresPermissions(&#34;product:category:update&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">public</span> R <span style="color:#008b45">updateSort</span>(<span style="color:#707a7c">@RequestBody</span> List&lt;CategoryEntity&gt; list) {
</span></span><span style="display:flex;"><span>        categoryService.<span style="color:#658b00">updateBatchById</span>(list);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> R.<span style="color:#658b00">ok</span>();
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div>
                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">ä¸Šæ¬¡ä¿®æ”¹æ–¼ 2022-01-20</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://yoziming.github.io/post/220121-gulimall-04-jsr303/">
			ä¸‹ä¸€ç¯‡<br>é€†å‘ç”Ÿæˆå‰ç«¯é é¢ã€JSR303ã€é›²å„²å­˜åœ–ç‰‡
                </a>
                
                
                
                <a class="older-posts" href="https://yoziming.github.io/post/220119-gulimall-02-nacos/">
			ä¸Šä¸€ç¯‡<br>æœå‹™è¨»å†Šnacosã€feignã€Gateway
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                








<div id="waline"></div>
<script>
    new Waline({
        el: '#waline',
        path: location.pathname,
        serverURL: "https://waline-pn38gfwbz-yoziming.vercel.app/" ,
		lang: 'en-US',
		visitor: true,
		meta: ['nick', 'mail'],
    });
    </script>



            </div>
        </div>
    </div>


                    </div>
            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
ç§»æ¤è‡ª <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Yoziming
	
</div>
            </div>
    
    <script src="/js/journal.js"></script>
    </body>
</html>
