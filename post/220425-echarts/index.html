<!DOCTYPE html>
<html><head>
<meta name="google-site-verification" content="XrwF-xUZWSGJVBBm7jM8vqemVqx--zo5Tb9d-Vr7BCc" />
<title>EChartsåŸºæœ¬æ‡‰ç”¨</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="åŒä¸€æ®µæ™‚é–“å…§å¤šæ¢æŠ˜ç·šåœ–çš„åšæ³•">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="EChartsåŸºæœ¬æ‡‰ç”¨" />
<meta property="og:description" content="åŒä¸€æ®µæ™‚é–“å…§å¤šæ¢æŠ˜ç·šåœ–çš„åšæ³•" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yoziming.github.io/post/220425-echarts/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-04-25T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-04-25T00:00:00+00:00" /><meta property="og:site_name" content="My Blog" />





<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="EChartsåŸºæœ¬æ‡‰ç”¨"/>
<meta name="twitter:description" content="åŒä¸€æ®µæ™‚é–“å…§å¤šæ¢æŠ˜ç·šåœ–çš„åšæ³•"/>







<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">


  




<link rel="icon" href="https://yoziming.github.io/images/favicon.png">



<link rel="stylesheet" href="https://yoziming.github.io/scss/journal.min.3f72a5fc8f5b5dd732a4b476aced0eece2156958d9d414316494ddb10593ddf7.css" integrity="sha256-P3Kl/I9bXdcypLR2rO0O7OIVaVjZ1BQxZJTdsQWT3fc=" media="screen">



<link rel="stylesheet" href="https://yoziming.github.io/scss/dark-mode.min.f7c2efa7183435a6bd1842f91c541481c7a5137b5991629a870f24e4a516ad4b.css" integrity="sha256-98Lvpxg0Naa9GEL5HFQUgcelE3tZkWKahw8k5KUWrUs=" media="screen">


<script src="/vendor/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>






  <script src="/js/toc.js"></script>











<script src="//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js"></script>





</head>
<body>
    	<div id="app"><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://yoziming.github.io/">
    
        <div class="nav-title">
            æŸšå­èŒ¶å®¤
        </div>
        
        <div class="nav-subtitle">
            ç´€éŒ„è‡ªå­¸å¤§å°äº‹
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/">
                é¦–é ğŸ 
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                æ¨™ç±¤ğŸ·ï¸
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                ç³»åˆ—æ–‡ğŸ“–
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about-me">
                é—œæ–¼æˆ‘ğŸ£
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
ç§»æ¤è‡ª <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Yoziming
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®éŒ„ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#echarts" onclick="onNavClick(`#echarts-nav`)" id="echarts-nav">
									ECharts
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%90%8c%e4%b8%80%e6%ae%b5%e6%99%82%e9%96%93%e5%85%a7%e5%a4%9a%e6%a2%9d%e6%8a%98%e7%b7%9a%e5%9c%96" onclick="onNavClick(`#åŒä¸€æ®µæ™‚é–“å…§å¤šæ¢æŠ˜ç·šåœ–-nav`)" id="åŒä¸€æ®µæ™‚é–“å…§å¤šæ¢æŠ˜ç·šåœ–-nav">
									åŒä¸€æ®µæ™‚é–“å…§å¤šæ¢æŠ˜ç·šåœ–
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/">
                    é¦–é ğŸ 
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    æ¨™ç±¤ğŸ·ï¸
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    ç³»åˆ—æ–‡ğŸ“–
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about-me">
                    é—œæ–¼æˆ‘ğŸ£
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®éŒ„ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#echarts" onclick="onNavClick(`#echarts-nav`)" id="echarts-nav">
									ECharts
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%90%8c%e4%b8%80%e6%ae%b5%e6%99%82%e9%96%93%e5%85%a7%e5%a4%9a%e6%a2%9d%e6%8a%98%e7%b7%9a%e5%9c%96" onclick="onNavClick(`#åŒä¸€æ®µæ™‚é–“å…§å¤šæ¢æŠ˜ç·šåœ–-nav`)" id="åŒä¸€æ®µæ™‚é–“å…§å¤šæ¢æŠ˜ç·šåœ–-nav">
									åŒä¸€æ®µæ™‚é–“å…§å¤šæ¢æŠ˜ç·šåœ–
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://yoziming.github.io/">
            æŸšå­èŒ¶å®¤
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://yoziming.github.io/">
        <div class="single-column-header-title">æŸšå­èŒ¶å®¤</div>
        
        <div class="single-column-header-subtitle">ç´€éŒ„è‡ªå­¸å¤§å°äº‹</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://yoziming.github.io/images/front.jpg')"
                    
                
            >
                <div class="post-title">
                    EChartsåŸºæœ¬æ‡‰ç”¨
                    
                    <div class="post-subtitle">
                        åŒä¸€æ®µæ™‚é–“å…§å¤šæ¢æŠ˜ç·šåœ–çš„åšæ³•
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2022-04-25 00:00
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/frontend">Frontend</a>
                                &nbsp;
                        

                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h1 id="echarts">ECharts</h1>
<ul>
<li>EChartsæ˜¯ç™¾åº¦æçµ¦Apacheï¼Œé–‹æºå…è²»çš„åœ–è¡¨å¥—ä»¶</li>
<li>å®˜æ–¹: <a href="https://echarts.apache.org/zh/index.html">https://echarts.apache.org/zh/index.html</a></li>
</ul>
<h2 id="åŒä¸€æ®µæ™‚é–“å…§å¤šæ¢æŠ˜ç·šåœ–">åŒä¸€æ®µæ™‚é–“å…§å¤šæ¢æŠ˜ç·šåœ–</h2>
<ul>
<li>åŸºæœ¬çš„ç”¨æ³•å…¶å¯¦å®˜æ–¹å°±å¾ˆå¤šç¯„ä¾‹ï¼Œæ¯”è¼ƒéº»ç…©çš„å…¶å¯¦æ˜¯åŒä¸€æ®µæ™‚é–“å…§å¤šçµ„æ•¸æ“šã€å¤šæ¢æŠ˜ç·šåœ–çš„åšæ³•</li>
<li>æˆ‘ç•¶åˆä¹Ÿæ˜¯èŠ±äº†ä¸€é™£æ™‚é–“æ‰ææ‡‚æ€åšï¼Œæœ€å¾Œé¡ä¼¼é€™æ¨£çš„æ•ˆæœ</li>
</ul>
<p><img src="Snipaste_2022-05-27_11-31-38.png" alt="Snipaste_2022-05-27_11-31-38"></p>
<ul>
<li>æ€è·¯æ˜¯é€™æ¨£çš„ï¼Œé¦–å…ˆç¢ºå®šXè»¸(æ™‚é–“)çš„èµ·é»èˆ‡çµ‚é»ï¼Œç„¶å¾Œæ ¹æ“šåˆ†å‰²çš„æœ€å°æ™‚é–“å–®ä½(ä¾‹å¦‚æ¯å¤©)ï¼Œå…ˆç”¢ç”Ÿå‡ºtimeNodeArray æ™‚é–“åˆ»åº¦æ•¸çµ„ï¼Œä¾‹å¦‚æˆ‘å¾5/1~5/30è™Ÿï¼Œé‚£å°±æœƒæœ‰30å€‹ç¯€é»</li>
<li>timeNodeArray å¯ä»¥åœ¨å‰ç«¯ç”Ÿæˆä¹Ÿå¯ä»¥åœ¨å¾Œç«¯ï¼Œæˆ‘å¾Œä¾†çµ±ä¸€æ˜¯åšåœ¨å¾Œç«¯ï¼Œé¡ä¼¼é€™æ¨£</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>        <span style="color:#228b22">// å»ºç«‹æ™‚é–“ç¯€é»æ•¸çµ„(xAxis)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        FastDateFormat sdf = FastDateFormat.<span style="color:#658b00">getInstance</span>(<span style="color:#cd5555">&#34;yyyy-MM-dd&#34;</span>);
</span></span><span style="display:flex;"><span>        List&lt;String&gt; xAxis = <span style="color:#8b008b;font-weight:bold">new</span> ArrayList&lt;&gt;();
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">if</span> (param.<span style="color:#658b00">getStatsType</span>() == <span style="color:#b452cd">2</span>) { <span style="color:#228b22">// ä»¥&#34;æœˆ&#34;ç‚ºåŸºæœ¬å–®ä½å»ºç«‹æ™‚é–“ç¯€é»æ•¸çµ„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            sdf = FastDateFormat.<span style="color:#658b00">getInstance</span>(<span style="color:#cd5555">&#34;yyyy-MM&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#00688b;font-weight:bold">int</span> monthsBetween = monthsBetween(param.<span style="color:#658b00">getStartTime</span>(), param.<span style="color:#658b00">getEndTime</span>());
</span></span><span style="display:flex;"><span>            Calendar cal = Calendar.<span style="color:#658b00">getInstance</span>();
</span></span><span style="display:flex;"><span>            cal.<span style="color:#658b00">setTime</span>(param.<span style="color:#658b00">getStartTime</span>());
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">for</span> (<span style="color:#00688b;font-weight:bold">int</span> i = <span style="color:#b452cd">0</span>; i &lt; monthsBetween; i++) {
</span></span><span style="display:flex;"><span>                xAxis.<span style="color:#658b00">add</span>(sdf.<span style="color:#658b00">format</span>(cal.<span style="color:#658b00">getTime</span>()));
</span></span><span style="display:flex;"><span>                cal.<span style="color:#658b00">add</span>(Calendar.<span style="color:#658b00">MONTH</span>, <span style="color:#b452cd">1</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        } <span style="color:#8b008b;font-weight:bold">else</span> <span style="color:#8b008b;font-weight:bold">if</span> (param.<span style="color:#658b00">getStatsType</span>() == <span style="color:#b452cd">3</span>) { <span style="color:#228b22">// ä»¥&#34;æ—¥&#34;ç‚ºåŸºæœ¬å–®ä½å»ºç«‹æ™‚é–“ç¯€é»æ•¸çµ„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            sdf = FastDateFormat.<span style="color:#658b00">getInstance</span>(<span style="color:#cd5555">&#34;yyyy-MM-dd&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#00688b;font-weight:bold">int</span> daysBetween = daysBetween(param.<span style="color:#658b00">getStartTime</span>(), param.<span style="color:#658b00">getEndTime</span>());
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">for</span> (<span style="color:#00688b;font-weight:bold">int</span> i = <span style="color:#b452cd">0</span>; i &lt; daysBetween; i++) {
</span></span><span style="display:flex;"><span>                Date nextTime = <span style="color:#8b008b;font-weight:bold">new</span> Date(param.<span style="color:#658b00">getStartTime</span>().<span style="color:#658b00">getTime</span>() + (<span style="color:#b452cd">1000L</span> * <span style="color:#b452cd">60</span> * <span style="color:#b452cd">60</span> * <span style="color:#b452cd">24</span> * i));
</span></span><span style="display:flex;"><span>                xAxis.<span style="color:#658b00">add</span>(sdf.<span style="color:#658b00">format</span>(nextTime));
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        } <span style="color:#8b008b;font-weight:bold">else</span> <span style="color:#8b008b;font-weight:bold">if</span> (param.<span style="color:#658b00">getStatsType</span>() == <span style="color:#b452cd">4</span>) { <span style="color:#228b22">// ä»¥&#34;æ™‚&#34;ç‚ºåŸºæœ¬å–®ä½å»ºç«‹æ™‚é–“ç¯€é»æ•¸çµ„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            sdf = FastDateFormat.<span style="color:#658b00">getInstance</span>(<span style="color:#cd5555">&#34;yyyy-MM-dd HH:mm:ss&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#00688b;font-weight:bold">int</span> hoursBetween = hoursBetween(param.<span style="color:#658b00">getStartTime</span>(), param.<span style="color:#658b00">getEndTime</span>());
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">for</span> (<span style="color:#00688b;font-weight:bold">int</span> i = <span style="color:#b452cd">0</span>; i &lt; hoursBetween; i++) {
</span></span><span style="display:flex;"><span>                Date nextTime = <span style="color:#8b008b;font-weight:bold">new</span> Date(param.<span style="color:#658b00">getStartTime</span>().<span style="color:#658b00">getTime</span>() + (<span style="color:#b452cd">1000L</span> * <span style="color:#b452cd">60</span> * <span style="color:#b452cd">60</span> * i));
</span></span><span style="display:flex;"><span>                xAxis.<span style="color:#658b00">add</span>(sdf.<span style="color:#658b00">format</span>(nextTime));
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span></code></pre></div><ul>
<li>è¨ˆç®—æ™‚é–“å·®çš„å·¥å…·é¡ï¼Œå…¶å¯¦æˆ‘å¾ˆæƒ³ç”¨ç³Šå¡—å·¥å…·åŒ…&hellip;</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span> <span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * ç²å–å…©å€‹æ—¥æœŸç›¸å·®çš„æœˆæ•¸
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">monthsBetween</span>(Date d1, Date d2) {
</span></span><span style="display:flex;"><span>        Calendar c1 = Calendar.<span style="color:#658b00">getInstance</span>();
</span></span><span style="display:flex;"><span>        Calendar c2 = Calendar.<span style="color:#658b00">getInstance</span>();
</span></span><span style="display:flex;"><span>        c1.<span style="color:#658b00">setTime</span>(d1);
</span></span><span style="display:flex;"><span>        c2.<span style="color:#658b00">setTime</span>(d2);
</span></span><span style="display:flex;"><span>        <span style="color:#00688b;font-weight:bold">int</span> year1 = c1.<span style="color:#658b00">get</span>(Calendar.<span style="color:#658b00">YEAR</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#00688b;font-weight:bold">int</span> year2 = c2.<span style="color:#658b00">get</span>(Calendar.<span style="color:#658b00">YEAR</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#00688b;font-weight:bold">int</span> month1 = c1.<span style="color:#658b00">get</span>(Calendar.<span style="color:#658b00">MONTH</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#00688b;font-weight:bold">int</span> month2 = c2.<span style="color:#658b00">get</span>(Calendar.<span style="color:#658b00">MONTH</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#00688b;font-weight:bold">int</span> day1 = c1.<span style="color:#658b00">get</span>(Calendar.<span style="color:#658b00">DAY_OF_MONTH</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#00688b;font-weight:bold">int</span> day2 = c2.<span style="color:#658b00">get</span>(Calendar.<span style="color:#658b00">DAY_OF_MONTH</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// ç²å–å¹´çš„å·®å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#00688b;font-weight:bold">int</span> yearInterval = year1 - year2;
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// å¦‚æœ d1çš„ æœˆ-æ—¥ å°æ–¼ d2çš„ æœˆ-æ—¥ é‚£éº¼ yearInterval-- é€™æ¨£å°±å¾—åˆ°äº†ç›¸å·®çš„å¹´æ•¸
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">if</span> (month1 &lt; month2 || month1 == month2 &amp;&amp; day1 &lt; day2) {
</span></span><span style="display:flex;"><span>            yearInterval--;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// ç²å–æœˆæ•¸å·®å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#00688b;font-weight:bold">int</span> monthInterval = (month1 + <span style="color:#b452cd">12</span>) - month2;
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">if</span> (day1 &lt; day2) {
</span></span><span style="display:flex;"><span>            monthInterval--;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        monthInterval %= <span style="color:#b452cd">12</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> Math.<span style="color:#658b00">abs</span>(yearInterval * <span style="color:#b452cd">12</span> + monthInterval);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * JAVAè¨ˆç®—å…©å€‹æ—¥æœŸç›¸å·®å¤šå°‘å¤©(by date)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">daysBetween</span>(Date date1, Date date2) {
</span></span><span style="display:flex;"><span>        Calendar cal = Calendar.<span style="color:#658b00">getInstance</span>();
</span></span><span style="display:flex;"><span>        cal.<span style="color:#658b00">setTime</span>(date1);
</span></span><span style="display:flex;"><span>        <span style="color:#00688b;font-weight:bold">long</span> time1 = cal.<span style="color:#658b00">getTimeInMillis</span>();
</span></span><span style="display:flex;"><span>        cal.<span style="color:#658b00">setTime</span>(date2);
</span></span><span style="display:flex;"><span>        <span style="color:#00688b;font-weight:bold">long</span> time2 = cal.<span style="color:#658b00">getTimeInMillis</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#00688b;font-weight:bold">long</span> between_days = (time2 - time1) / (<span style="color:#b452cd">1000</span> * <span style="color:#b452cd">3600</span> * <span style="color:#b452cd">24</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> Integer.<span style="color:#658b00">parseInt</span>(String.<span style="color:#658b00">valueOf</span>(between_days));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * JAVAè¨ˆç®—å…©å€‹æ—¥æœŸç›¸å·®å¤šå°‘å°æ™‚
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">hoursBetween</span>(Date date1, Date date2) {
</span></span><span style="display:flex;"><span>        Calendar cal = Calendar.<span style="color:#658b00">getInstance</span>();
</span></span><span style="display:flex;"><span>        cal.<span style="color:#658b00">setTime</span>(date1);
</span></span><span style="display:flex;"><span>        <span style="color:#00688b;font-weight:bold">long</span> time1 = cal.<span style="color:#658b00">getTimeInMillis</span>();
</span></span><span style="display:flex;"><span>        cal.<span style="color:#658b00">setTime</span>(date2);
</span></span><span style="display:flex;"><span>        <span style="color:#00688b;font-weight:bold">long</span> time2 = cal.<span style="color:#658b00">getTimeInMillis</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#00688b;font-weight:bold">long</span> between_hours = (time2 - time1) / (<span style="color:#b452cd">1000</span> * <span style="color:#b452cd">3600</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> Integer.<span style="color:#658b00">parseInt</span>(String.<span style="color:#658b00">valueOf</span>(between_hours));
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><ul>
<li>ç„¶å¾Œå»DBæ’ˆå°æ‡‰çš„è³‡æ–™</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>        <span style="color:#228b22">// è»Šé¡å°æ‡‰ç·¨è™Ÿ
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        Map&lt;String, String&gt; carTypeMap = <span style="color:#8b008b;font-weight:bold">new</span> HashMap&lt;&gt;();
</span></span><span style="display:flex;"><span>        carTypeMap.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;03&#34;</span>, <span style="color:#cd5555">&#34;å¤§è²¨è»Š&#34;</span>); <span style="color:#228b22">// å¤§è²¨è»Š
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        carTypeMap.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;04&#34;</span>, <span style="color:#cd5555">&#34;å°è²¨è»Š&#34;</span>); <span style="color:#228b22">// å°è²¨è»Š
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        carTypeMap.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;05&#34;</span>, <span style="color:#cd5555">&#34;å…¬è»Š&#34;</span>); <span style="color:#228b22">// å…¬è»Š
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        carTypeMap.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;06&#34;</span>, <span style="color:#cd5555">&#34;è‡ªç”¨è»Š&#34;</span>); <span style="color:#228b22">// è‡ªç”¨è»Š
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        carTypeMap.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;07&#34;</span>, <span style="color:#cd5555">&#34;æ©Ÿè»Š&#34;</span>); <span style="color:#228b22">// æ©Ÿè»Š
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        carTypeMap.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;08&#34;</span>, <span style="color:#cd5555">&#34;è…³è¸è»Š&#34;</span>); <span style="color:#228b22">// è…³è¸è»Š
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        carTypeMap.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;09&#34;</span>, <span style="color:#cd5555">&#34;æ•‘è­·è»Š&#34;</span>); <span style="color:#228b22">// æ•‘è­·è»Š
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        carTypeMap.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;10&#34;</span>, <span style="color:#cd5555">&#34;æ¶ˆé˜²è»Š&#34;</span>); <span style="color:#228b22">// æ¶ˆé˜²è»Š
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        carTypeMap.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;11&#34;</span>, <span style="color:#cd5555">&#34;è­¦è»Š&#34;</span>); <span style="color:#228b22">// è­¦è»Š
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// å–å¾—æŒ‡å®šæ™‚é–“æ®µçš„çµ±è¨ˆçµæœ
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        List&lt;IdentifyResultStatistics&gt; rawStatsData = identifyResultRepo.<span style="color:#658b00">findVehicleTypeAnalysis</span>(param.<span style="color:#658b00">getStartTime</span>(), param.<span style="color:#658b00">getEndTime</span>(), param.<span style="color:#658b00">getStatsType</span>().<span style="color:#658b00">toString</span>(), param.<span style="color:#658b00">getIdList</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// ä¾ç…§è»Šç¨®åˆ†é–‹
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        Map&lt;String, List&lt;IdentifyResultStatistics&gt;&gt; typeCollect = rawStatsData.<span style="color:#658b00">stream</span>().<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">groupingBy</span>(IdentifyResultStatistics::getEventType));
</span></span><span style="display:flex;"><span>        FastDateFormat finalSdf = sdf;
</span></span><span style="display:flex;"><span>        typeCollect.<span style="color:#658b00">forEach</span>((type, list) -&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// æœ‰åœ¨8ç¨®è»Šå…§ä¸”æœ‰ç´€éŒ„çš„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            <span style="color:#8b008b;font-weight:bold">if</span> (carTypeMap.<span style="color:#658b00">containsKey</span>(type) &amp;&amp; list.<span style="color:#658b00">size</span>() &gt; <span style="color:#b452cd">0</span>) {
</span></span><span style="display:flex;"><span>                List&lt;Integer&gt; yAxis = <span style="color:#8b008b;font-weight:bold">new</span> ArrayList&lt;&gt;();
</span></span><span style="display:flex;"><span>                <span style="color:#228b22">// ä¾ç…§æ™‚é–“æ‰¾åˆ°å°æ‡‰çš„Xï¼Œå¡«å……Y
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>                <span style="color:#8b008b;font-weight:bold">for</span> (<span style="color:#00688b;font-weight:bold">int</span> i = <span style="color:#b452cd">0</span>; i &lt; xAxis.<span style="color:#658b00">size</span>(); i++) {
</span></span><span style="display:flex;"><span>                    <span style="color:#228b22">// å¦‚æœdbç´€éŒ„çš„æ™‚é–“ç­‰æ–¼æ™‚é–“ç¯€é»
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>                    <span style="color:#00688b;font-weight:bold">int</span> finalI = i;
</span></span><span style="display:flex;"><span>                    Optional&lt;IdentifyResultStatistics&gt; first = list.<span style="color:#658b00">stream</span>().<span style="color:#658b00">filter</span>(e -&gt; finalSdf.<span style="color:#658b00">format</span>(e.<span style="color:#658b00">getStatsTime</span>()).<span style="color:#658b00">equals</span>(xAxis.<span style="color:#658b00">get</span>(finalI))).<span style="color:#658b00">findFirst</span>();
</span></span><span style="display:flex;"><span>                    <span style="color:#8b008b;font-weight:bold">if</span> (first.<span style="color:#658b00">isPresent</span>()) {
</span></span><span style="display:flex;"><span>                        yAxis.<span style="color:#658b00">add</span>(Math.<span style="color:#658b00">toIntExact</span>(first.<span style="color:#658b00">get</span>().<span style="color:#658b00">getValue</span>()));
</span></span><span style="display:flex;"><span>                    } <span style="color:#8b008b;font-weight:bold">else</span> { <span style="color:#228b22">// å‡è¨­æ²’æœ‰è©²æ™‚é–“ç¯€é»çš„ç´€éŒ„ï¼Œå‰‡è£œ0
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>                        yAxis.<span style="color:#658b00">add</span>(<span style="color:#b452cd">0</span>);
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#228b22">// ç¸½å’Œ
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>                <span style="color:#00688b;font-weight:bold">int</span> total = yAxis.<span style="color:#658b00">stream</span>().<span style="color:#658b00">mapToInt</span>(val -&gt; val).<span style="color:#658b00">sum</span>();
</span></span><span style="display:flex;"><span>                <span style="color:#228b22">// å¯«å…¥
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>                EChartsVo build = EChartsVo.<span style="color:#658b00">builder</span>()
</span></span><span style="display:flex;"><span>                        .<span style="color:#658b00">id</span>(Long.<span style="color:#658b00">parseLong</span>(type))
</span></span><span style="display:flex;"><span>                        .<span style="color:#658b00">name</span>(carTypeMap.<span style="color:#658b00">get</span>(type))
</span></span><span style="display:flex;"><span>                        .<span style="color:#658b00">total</span>(total)
</span></span><span style="display:flex;"><span>                        .<span style="color:#658b00">xAxis</span>(xAxis)
</span></span><span style="display:flex;"><span>                        .<span style="color:#658b00">yAxis</span>(yAxis)
</span></span><span style="display:flex;"><span>                        .<span style="color:#658b00">build</span>();
</span></span><span style="display:flex;"><span>                result.<span style="color:#658b00">add</span>(build);
</span></span><span style="display:flex;"><span>                <span style="color:#228b22">// æœ‰ç´€éŒ„çš„å°±ç§»å‡ºæ¸…å–®
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>                carTypeMap.<span style="color:#658b00">remove</span>(type);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// å¦‚æœé‚„å‰©æŸç¨®è»Šå®Œå…¨æ²’æœ‰ç´€éŒ„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">if</span> (carTypeMap.<span style="color:#658b00">size</span>() &gt; <span style="color:#b452cd">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// å…¨éƒ¨è£œ0
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            List&lt;Integer&gt; zero = <span style="color:#8b008b;font-weight:bold">new</span> ArrayList&lt;&gt;();
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">for</span> (<span style="color:#00688b;font-weight:bold">int</span> i = <span style="color:#b452cd">0</span>; i &lt; xAxis.<span style="color:#658b00">size</span>(); i++) {
</span></span><span style="display:flex;"><span>                zero.<span style="color:#658b00">add</span>(<span style="color:#b452cd">0</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            carTypeMap.<span style="color:#658b00">forEach</span>((k, v) -&gt; {
</span></span><span style="display:flex;"><span>                EChartsVo build = EChartsVo.<span style="color:#658b00">builder</span>()
</span></span><span style="display:flex;"><span>                        .<span style="color:#658b00">id</span>(Long.<span style="color:#658b00">parseLong</span>(k))
</span></span><span style="display:flex;"><span>                        .<span style="color:#658b00">name</span>(v)
</span></span><span style="display:flex;"><span>                        .<span style="color:#658b00">total</span>(<span style="color:#b452cd">0</span>)
</span></span><span style="display:flex;"><span>                        .<span style="color:#658b00">xAxis</span>(xAxis)
</span></span><span style="display:flex;"><span>                        .<span style="color:#658b00">yAxis</span>(zero)
</span></span><span style="display:flex;"><span>                        .<span style="color:#658b00">build</span>();
</span></span><span style="display:flex;"><span>                result.<span style="color:#658b00">add</span>(build);
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// æ’åº
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        result.<span style="color:#658b00">sort</span>(Comparator.<span style="color:#658b00">comparing</span>(EChartsVo::getName));
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> result;
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><ul>
<li>å¦‚æœè³‡æ–™é‡å¾ˆå¤§ï¼Œmapä¹Ÿå¯ä»¥è½‰parallelStreamè™•ç†ï¼Œä¾‹å¦‚é€™æ¨£(ä½†è¦æ³¨æ„è™•ç†è³‡æ–™æœ‰æ²’æœ‰å…ˆå¾Œé †åºçš„å•é¡Œ)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>        <span style="color:#228b22">// ä¾ç…§å€åŸŸidåˆ†é–‹
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        Map&lt;Long, List&lt;ParkingStats&gt;&gt; pIdMap = allStats.<span style="color:#658b00">stream</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">groupingBy</span>(ParkingStats::getPId));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        pIdMap.<span style="color:#658b00">entrySet</span>().<span style="color:#658b00">parallelStream</span>().<span style="color:#658b00">forEach</span>(entry-&gt;{
</span></span><span style="display:flex;"><span>            List&lt;ParkingStats&gt; statsList = pIdMap.<span style="color:#658b00">get</span>(entry.<span style="color:#658b00">getKey</span>()); <span style="color:#228b22">// entry.getKey() = key = pId
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            <span style="color:#228b22">// å¹³å‡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            <span style="color:#00688b;font-weight:bold">double</span> average = statsList.<span style="color:#658b00">stream</span>().<span style="color:#658b00">mapToInt</span>(ParkingStats::getCarIn).<span style="color:#658b00">average</span>().<span style="color:#658b00">orElse</span>(<span style="color:#b452cd">0.0</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// ç´€éŒ„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            ParkingStats build = ParkingStats.<span style="color:#658b00">builder</span>()
</span></span><span style="display:flex;"><span>                    .<span style="color:#658b00">pId</span>(entry.<span style="color:#658b00">getKey</span>())
</span></span><span style="display:flex;"><span>                    .<span style="color:#658b00">counterType</span>(<span style="color:#b452cd">8</span>)
</span></span><span style="display:flex;"><span>                    .<span style="color:#658b00">carIn</span>((<span style="color:#00688b;font-weight:bold">int</span>) average)
</span></span><span style="display:flex;"><span>                    .<span style="color:#658b00">carOut</span>(<span style="color:#b452cd">0</span>)
</span></span><span style="display:flex;"><span>                    .<span style="color:#658b00">startTime</span>(yesterday)
</span></span><span style="display:flex;"><span>                    .<span style="color:#658b00">statsType</span>(<span style="color:#b452cd">3</span>)
</span></span><span style="display:flex;"><span>                    .<span style="color:#658b00">createTime</span>(now)
</span></span><span style="display:flex;"><span>                    .<span style="color:#658b00">updateTime</span>(now).<span style="color:#658b00">build</span>();
</span></span><span style="display:flex;"><span>            parkingStatsRepo.<span style="color:#658b00">save</span>(build);
</span></span><span style="display:flex;"><span>            log.<span style="color:#658b00">info</span>(<span style="color:#cd5555">&#34;åœè»Šå ´ id={} åœ¨ {} çš„å…¨æ—¥å¹³å‡ä½¿ç”¨é‡å·²å»ºç«‹&#34;</span>, entry.<span style="color:#658b00">getKey</span>(), yesterday);
</span></span><span style="display:flex;"><span>            });
</span></span></code></pre></div><ul>
<li>ç¸½ä¹‹æˆ‘æŠŠ&quot;å¦‚æœè©²æ™‚é–“ç¯€é»æ²’æœ‰å°æ‡‰çš„æ•¸æ“šï¼Œå°±è£œ0&quot;é€™ä»¶äº‹åœ¨å¾Œç«¯åšäº†ï¼Œæœ€å¾Œå¾Œç«¯å‚³å‡ºå»çš„æ±è¥¿</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Data</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@Builder</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">EChartsVo</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * ä»£ç¢¼
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> Long id;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * åç¨± 20å­—
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> String name;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * Xè»¸(æ™‚é–“)&#34;yyyy-MM-dd&#34;;
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@JsonProperty</span>(value = <span style="color:#cd5555">&#34;xAxis&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> List&lt;String&gt; xAxis;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * Yè»¸(æ•¸å€¼)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@JsonProperty</span>(value = <span style="color:#cd5555">&#34;yAxis&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> List&lt;Integer&gt; yAxis;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * ç¸½æ•¸
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> Integer total;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * Yè»¸å¹³å‡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> Double average;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>å»åˆ°å‰ç«¯ï¼Œå…¶å¯¦é€™é‚Šä¹Ÿå¯«äº†ä¸€å€‹è£œ0çš„é©—è­‰ï¼Œæ‰€ä»¥èªªå…¶å¯¦åšåœ¨å“ªéƒ½å¯ä»¥</li>
<li>setOptionæ˜¯æ•´å€‹è¡¨æ ¼çš„è¨­å®šï¼Œè€Œå¤šçµ„è³‡æ–™å°±æ˜¯æ”¾åœ¨seriesDataé€™å€‹æ•¸çµ„è£¡ï¼Œé€™é‚Šåšçš„äº‹å…¶å¯¦å°±æ˜¯æŠŠå¾Œç«¯å‚³ä¾†çš„EChartsVoçš„Listéæ­·(ä¸€å€‹EChartsVoå°±æ˜¯ä¸€æ¢ç·š)ï¼Œå¡åˆ°seriesDataä¸­ï¼Œç•«å‡ºè¡¨æ ¼</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * å»ºç«‹Echartsåœ–è¡¨
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * @param timeNodeArray æ™‚é–“åˆ»åº¦æ•¸çµ„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * @param myCharts åœ–è¡¨çš„div domç‰©ä»¶ï¼Œä¾‹å¦‚: const myCharts = echarts.init(document.getElementById(&#39;myCharts&#39;));
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * @param chartsData è³‡æ–™ï¼Œä¾‹å¦‚: [{&#34;name&#34;:&#34;æ°´ä½1&#34;,&#34;xAxis&#34;:[&#34;2019-11-14 00:15:00&#34;,&#34;2019-11-14 00:30:00&#34;],&#34;yAxis&#34;:[&#34;0.94&#34;,&#34;0.94&#34;]},{&#34;name&#34;:&#34;æ°´ä½2&#34;...}]
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> buildChart(timeNodeArray, myCharts, chartsData) {
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">//let today = start; // æ—¥æœŸï¼ˆå’Œæ•¸æ“šæ—¥æœŸå°æ‡‰ï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">let</span> seriesData = []; <span style="color:#228b22">// serieså…§å®¹
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">let</span> contentData = [];
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// é…ç½®xè»¸
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">for</span> (<span style="color:#8b008b;font-weight:bold">let</span> xDateElement <span style="color:#8b008b;font-weight:bold">of</span> timeNodeArray) {
</span></span><span style="display:flex;"><span>        contentData.push([xDateElement, <span style="color:#cd5555">&#34;&#34;</span>]); <span style="color:#228b22">// é è¨­æ™‚é–“ç¯€é»è©²æœ‰çš„æ•¸æ“š(ç”¨ç©ºæ•¸æ“šé€²è¡Œå¡«å……)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">if</span> (!<span style="color:#658b00">Array</span>.isArray(chartsData) || chartsData.length == <span style="color:#b452cd">0</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">let</span> minNum = <span style="color:#b452cd">0</span>,
</span></span><span style="display:flex;"><span>        maxNum = <span style="color:#b452cd">0</span>; <span style="color:#228b22">// è¨˜éŒ„æœ€å¤§æœ€å°å€¼ï¼Œæ˜¯åœ–æ¨™ä¸ç•™å¤ªå¤šç©ºç™½
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#228b22">// ä¿®æ”¹æ ¼å¼ç‚º[&#39;æ™‚é–“&#39;,&#39;å€¼&#39;]
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    chartsData.map((res, index) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// é…ç½®ç•¶å‰æ•¸æ“šçš„Yè»¸
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">let</span> nowContentData = JSON.parse(JSON.stringify(contentData));
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">if</span> (res.yAxis.length &gt; <span style="color:#b452cd">0</span>) {
</span></span><span style="display:flex;"><span>            res.yAxis.map((yRes, yIndex) =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#228b22">// ç²å–æœ€å¤§æœ€å°å€¼ï¼ˆæ ¹æ“šæ¥­å‹™éœ€è¦ï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>                <span style="color:#8b008b;font-weight:bold">if</span> (index == <span style="color:#b452cd">0</span> &amp;&amp; yIndex == <span style="color:#b452cd">0</span>) {
</span></span><span style="display:flex;"><span>                    minNum = yRes;
</span></span><span style="display:flex;"><span>                    maxNum = yRes;
</span></span><span style="display:flex;"><span>                } <span style="color:#8b008b;font-weight:bold">else</span> <span style="color:#8b008b;font-weight:bold">if</span> (yRes &lt; minNum) {
</span></span><span style="display:flex;"><span>                    minNum = yRes;
</span></span><span style="display:flex;"><span>                } <span style="color:#8b008b;font-weight:bold">else</span> <span style="color:#8b008b;font-weight:bold">if</span> (yRes &gt; maxNum) {
</span></span><span style="display:flex;"><span>                    maxNum = yRes;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#228b22">// æ­¤è™•ç›´æ¥pushè³¦å€¼æœƒé€ æˆæ•´é»æœ‰ä¸€å€‹ç©ºæ•¸æ“šå’Œä¸€å€‹æœ‰æ•¸æ“šçš„æƒ…æ³ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–·æ•´é»
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>                <span style="color:#228b22">// å¦‚æœç›´æ¥æ›´æ”¹æ•´é»çš„æ•¸æ“šæœƒç”¢ç”Ÿé›™å€æ•¸é‡çš„æŠ˜ç·šï¼Œæ‰€ä»¥éœ€è¦å…ˆåˆªé™¤ç‚ºç©ºå€¼çš„æ•´é»æ•¸æ“šï¼Œåœ¨é€²è¡Œæ•´é»çš„è³¦å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>                <span style="color:#8b008b;font-weight:bold">let</span> arrIndex = nowContentData.findIndex(item =&gt; item[<span style="color:#b452cd">0</span>] == res.xAxis[yIndex]);
</span></span><span style="display:flex;"><span>                <span style="color:#8b008b;font-weight:bold">if</span> (arrIndex != -<span style="color:#b452cd">1</span>) {
</span></span><span style="display:flex;"><span>                    nowContentData.splice(arrIndex, <span style="color:#b452cd">1</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                nowContentData.push([res.xAxis[yIndex], yRes]); <span style="color:#228b22">// å¡«å……å‚³éä¾†çš„xè»¸å’Œyè»¸
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        seriesData.push({
</span></span><span style="display:flex;"><span>            name: res.name,
</span></span><span style="display:flex;"><span>            type: <span style="color:#cd5555">&#34;line&#34;</span>,
</span></span><span style="display:flex;"><span>            smooth: <span style="color:#8b008b;font-weight:bold">true</span>,
</span></span><span style="display:flex;"><span>            symbol: <span style="color:#cd5555">&#34;circle&#34;</span>,
</span></span><span style="display:flex;"><span>            symbolSize: <span style="color:#b452cd">7</span>, <span style="color:#228b22">// ç·šä¸Šçš„å°åœ“é»
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            lineStyle: {
</span></span><span style="display:flex;"><span>                normal: {
</span></span><span style="display:flex;"><span>                    width: <span style="color:#b452cd">1</span> <span style="color:#228b22">// ç·šæ®µç²—ç´°
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>                }
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            emphasis: {
</span></span><span style="display:flex;"><span>                focus: <span style="color:#cd5555">&#39;series&#39;</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// æ­¤è™•å®šç¾©å°åœ“é»çš„å¤§å°å’Œé¡è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            itemStyle: {
</span></span><span style="display:flex;"><span>                normal: {
</span></span><span style="display:flex;"><span>                    <span style="color:#228b22">// color: `rgb(${res.color})`,
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>                    borderColor: <span style="color:#cd5555">&#34;#fff&#34;</span>,
</span></span><span style="display:flex;"><span>                    borderWidth: <span style="color:#b452cd">1</span>
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            data: nowContentData,
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">//ä½¿ç”¨åŸºæº–ç·šï¼Œè¨˜å¾—å¼•å…¥require(&#39;echarts/lib/component/markLine&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            markLine: {
</span></span><span style="display:flex;"><span>                silent: <span style="color:#8b008b;font-weight:bold">true</span>,
</span></span><span style="display:flex;"><span>                symbol: <span style="color:#cd5555">&#34;none&#34;</span>,
</span></span><span style="display:flex;"><span>                label: {
</span></span><span style="display:flex;"><span>                    position: <span style="color:#cd5555">&#34;middle&#34;</span>,
</span></span><span style="display:flex;"><span>                    formatter: <span style="color:#cd5555">&#34;{b}&#34;</span>
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>                data: []
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    myCharts.setOption({
</span></span><span style="display:flex;"><span>        title: {
</span></span><span style="display:flex;"><span>            text: <span style="color:#cd5555">&#39;æ™‚æ®µåˆ†æ&#39;</span>,
</span></span><span style="display:flex;"><span>            padding: <span style="color:#b452cd">10</span>,
</span></span><span style="display:flex;"><span>            left: <span style="color:#cd5555">&#39;center&#39;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        legend: {
</span></span><span style="display:flex;"><span>            orient: <span style="color:#cd5555">&#39;horizontal&#39;</span>,
</span></span><span style="display:flex;"><span>            top: <span style="color:#cd5555">&#39;8%&#39;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        backgroundColor: <span style="color:#cd5555">&#39;#fbfbfb&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// tooltipçš„é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        tooltip: {
</span></span><span style="display:flex;"><span>            trigger: <span style="color:#cd5555">&#34;axis&#34;</span>,
</span></span><span style="display:flex;"><span>            axisPointer: {
</span></span><span style="display:flex;"><span>                lineStyle: {
</span></span><span style="display:flex;"><span>                    color: <span style="color:#cd5555">&#34;#ddd&#34;</span>
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            formatter: val =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#8b008b;font-weight:bold">let</span> text = <span style="color:#cd5555">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                text = <span style="color:#cd5555">`</span><span style="color:#cd5555">${</span>val[<span style="color:#b452cd">0</span>].data[<span style="color:#b452cd">0</span>]<span style="color:#cd5555">}</span><span style="color:#cd5555">&lt;br/&gt;`</span>; <span style="color:#228b22">// æ™‚é–“
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>                val.map((res, index) =&gt; {
</span></span><span style="display:flex;"><span>                    <span style="color:#228b22">// åå­—
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>                    text += <span style="color:#cd5555">`</span><span style="color:#cd5555">${</span>res.marker<span style="color:#cd5555">}${</span>res.seriesName<span style="color:#cd5555">}</span><span style="color:#cd5555">ï¼š`</span>;
</span></span><span style="display:flex;"><span>                    <span style="color:#228b22">// å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>                    <span style="color:#8b008b;font-weight:bold">if</span> (res.data[<span style="color:#b452cd">1</span>] === <span style="color:#b452cd">0</span> || res.data[<span style="color:#b452cd">1</span>]) {
</span></span><span style="display:flex;"><span>                        text += <span style="color:#cd5555">`</span><span style="color:#cd5555">${</span>res.data[<span style="color:#b452cd">1</span>]<span style="color:#cd5555">}</span><span style="color:#cd5555">`</span> + <span style="color:#cd5555">&#34;è¼›&#34;</span>;
</span></span><span style="display:flex;"><span>                    } <span style="color:#8b008b;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                        text += <span style="color:#cd5555">&#34;æš«ç„¡æ•¸æ“š&#34;</span>;
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                    text += <span style="color:#cd5555">&#34;&lt;br/&gt;&#34;</span>;
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>                <span style="color:#8b008b;font-weight:bold">return</span> text;
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            textStyle: {
</span></span><span style="display:flex;"><span>                align: <span style="color:#cd5555">&#34;left&#34;</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// åœ–è¡¨ä½ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        grid: {
</span></span><span style="display:flex;"><span>            top: <span style="color:#cd5555">&#34;15%&#34;</span>,
</span></span><span style="display:flex;"><span>            left: <span style="color:#cd5555">&#34;2%&#34;</span>,
</span></span><span style="display:flex;"><span>            right: <span style="color:#cd5555">&#34;5%&#34;</span>,
</span></span><span style="display:flex;"><span>            bottom: <span style="color:#cd5555">&#34;10%&#34;</span>,
</span></span><span style="display:flex;"><span>            containLabel: <span style="color:#8b008b;font-weight:bold">true</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        xAxis: {
</span></span><span style="display:flex;"><span>            type: <span style="color:#cd5555">&#34;time&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// xè»¸å–®ä½
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            name: <span style="color:#cd5555">&#34;æ™‚é–“&#34;</span>,
</span></span><span style="display:flex;"><span>            nameTextStyle: {
</span></span><span style="display:flex;"><span>                color: <span style="color:#cd5555">&#34;#999&#34;</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// xè»¸0å€¼æ™‚æ©«ç·šçš„é¡è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            axisLine: {
</span></span><span style="display:flex;"><span>                lineStyle: {
</span></span><span style="display:flex;"><span>                    color: <span style="color:#cd5555">&#34;#999&#34;</span>
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// xè»¸åæ¨™æ–‡å­—çš„é¡è‰²é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            axisLabel: {
</span></span><span style="display:flex;"><span>                show: <span style="color:#8b008b;font-weight:bold">true</span>,
</span></span><span style="display:flex;"><span>                textStyle: {
</span></span><span style="display:flex;"><span>                    color: <span style="color:#cd5555">&#39;#000&#39;</span>
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>                interval: <span style="color:#b452cd">3600</span>,
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            data: timeNodeArray,
</span></span><span style="display:flex;"><span>            min: timeNodeArray[<span style="color:#b452cd">0</span>], <span style="color:#228b22">//`${today}` // åˆå§‹ç‚º0é»
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        },
</span></span><span style="display:flex;"><span>        yAxis: {
</span></span><span style="display:flex;"><span>            splitNumber: <span style="color:#b452cd">10</span>, <span style="color:#228b22">// yè»¸é–“éš”æ•¸é‡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            type: <span style="color:#cd5555">&#34;value&#34;</span>,
</span></span><span style="display:flex;"><span>            name: <span style="color:#cd5555">&#34;è»Šç¨®(è¼›)&#34;</span>, <span style="color:#228b22">// å–®ä½
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            nameTextStyle: {
</span></span><span style="display:flex;"><span>                color: <span style="color:#cd5555">&#34;#999&#34;</span> <span style="color:#228b22">// å–®ä½é¡è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// yè»¸0å€¼æ™‚çš„ç¸±ç·šé¡è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            axisLine: {
</span></span><span style="display:flex;"><span>                lineStyle: {
</span></span><span style="display:flex;"><span>                    color: <span style="color:#cd5555">&#34;#999&#34;</span>
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// yåæ¨™æ–‡å­—çš„é¡è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            axisLabel: {
</span></span><span style="display:flex;"><span>                formatter: <span style="color:#8b008b;font-weight:bold">function</span>(value, index) {
</span></span><span style="display:flex;"><span>                    <span style="color:#8b008b;font-weight:bold">return</span> value.toFixed(<span style="color:#b452cd">0</span>) + <span style="color:#cd5555">&#34; è¼›&#34;</span>;
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>                show: <span style="color:#8b008b;font-weight:bold">true</span>,
</span></span><span style="display:flex;"><span>                textStyle: {
</span></span><span style="display:flex;"><span>                    color: <span style="color:#cd5555">&#34;#000&#34;</span>
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// å¹³è¡Œæ–¼xè»¸çš„æ©«å‘ç·šé¡è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            splitLine: {
</span></span><span style="display:flex;"><span>                show: <span style="color:#8b008b;font-weight:bold">true</span>,
</span></span><span style="display:flex;"><span>                lineStyle: {
</span></span><span style="display:flex;"><span>                    color: <span style="color:#cd5555">&#34;#999&#34;</span>
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// ç¸®æ”¾
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        dataZoom: [{
</span></span><span style="display:flex;"><span>            type: <span style="color:#cd5555">&#39;slider&#39;</span>,
</span></span><span style="display:flex;"><span>            start: <span style="color:#b452cd">0</span>,
</span></span><span style="display:flex;"><span>            end: <span style="color:#b452cd">100</span>,
</span></span><span style="display:flex;"><span>            minValueSpan: <span style="color:#b452cd">3600</span> * <span style="color:#b452cd">3</span> * <span style="color:#b452cd">1000</span>,
</span></span><span style="display:flex;"><span>        }, {
</span></span><span style="display:flex;"><span>            type: <span style="color:#cd5555">&#39;inside&#39;</span>,
</span></span><span style="display:flex;"><span>            start: <span style="color:#b452cd">0</span>,
</span></span><span style="display:flex;"><span>            end: <span style="color:#b452cd">100</span>,
</span></span><span style="display:flex;"><span>            minValueSpan: <span style="color:#b452cd">3600</span> * <span style="color:#b452cd">3</span> * <span style="color:#b452cd">1000</span>,
</span></span><span style="display:flex;"><span>        }],
</span></span><span style="display:flex;"><span>        series: seriesData,
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>è£œå……ä¸€ä¸‹é€™äº›å…ƒä»¶è¨­å®šçš„åç¨±(å®˜ç¶²å°±æœ‰ï¼Œä¸éæœ€å¸¸ç”¨çš„æ‡‰è©²å°±æ˜¯é€™äº›)</li>
</ul>
<p><img src="Snipaste_2022-05-27_12-04-02.png" alt="Snipaste_2022-05-27_12-04-02"></p>
<ul>
<li>tooltipå°±æ˜¯æµ®å‹•æç¤ºï¼Œè€Œèšç„¦æ·¡åŒ–æ•ˆæœæ˜¯é€™å€‹(æˆ‘è¦ºå¾—é€™å€‹åœ¨ç·šå¾ˆå¤šæ¢æ™‚å¾ˆé‡è¦)</li>
</ul>
<pre tabindex="0"><code>            emphasis: {
                focus: &#39;series&#39;
            },
</code></pre><p><img src="Snipaste_2022-05-27_12-04-32.png" alt="Snipaste_2022-05-27_12-04-32"></p>
<ul>
<li>åœ“é¤…åœ–</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * åœ“é¤…åœ–
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> buildPieChart(myCharts, chartsData) {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">let</span> legend = [];
</span></span><span style="display:flex;"><span>    chartsData.map((res, index) =&gt; {
</span></span><span style="display:flex;"><span>        legend.push(res.name);
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">let</span> option = {
</span></span><span style="display:flex;"><span>        title: {
</span></span><span style="display:flex;"><span>            text: <span style="color:#cd5555">&#39;è»Šç¨®ä½”æ¯”&#39;</span>,
</span></span><span style="display:flex;"><span>            padding: <span style="color:#b452cd">10</span>,
</span></span><span style="display:flex;"><span>            left: <span style="color:#cd5555">&#39;center&#39;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        tooltip: { <span style="color:#228b22">// æç¤º
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            trigger: <span style="color:#cd5555">&#34;item&#34;</span>, <span style="color:#228b22">// è§¸ç™¼æ–¹å¼
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            formatter: <span style="color:#cd5555">&#34;{b}: {c}è¼›&lt;br/&gt;({d}%)&#34;</span> <span style="color:#228b22">// æç¤ºçš„æ ¼å¼
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        },
</span></span><span style="display:flex;"><span>        legend: { <span style="color:#228b22">// åœ–ä¾‹
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            bottom: <span style="color:#b452cd">10</span>,
</span></span><span style="display:flex;"><span>            left: <span style="color:#cd5555">&#39;center&#39;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        backgroundColor: <span style="color:#cd5555">&#39;#fbfbfb&#39;</span>,
</span></span><span style="display:flex;"><span>        series: [{
</span></span><span style="display:flex;"><span>            name: <span style="color:#cd5555">&#34;è»Šç¨®ä½”æ¯”&#34;</span>,
</span></span><span style="display:flex;"><span>            type: <span style="color:#cd5555">&#34;pie&#34;</span>, <span style="color:#228b22">// åœ–æ¨™çš„é¡å‹
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            radius: <span style="color:#cd5555">&#34;60%&#34;</span>, <span style="color:#228b22">// é¤…åœ–çš„ç¯„åœ
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            avoidLabelOverlap: <span style="color:#8b008b;font-weight:bold">false</span>,
</span></span><span style="display:flex;"><span>            label: {
</span></span><span style="display:flex;"><span>                normal: {
</span></span><span style="display:flex;"><span>                    formatter: <span style="color:#cd5555">&#39;{b}\n{d}%&#39;</span>,
</span></span><span style="display:flex;"><span>                    textStyle: {
</span></span><span style="display:flex;"><span>                        fontWeight: <span style="color:#cd5555">&#39;normal&#39;</span>,
</span></span><span style="display:flex;"><span>                        fontSize: <span style="color:#b452cd">15</span>
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>                emphasis: {
</span></span><span style="display:flex;"><span>                    show: <span style="color:#8b008b;font-weight:bold">true</span>,
</span></span><span style="display:flex;"><span>                    textStyle: {
</span></span><span style="display:flex;"><span>                        fontWeight: <span style="color:#cd5555">&#34;bold&#34;</span>
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            labelLine: {
</span></span><span style="display:flex;"><span>                length: <span style="color:#b452cd">1</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            data: chartsData,
</span></span><span style="display:flex;"><span>        }]
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    myCharts.setOption(option);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">ä¸Šæ¬¡ä¿®æ”¹æ–¼ 2022-04-25</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://yoziming.github.io/post/220510-spring-war-yaml/">
			ä¸‹ä¸€ç¯‡<br>Spring Bootæ‰“åŒ…waråŒ…å’Œè¨­å®šæª”
                </a>
                
                
                
                <a class="older-posts" href="https://yoziming.github.io/post/220420-table-to-excel/">
			ä¸Šä¸€ç¯‡<br>å¿«é€Ÿå°‡å‰ç«¯çš„Html table(å«CSS)åŒ¯å‡ºæˆExcel
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                








<div id="waline"></div>
<script>
    new Waline({
        el: '#waline',
        path: location.pathname,
        serverURL: "https://waline-pn38gfwbz-yoziming.vercel.app/" ,
		lang: 'en-US',
		visitor: true,
		meta: ['nick', 'mail'],
    });
    </script>



            </div>
        </div>
    </div>


                    </div>
            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
ç§»æ¤è‡ª <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Yoziming
	
</div>
            </div>
    
    <script src="/js/journal.js"></script>
    </body>
</html>
