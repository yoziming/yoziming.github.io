<!DOCTYPE html>
<html><head>
<meta name="google-site-verification" content="XrwF-xUZWSGJVBBm7jM8vqemVqx--zo5Tb9d-Vr7BCc" />
<title>ä¿å­˜skuã€spuï¼Œfeigné ç¨‹èª¿ç”¨</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="SpringBootå¾®æœå‹™é …ç›®ç­†è¨˜-06">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="ä¿å­˜skuã€spuï¼Œfeigné ç¨‹èª¿ç”¨" />
<meta property="og:description" content="SpringBootå¾®æœå‹™é …ç›®ç­†è¨˜-06" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yoziming.github.io/post/220123-gulimall-06-feign/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-01-23T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-01-23T00:00:00+00:00" /><meta property="og:site_name" content="My Blog" />






<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ä¿å­˜skuã€spuï¼Œfeigné ç¨‹èª¿ç”¨"/>
<meta name="twitter:description" content="SpringBootå¾®æœå‹™é …ç›®ç­†è¨˜-06"/>







<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">


  




<link rel="icon" href="https://yoziming.github.io/images/favicon.png">



<link rel="stylesheet" href="https://yoziming.github.io/scss/journal.min.3f72a5fc8f5b5dd732a4b476aced0eece2156958d9d414316494ddb10593ddf7.css" integrity="sha256-P3Kl/I9bXdcypLR2rO0O7OIVaVjZ1BQxZJTdsQWT3fc=" media="screen">



<link rel="stylesheet" href="https://yoziming.github.io/scss/dark-mode.min.f7c2efa7183435a6bd1842f91c541481c7a5137b5991629a870f24e4a516ad4b.css" integrity="sha256-98Lvpxg0Naa9GEL5HFQUgcelE3tZkWKahw8k5KUWrUs=" media="screen">


<script src="/vendor/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>






  <script src="/js/toc.js"></script>











<script src="//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js"></script>





</head>
<body>
    	<div id="app"><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://yoziming.github.io/">
    
        <div class="nav-title">
            æŸšå­èŒ¶å®¤
        </div>
        
        <div class="nav-subtitle">
            ç´€éŒ„è‡ªå­¸å¤§å°äº‹
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/">
                é¦–é ğŸ 
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                ç³»åˆ—æ–‡ğŸ“–
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                æ¨™ç±¤ğŸ·ï¸
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about-me">
                é—œæ–¼æˆ‘ğŸ£
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
ç§»æ¤è‡ª <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Yoziming
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®éŒ„ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e9%8a%b7%e5%94%ae%e5%b1%ac%e6%80%a7" onclick="onNavClick(`#éŠ·å”®å±¬æ€§-nav`)" id="éŠ·å”®å±¬æ€§-nav">
									éŠ·å”®å±¬æ€§
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%86%e7%b5%84%e9%97%9c%e8%81%af" onclick="onNavClick(`#åˆ†çµ„é—œè¯-nav`)" id="åˆ†çµ„é—œè¯-nav">
									åˆ†çµ„é—œè¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%a7%bb%e9%99%a4" onclick="onNavClick(`#ç§»é™¤-nav`)" id="ç§»é™¤-nav">
									ç§»é™¤
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%96%b0%e5%bb%ba%e9%97%9c%e8%81%af" onclick="onNavClick(`#æ–°å»ºé—œè¯-nav`)" id="æ–°å»ºé—œè¯-nav">
									æ–°å»ºé—œè¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%bf%9d%e5%ad%98" onclick="onNavClick(`#ä¿å­˜-nav`)" id="ä¿å­˜-nav">
									ä¿å­˜
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%88%aa%e9%99%a4%e5%b1%ac%e6%80%a7%e6%99%82%e5%88%aa%e9%99%a4%e9%97%9c%e8%81%af" onclick="onNavClick(`#åˆªé™¤å±¬æ€§æ™‚åˆªé™¤é—œè¯-nav`)" id="åˆªé™¤å±¬æ€§æ™‚åˆªé™¤é—œè¯-nav">
									åˆªé™¤å±¬æ€§æ™‚åˆªé™¤é—œè¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%96%b0%e5%a2%9e%e5%95%86%e5%93%81%e9%a0%81%e9%9d%a2" onclick="onNavClick(`#æ–°å¢å•†å“é é¢-nav`)" id="æ–°å¢å•†å“é é¢-nav">
									æ–°å¢å•†å“é é¢
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%a0%b9%e6%93%9a%e5%88%86%e9%a1%9e%e8%bf%94%e5%9b%9e%e9%97%9c%e8%81%af%e7%9a%84%e5%93%81%e7%89%8c" onclick="onNavClick(`#æ ¹æ“šåˆ†é¡è¿”å›é—œè¯çš„å“ç‰Œ-nav`)" id="æ ¹æ“šåˆ†é¡è¿”å›é—œè¯çš„å“ç‰Œ-nav">
									æ ¹æ“šåˆ†é¡è¿”å›é—œè¯çš„å“ç‰Œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%8d%b2%e5%8f%96%e8%a6%8f%e6%a0%bc%e5%8f%83%e6%95%b8" onclick="onNavClick(`#ç²å–è¦æ ¼åƒæ•¸-nav`)" id="ç²å–è¦æ ¼åƒæ•¸-nav">
									ç²å–è¦æ ¼åƒæ•¸
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%bf%9d%e5%ad%98%e5%95%86%e5%93%81" onclick="onNavClick(`#ä¿å­˜å•†å“-nav`)" id="ä¿å­˜å•†å“-nav">
									ä¿å­˜å•†å“
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%be%9ejson%e7%94%9f%e6%88%90pojo" onclick="onNavClick(`#å¾jsonç”Ÿæˆpojo-nav`)" id="å¾jsonç”Ÿæˆpojo-nav">
									å¾JSONç”ŸæˆPOJO
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%96%8b%e5%a7%8b%e4%bf%9d%e5%ad%98" onclick="onNavClick(`#é–‹å§‹ä¿å­˜-nav`)" id="é–‹å§‹ä¿å­˜-nav">
									é–‹å§‹ä¿å­˜
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%81%a0%e7%a8%8b%e8%aa%bf%e7%94%a8feign" onclick="onNavClick(`#é ç¨‹èª¿ç”¨feign-nav`)" id="é ç¨‹èª¿ç”¨feign-nav">
									é ç¨‹èª¿ç”¨feign
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#to%e9%a1%9e" onclick="onNavClick(`#toé¡-nav`)" id="toé¡-nav">
									Toé¡
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e7%9f%a5%e8%ad%98%e9%bb%9e" onclick="onNavClick(`#çŸ¥è­˜é»-nav`)" id="çŸ¥è­˜é»-nav">
									çŸ¥è­˜é»
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#debug%e5%b0%8f%e6%8a%80%e5%b7%a7" onclick="onNavClick(`#debugå°æŠ€å·§-nav`)" id="debugå°æŠ€å·§-nav">
									Debugå°æŠ€å·§
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/">
                    é¦–é ğŸ 
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    ç³»åˆ—æ–‡ğŸ“–
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    æ¨™ç±¤ğŸ·ï¸
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about-me">
                    é—œæ–¼æˆ‘ğŸ£
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®éŒ„ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e9%8a%b7%e5%94%ae%e5%b1%ac%e6%80%a7" onclick="onNavClick(`#éŠ·å”®å±¬æ€§-nav`)" id="éŠ·å”®å±¬æ€§-nav">
									éŠ·å”®å±¬æ€§
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%86%e7%b5%84%e9%97%9c%e8%81%af" onclick="onNavClick(`#åˆ†çµ„é—œè¯-nav`)" id="åˆ†çµ„é—œè¯-nav">
									åˆ†çµ„é—œè¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%a7%bb%e9%99%a4" onclick="onNavClick(`#ç§»é™¤-nav`)" id="ç§»é™¤-nav">
									ç§»é™¤
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%96%b0%e5%bb%ba%e9%97%9c%e8%81%af" onclick="onNavClick(`#æ–°å»ºé—œè¯-nav`)" id="æ–°å»ºé—œè¯-nav">
									æ–°å»ºé—œè¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%bf%9d%e5%ad%98" onclick="onNavClick(`#ä¿å­˜-nav`)" id="ä¿å­˜-nav">
									ä¿å­˜
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%88%aa%e9%99%a4%e5%b1%ac%e6%80%a7%e6%99%82%e5%88%aa%e9%99%a4%e9%97%9c%e8%81%af" onclick="onNavClick(`#åˆªé™¤å±¬æ€§æ™‚åˆªé™¤é—œè¯-nav`)" id="åˆªé™¤å±¬æ€§æ™‚åˆªé™¤é—œè¯-nav">
									åˆªé™¤å±¬æ€§æ™‚åˆªé™¤é—œè¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%96%b0%e5%a2%9e%e5%95%86%e5%93%81%e9%a0%81%e9%9d%a2" onclick="onNavClick(`#æ–°å¢å•†å“é é¢-nav`)" id="æ–°å¢å•†å“é é¢-nav">
									æ–°å¢å•†å“é é¢
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%a0%b9%e6%93%9a%e5%88%86%e9%a1%9e%e8%bf%94%e5%9b%9e%e9%97%9c%e8%81%af%e7%9a%84%e5%93%81%e7%89%8c" onclick="onNavClick(`#æ ¹æ“šåˆ†é¡è¿”å›é—œè¯çš„å“ç‰Œ-nav`)" id="æ ¹æ“šåˆ†é¡è¿”å›é—œè¯çš„å“ç‰Œ-nav">
									æ ¹æ“šåˆ†é¡è¿”å›é—œè¯çš„å“ç‰Œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%8d%b2%e5%8f%96%e8%a6%8f%e6%a0%bc%e5%8f%83%e6%95%b8" onclick="onNavClick(`#ç²å–è¦æ ¼åƒæ•¸-nav`)" id="ç²å–è¦æ ¼åƒæ•¸-nav">
									ç²å–è¦æ ¼åƒæ•¸
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%bf%9d%e5%ad%98%e5%95%86%e5%93%81" onclick="onNavClick(`#ä¿å­˜å•†å“-nav`)" id="ä¿å­˜å•†å“-nav">
									ä¿å­˜å•†å“
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%be%9ejson%e7%94%9f%e6%88%90pojo" onclick="onNavClick(`#å¾jsonç”Ÿæˆpojo-nav`)" id="å¾jsonç”Ÿæˆpojo-nav">
									å¾JSONç”ŸæˆPOJO
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%96%8b%e5%a7%8b%e4%bf%9d%e5%ad%98" onclick="onNavClick(`#é–‹å§‹ä¿å­˜-nav`)" id="é–‹å§‹ä¿å­˜-nav">
									é–‹å§‹ä¿å­˜
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%81%a0%e7%a8%8b%e8%aa%bf%e7%94%a8feign" onclick="onNavClick(`#é ç¨‹èª¿ç”¨feign-nav`)" id="é ç¨‹èª¿ç”¨feign-nav">
									é ç¨‹èª¿ç”¨feign
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#to%e9%a1%9e" onclick="onNavClick(`#toé¡-nav`)" id="toé¡-nav">
									Toé¡
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e7%9f%a5%e8%ad%98%e9%bb%9e" onclick="onNavClick(`#çŸ¥è­˜é»-nav`)" id="çŸ¥è­˜é»-nav">
									çŸ¥è­˜é»
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#debug%e5%b0%8f%e6%8a%80%e5%b7%a7" onclick="onNavClick(`#debugå°æŠ€å·§-nav`)" id="debugå°æŠ€å·§-nav">
									Debugå°æŠ€å·§
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://yoziming.github.io/">
            æŸšå­èŒ¶å®¤
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://yoziming.github.io/">
        <div class="single-column-header-title">æŸšå­èŒ¶å®¤</div>
        
        <div class="single-column-header-subtitle">ç´€éŒ„è‡ªå­¸å¤§å°äº‹</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://yoziming.github.io/images/gulimall.png')"
                    
                
            >
                <div class="post-title">
                    ä¿å­˜skuã€spuï¼Œfeigné ç¨‹èª¿ç”¨
                    
                    <div class="post-subtitle">
                        SpringBootå¾®æœå‹™é …ç›®ç­†è¨˜-06
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2022-01-23 00:00
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/java%E5%BE%AE%E6%9C%8D%E5%8B%99%E5%95%86%E5%9F%8E%E9%A0%85%E7%9B%AE">Javaå¾®æœå‹™å•†åŸé …ç›®</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/java">java</a>
                                &nbsp;
                            
                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h2 id="éŠ·å”®å±¬æ€§">éŠ·å”®å±¬æ€§</h2>
<ul>
<li>AttrController.java
<ul>
<li>ç²å–çš„APIè·Ÿå…ˆå‰å¹¾ä¹ä¸€æ¨£ï¼Œæ‰€ä»¥æ”¹é€ ä¹‹å‰çš„<code>queryBasePageCatelogId</code>ï¼Œé †ä¾¿æ›åå­—</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * è¦æ ¼åƒæ•¸åˆ—è¡¨
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@GetMapping</span>(<span style="color:#cd5555">&#34;/{attrType}/list/{catelogId}&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#228b22">//@RequiresPermissions(&#34;product:attr:list&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> R <span style="color:#008b45">baseAttrList</span>(<span style="color:#707a7c">@RequestParam</span> Map&lt;String, Object&gt; params,
</span></span><span style="display:flex;"><span>                      <span style="color:#707a7c">@PathVariable</span>(<span style="color:#cd5555">&#34;catelogId&#34;</span>) Long catelogId,
</span></span><span style="display:flex;"><span>                      <span style="color:#707a7c">@PathVariable</span>(<span style="color:#cd5555">&#34;attrType&#34;</span>) String attrType
</span></span><span style="display:flex;"><span>) {
</span></span><span style="display:flex;"><span>    PageUtils page = attrService.<span style="color:#658b00">queryBaseAttrPage</span>(params, catelogId, attrType);
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> R.<span style="color:#658b00">ok</span>().<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;page&#34;</span>, page);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>AttrServiceImpl.java</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> PageUtils <span style="color:#008b45">queryBaseAttrPage</span>(Map&lt;String, Object&gt; params, Long catelogId, String attrType) {
</span></span><span style="display:flex;"><span>    QueryWrapper&lt;AttrEntity&gt; qw = <span style="color:#8b008b;font-weight:bold">new</span> QueryWrapper&lt;&gt;();
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// åˆ¤æ–·æ˜¯è¦éŠ·å”®é‚„æ˜¯åŸºæœ¬å±¬æ€§ï¼Œ1=åŸºæœ¬ï¼Œ0=éŠ·å”®
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    qw.<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;attr_type&#34;</span>, <span style="color:#cd5555">&#34;base&#34;</span>.<span style="color:#658b00">equalsIgnoreCase</span>(attrType) ? 1 : 0);
</span></span></code></pre></div><ul>
<li>é †ä¾¿ä¿®æ”¹ä¿å­˜æ–¹æ³•</li>
</ul>
<p><img src="image-20220115135346367.png" alt="image-20220115135346367"></p>
<ul>
<li>ç‚ºäº†ä¸ç•™æŠ€è¡“å‚µ(åªæœ‰è‡ªå·±çŸ¥é“çš„ç¥ç§˜ä»£è™Ÿ)ï¼Œæ–°å¢ä¸€å€‹æšèˆ‰é¡ä¾†è¡¨ç¤º</li>
</ul>
<p><img src="image-20220115135826032.png" alt="image-20220115135826032"></p>
<ul>
<li>æŠŠå‰›å‰›ç”¨çš„1ã€0éƒ½æ›æˆ<code>ProductConstant.ATTR_TYPE_BASE.getCode()</code></li>
<li>æŸ¥è©¢ã€ä¿®æ”¹çš„æ–¹æ³•ä¹Ÿéƒ½åˆ¤æ–·ä¸€ä¸‹æ˜¯åŸºæœ¬å±¬æ€§æ‰å¾€ä¸‹åš</li>
</ul>
<h2 id="åˆ†çµ„é—œè¯">åˆ†çµ„é—œè¯</h2>
<ul>
<li>æ¥å£API:</li>
</ul>
<p><img src="image-20220115203918492.png" alt="image-20220115203918492"></p>
<p><img src="image-20220115210834640.png" alt="image-20220115210834640"></p>
<ul>
<li>æ²’æœ‰å¤šçš„å±¬æ€§ï¼Œå¯ä»¥ç›´æ¥ç”¨AttrEntityä½œç‚ºDATAè¿”å›</li>
<li>AttrGroupController.java
<ul>
<li>æ³¨æ„èª¿ç”¨çš„æ˜¯<code>attrService</code></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * æ ¹æ“šåˆ†çµ„IDæŸ¥æ‰¾é—œè¯
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> *
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * @param attrgroupId
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * @return
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@GetMapping</span>(<span style="color:#cd5555">&#34;/{attrgroupId}/attr/relation&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> R <span style="color:#008b45">attrRelation</span>(<span style="color:#707a7c">@PathVariable</span>(<span style="color:#cd5555">&#34;attrgroupId&#34;</span>) Long attrgroupId) {
</span></span><span style="display:flex;"><span>    List&lt;AttrEntity&gt; entities = attrService.<span style="color:#658b00">getAttrRelation</span>(attrgroupId);
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> R.<span style="color:#658b00">ok</span>().<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;data&#34;</span>, entities);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>AttrServiceImpl.java</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> List&lt;AttrEntity&gt; <span style="color:#008b45">getAttrRelation</span>(Long attrgroupId) {
</span></span><span style="display:flex;"><span>    List&lt;AttrAttrgroupRelationEntity&gt; relationEntities =
</span></span><span style="display:flex;"><span>            relationDao.<span style="color:#658b00">selectList</span>(<span style="color:#8b008b;font-weight:bold">new</span> QueryWrapper&lt;AttrAttrgroupRelationEntity&gt;().<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;attr_group_id&#34;</span>,
</span></span><span style="display:flex;"><span>                    attrgroupId));
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æ”¶é›†å‡ºattrId
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    List&lt;Long&gt; longList =
</span></span><span style="display:flex;"><span>            relationEntities.<span style="color:#658b00">stream</span>().<span style="color:#658b00">map</span>(AttrAttrgroupRelationEntity::getAttrId).<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">toList</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">if</span> (longList == <span style="color:#8b008b;font-weight:bold">null</span> || longList.<span style="color:#658b00">size</span>() == 0) {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">listByIds</span>(longList);
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h3 id="ç§»é™¤">ç§»é™¤</h3>
<blockquote>
<p>å°±å‰›å‰›ä¸Šé¢åœ–ï¼Œé»é–‹é—œé€£æ—é‚Šçš„ç§»é™¤</p>
</blockquote>
<ul>
<li>API:</li>
</ul>
<p><img src="image-20220115211206307.png" alt="image-20220115211206307"></p>
<ul>
<li>æ¥­å‹™ä¸Šç‚ºäº†ä¿æŒå‰å¾Œç«¯æºé€šå°‘ã€æ•´é½Šï¼Œé€ ä¸€å€‹Voä¾†æ¥</li>
</ul>
<p><img src="image-20220115211534509.png" alt="image-20220115211534509"></p>
<ul>
<li>AttrGroupController.java
<ul>
<li>åƒæ•¸ç”±æ–¼æ˜¯è‡ªè¨‚çš„çš„é¡ï¼Œåœ¨HTTPç”¨JSONå‚³éï¼Œåˆ‡è¨˜è¦åŠ @RequestBody</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * åˆ é™¤
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@PostMapping</span>(<span style="color:#cd5555">&#34;/attr/relation/delete&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> R <span style="color:#008b45">delete</span>(<span style="color:#707a7c">@RequestBody</span> AttrGroupRelationVo[] vos) {
</span></span><span style="display:flex;"><span>    attrService.<span style="color:#658b00">deleteRelation</span>(vos);
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> R.<span style="color:#658b00">ok</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>AttrServiceImpl.java
<ul>
<li>ç”±æ–¼è¦æ‰¹é‡åˆªé™¤ï¼Œé€ ä¸€å€‹è‡ªè¨‚çš„SQL <code>batchDelete</code>æ–¹æ³•</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">deleteRelation</span>(AttrGroupRelationVo[] vos) {
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// ç„¡æƒ…å°‡VOå†è½‰å›ä¾† å“­R
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    List&lt;AttrAttrgroupRelationEntity&gt; entities = Arrays.<span style="color:#658b00">stream</span>(vos).<span style="color:#658b00">map</span>(item -&gt; {
</span></span><span style="display:flex;"><span>        AttrAttrgroupRelationEntity relationEntity = <span style="color:#8b008b;font-weight:bold">new</span> AttrAttrgroupRelationEntity();
</span></span><span style="display:flex;"><span>        BeanUtils.<span style="color:#658b00">copyProperties</span>(item, relationEntity);
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> relationEntity;
</span></span><span style="display:flex;"><span>    }).<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">toList</span>());
</span></span><span style="display:flex;"><span>    relationDao.<span style="color:#658b00">batchDelete</span>(entities);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>AttrAttrgroupRelationDao.java
<ul>
<li>è«å¿˜è¨˜åŠ @Param(&ldquo;entities&rdquo;)</li>
</ul>
</li>
</ul>
<p><img src="image-20220115213800121.png" alt="image-20220115213800121"></p>
<ul>
<li>AttrAttrgroupRelationDao.xml
<ul>
<li>å‹•æ…‹SQLçš„å¯«æ³•ï¼Œforeachå¾ªç’°ï¼Œé–“éš”ç¬¦è™Ÿ<code>&quot; OR &quot;</code>å‰å¾Œè¨˜å¾—éƒ½è¦ç©ºæ ¼</li>
<li>å¯«xmlçš„SQLç‰¹åˆ¥å°å¿ƒæ‹šéŒ¯èª¤</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;delete</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;batchDelete&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    DELETE
</span></span><span style="display:flex;"><span>    FROM pms_attr_attrgroup_relation WHERE
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;foreach</span> <span style="color:#658b00">collection=</span><span style="color:#cd5555">&#34;entities&#34;</span> <span style="color:#658b00">item=</span><span style="color:#cd5555">&#34;item&#34;</span> <span style="color:#658b00">separator=</span><span style="color:#cd5555">&#34; OR &#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        attr_id = #{item.attrId} AND attr_group_id = #{item.attrGroupId}
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;/foreach&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;/delete&gt;</span>
</span></span></code></pre></div><h3 id="æ–°å»ºé—œè¯">æ–°å»ºé—œè¯</h3>
<blockquote>
<p>è¶…ç´šé›£é»ï¼Œå¥—å¤ªå¤šå±¤äº†è¦æƒ³å¾ˆä¹…</p>
</blockquote>
<ul>
<li>å…ˆåšæ–°å»ºæ™‚è¦è·³å‡ºçš„å¯é¸é …API: <code>/product/attrgroup/{attrgroupId}/noattr/relation</code></li>
</ul>
<p><img src="image-20220115215125341.png" alt="image-20220115215125341"></p>
<ul>
<li>AttrGroupController.java</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>	<span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * æ ¹æ“šåˆ†çµ„IDæŸ¥æ‰¾ç„¡é—œè¯(æ–°å¢æ™‚é€†å‘ç¯©é¸ç”¨)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@GetMapping</span>(<span style="color:#cd5555">&#34;/{attrgroupId}/noattr/relation&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> R <span style="color:#008b45">attrNoRelation</span>(<span style="color:#707a7c">@RequestParam</span> Map&lt;String, Object&gt; params,
</span></span><span style="display:flex;"><span>                        <span style="color:#707a7c">@PathVariable</span>(<span style="color:#cd5555">&#34;attrgroupId&#34;</span>) Long attrgroupId) {
</span></span><span style="display:flex;"><span>    PageUtils page = attrService.<span style="color:#658b00">getAttrNoRelation</span>(params, attrgroupId);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> R.<span style="color:#658b00">ok</span>().<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;page&#34;</span>, page);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>AttrServiceImpl.java
<ul>
<li>é˜²ç©ºæŒ‡é‡å¯«ä¸€å †not nullï¼Œé‚„ä»¥ç‚ºåœ¨å¯«golang</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> PageUtils <span style="color:#008b45">getAttrNoRelation</span>(Map&lt;String, Object&gt; params, Long attrgroupId) {
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// åªæŸ¥è‡ªå·±æ‰€å±¬åˆ†é¡ä¸­çš„å±¬æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    AttrGroupEntity attrGroupEntity = attrGroupDao.<span style="color:#658b00">selectById</span>(attrgroupId);
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// ç²å–ç•¶å‰åˆ†é¡çš„id
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    Long catelogId = attrGroupEntity.<span style="color:#658b00">getCatelogId</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// åªé—œé€£æ²’å¼•ç”¨çš„å±¬æ€§ï¼Œé€™è£¡ç”¨æ’é™¤æ³•æŠŠå·²ç¶“è¢«é—œè¯çš„IDæ‰¾å‡ºä¾†ï¼Œé€™æ˜¯ç”¨ä¾†å­˜æ’é™¤çš„æ¸…å–®
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    List&lt;Long&gt; alreadyInGroupIdList = <span style="color:#8b008b;font-weight:bold">new</span> ArrayList&lt;&gt;();
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// å…ˆæ‰¾å‡ºç•¶å‰åˆ†é¡ä¸‹çš„å…¶ä»–åˆ†çµ„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    List&lt;AttrGroupEntity&gt; attr_groups = attrGroupDao.<span style="color:#658b00">selectList</span>(<span style="color:#8b008b;font-weight:bold">new</span> QueryWrapper&lt;AttrGroupEntity&gt;().<span style="color:#658b00">eq</span>(
</span></span><span style="display:flex;"><span>            <span style="color:#cd5555">&#34;catelog_id&#34;</span>
</span></span><span style="display:flex;"><span>            , catelogId));
</span></span><span style="display:flex;"><span>    List&lt;Long&gt; attr_group_ids =
</span></span><span style="display:flex;"><span>            attr_groups.<span style="color:#658b00">stream</span>().<span style="color:#658b00">map</span>(AttrGroupEntity::getAttrGroupId).<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">toList</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// ç¾åœ¨ç²å–åˆ°å¯èƒ½å¾ˆå¤šå€‹attr_group_idï¼Œä¸€å€‹attr_group_idåˆæœƒå°æ‡‰å¤šå€‹attr_id
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">if</span> (attr_group_ids != <span style="color:#8b008b;font-weight:bold">null</span> &amp;&amp; attr_group_ids.<span style="color:#658b00">size</span>() &gt; 0) {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// åˆ°pms_attr_attrgroup_relationï¼Œæ‹¿attr_group_idæ‰¾å‡ºå°æ‡‰çš„relationEntities
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        List&lt;AttrAttrgroupRelationEntity&gt; relationEntities =
</span></span><span style="display:flex;"><span>                relationDao.<span style="color:#658b00">selectList</span>(<span style="color:#8b008b;font-weight:bold">new</span> QueryWrapper&lt;AttrAttrgroupRelationEntity&gt;().<span style="color:#658b00">in</span>(<span style="color:#cd5555">&#34;attr_group_id&#34;</span>,
</span></span><span style="display:flex;"><span>                        attr_group_ids));
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// é€™äº›relationEntitiesæœ‰attr_group_idï¼Œè¡¨ç¤ºä»–çš„attr_idå·²ç¶“åœ¨æŸå€‹åˆ†çµ„å…§äº†
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">if</span> (relationEntities != <span style="color:#8b008b;font-weight:bold">null</span> &amp;&amp; relationEntities.<span style="color:#658b00">size</span>() &gt; 0) {
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// æŠŠå…¶ä¸­çš„IDä¸€å€‹ä¸€å€‹æ‰¾å‡ºä¾†ï¼Œé€™äº›æ˜¯è¦æ’é™¤çš„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            alreadyInGroupIdList =
</span></span><span style="display:flex;"><span>                    relationEntities.<span style="color:#658b00">stream</span>().<span style="color:#658b00">map</span>(AttrAttrgroupRelationEntity::getAttrId).<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">toList</span>());
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// å¯ä»¥é–‹æŸ¥äº†
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    QueryWrapper&lt;AttrEntity&gt; queryWrapper = <span style="color:#8b008b;font-weight:bold">new</span> QueryWrapper&lt;AttrEntity&gt;();
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// å¦‚æœæœ‰è¦æ’é™¤çš„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">if</span> (alreadyInGroupIdList != <span style="color:#8b008b;font-weight:bold">null</span> &amp;&amp; alreadyInGroupIdList.<span style="color:#658b00">size</span>() &gt; 0) {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// åªæŸ¥è‡ªå·±æ‰€å±¬åˆ†é¡ä¸­çš„å±¬æ€§ï¼Œç§»é™¤æ‰è¦æ’é™¤çš„ï¼Œè€Œä¸”åªè¦åŸºæœ¬å±¬æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        queryWrapper.<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;catelog_id&#34;</span>, catelogId).<span style="color:#658b00">notIn</span>(<span style="color:#cd5555">&#34;attr_id&#34;</span>, alreadyInGroupIdList).<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;attr_type&#34;</span>,
</span></span><span style="display:flex;"><span>                ProductConstant.<span style="color:#658b00">ATTR_TYPE_BASE</span>.<span style="color:#658b00">getCode</span>());
</span></span><span style="display:flex;"><span>    } <span style="color:#8b008b;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// åªæŸ¥è‡ªå·±æ‰€å±¬åˆ†é¡ä¸­çš„å±¬æ€§ï¼Œè€Œä¸”åªè¦åŸºæœ¬å±¬æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        queryWrapper.<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;catelog_id&#34;</span>, catelogId).<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;attr_type&#34;</span>, ProductConstant.<span style="color:#658b00">ATTR_TYPE_BASE</span>.<span style="color:#658b00">getCode</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// å‰ç«¯è¦çš„æ˜¯pageï¼Œé‚„å¯èƒ½è¦æŸ¥key
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    String key = (String) params.<span style="color:#658b00">get</span>(<span style="color:#cd5555">&#34;key&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">if</span> (!StringUtils.<span style="color:#658b00">isEmpty</span>(key)) {
</span></span><span style="display:flex;"><span>        queryWrapper.<span style="color:#658b00">and</span>(qw -&gt; {
</span></span><span style="display:flex;"><span>            qw.<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;attr_id&#34;</span>, key).<span style="color:#658b00">or</span>().<span style="color:#658b00">like</span>(<span style="color:#cd5555">&#34;attr_name&#34;</span>, key);
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    IPage&lt;AttrEntity&gt; page = <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">page</span>(<span style="color:#8b008b;font-weight:bold">new</span> Query&lt;AttrEntity&gt;().<span style="color:#658b00">getPage</span>(params),
</span></span><span style="display:flex;"><span>            queryWrapper);
</span></span><span style="display:flex;"><span>    PageUtils pageUtils = <span style="color:#8b008b;font-weight:bold">new</span> PageUtils(page);
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> pageUtils;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p>ä¿®å¾©å‰ç«¯é é¢ä¸€å€‹å°bugï¼Œåœ¨attr-add-or-update.vue</p>
<ul>
<li>
<p>é¦–å…ˆä»–dataForm.attrId ? &lsquo;æ–°å¢&rsquo; : &lsquo;ä¿®æ”¹&rsquo;&ldquo;æœ¬ä¾†ç¶çš„æ˜¯.idï¼Œé¡¯ç„¶éŒ¯èª¤(å¦ä¸€å€‹ä¹Ÿæ˜¯é€™æ¨£)ï¼Œä¿®æ”¹æ™‚æ²’æœ‰æ­£ç¢ºé¡¯ç¤ºæ¨™é¡Œ</p>
</li>
<li>
<p>å¦å¤–å°±æ˜¯ä¸‹é¢é–‹é—œçš„ï¼ŒvalueTypeæ˜¯Stringé¡å‹ï¼Œçµæœç¶äº†å†’è™Ÿå°±æ€ªæ€ªçš„ï¼Œé»ä¿®æ”¹æ™‚ä¸æœƒå‹•æ…‹è·Ÿéš¨å‚³éå»çš„&quot;1&quot;æˆ–&quot;0&quot;è€Œæ”¹è®Š</p>
</li>
<li>
<p>è€Œä¸”é€™å€‹é †åºä¸å°é€£æ–‡å­—é¡è‰²éƒ½æœƒæ€ªæ€ªçš„</p>
</li>
</ul>
</li>
</ul>
<p><img src="image-20220115235612508.png" alt="image-20220115235612508"></p>
<h4 id="ä¿å­˜">ä¿å­˜</h4>
<ul>
<li>API:</li>
</ul>
<p><img src="image-20220116004605824.png" alt="image-20220116004605824"></p>
<ul>
<li>AttrGroupController.java
<ul>
<li><code>@RequestBody</code>ä¸åƒ…èƒ½è£æˆ<code>[]</code>ä¹Ÿå¯ä»¥ç›´æ¥è£åˆ°<code>List&lt;&gt;</code></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * æ–°å¢ä¿å­˜
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@RequestMapping</span>(<span style="color:#cd5555">&#34;/attr/relation&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#228b22">//@RequiresPermissions(&#34;product:attrgroup:save&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> R <span style="color:#008b45">addAttrGroupRelation</span>(<span style="color:#707a7c">@RequestBody</span> List&lt;AttrGroupRelationVo&gt; vos) {
</span></span><span style="display:flex;"><span>    relationService.<span style="color:#658b00">addAttrGroupRelation</span>(vos);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> R.<span style="color:#658b00">ok</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>AttrAttrgroupRelationServiceImpl.java</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">addAttrGroupRelation</span>(List&lt;AttrGroupRelationVo&gt; vos) {
</span></span><span style="display:flex;"><span>    List&lt;AttrAttrgroupRelationEntity&gt; collect = vos.<span style="color:#658b00">stream</span>().<span style="color:#658b00">map</span>(e -&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// ä¸€æ¨£ï¼Œè½‰å­˜
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        AttrAttrgroupRelationEntity relationEntity = <span style="color:#8b008b;font-weight:bold">new</span> AttrAttrgroupRelationEntity();
</span></span><span style="display:flex;"><span>        BeanUtils.<span style="color:#658b00">copyProperties</span>(e, relationEntity);
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> relationEntity;
</span></span><span style="display:flex;"><span>    }).<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">toList</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// èª¿ç”¨åŸç”Ÿæ‰¹é‡ä¿å­˜
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">saveBatch</span>(collect);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>ä¿®æ”¹å‰é¢queryBaseAttrPageæ–¹æ³•</li>
</ul>
<p><img src="image-20220116145735332.png" alt="image-20220116145735332"></p>
<ul>
<li>é‚„æœ‰ä¿å­˜é—œè¯é—œä¿‚çš„</li>
</ul>
<p><img src="image-20220116145858040.png" alt="image-20220116145858040"></p>
<h3 id="åˆªé™¤å±¬æ€§æ™‚åˆªé™¤é—œè¯">åˆªé™¤å±¬æ€§æ™‚åˆªé™¤é—œè¯</h3>
<ul>
<li>
<p>æœ‰å€‹æ¼æ´ï¼Œå±¬æ€§è¢«åˆªæ‰ä¹‹å¾Œpms_attr_attrgroup_relationä¸­çš„attr_idå»æ²’åˆªï¼Œé›–ç„¶ä¸æœƒå°è‡´éŒ¯èª¤ä½†æœƒè®“è¡¨ä¸­å­˜åœ¨å»¢ç‰©è³‡æ–™</p>
</li>
<li>
<p>å˜—è©¦è‡ªå·±å®Œå–„åŠŸèƒ½ï¼ŒAttrController.java</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * åˆªé™¤
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@RequestMapping</span>(<span style="color:#cd5555">&#34;/delete&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#228b22">//@RequiresPermissions(&#34;product:attr:delete&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> R <span style="color:#008b45">delete</span>(<span style="color:#707a7c">@RequestBody</span> Long[] attrIds) {
</span></span><span style="display:flex;"><span>    attrService.<span style="color:#658b00">removeAttrAndRelationByIds</span>(Arrays.<span style="color:#658b00">asList</span>(attrIds));
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> R.<span style="color:#658b00">ok</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>AttrServiceImpl.java
<ul>
<li>çµæœç¬¬ä¸€æ¬¡åšåˆä¸­äº†ç©ºæŒ‡é‡ï¼Œè¨˜ä½é€™äº›<code>xxDao.select</code>ä¸€ä½†æŸ¥äº†å°±ä¸æœƒæ˜¯nullï¼Œè€Œæ˜¯å¯èƒ½è¿”å›å…§å®¹ç‚ºç©ºçš„List</li>
<li>è¦ç”¨<strong>é•·åº¦åˆ¤æ–·</strong>ï¼Œåˆ‡è¨˜åˆ‡è¨˜</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">removeAttrAndRelationByIds</span>(List&lt;Long&gt; asList) {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">removeByIds</span>(asList);
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// é‚„è¦ç§»é™¤é—œè¯
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    List&lt;AttrAttrgroupRelationEntity&gt; entities =
</span></span><span style="display:flex;"><span>            relationDao.<span style="color:#658b00">selectList</span>(<span style="color:#8b008b;font-weight:bold">new</span> QueryWrapper&lt;AttrAttrgroupRelationEntity&gt;().<span style="color:#658b00">in</span>(<span style="color:#cd5555">&#34;attr_id&#34;</span>, asList));
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">if</span> (entities != <span style="color:#8b008b;font-weight:bold">null</span> &amp;&amp; entities.<span style="color:#658b00">size</span>() &gt; 0) {
</span></span><span style="display:flex;"><span>        relationDao.<span style="color:#658b00">batchDelete</span>(entities);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h2 id="æ–°å¢å•†å“é é¢">æ–°å¢å•†å“é é¢</h2>
<blockquote>
<p>å…ˆè™•è£¡æ–°å¢æ™‚éœ€è¦æ‰¾åˆ°è©²å“é …ç›¸é—œè³‡è¨Šçš„API</p>
</blockquote>
<p><img src="image-20220117132244175.png" alt="image-20220117132244175"></p>
<ul>
<li>æ–°å¢å•†å“éœ€è¦ç²å–æœƒå“¡ç­‰ç´šï¼Œ<code>/api/member/memberlevel/</code></li>
<li>å…ˆåˆ°æœƒå“¡æ¨¡çµ„èª¿æ•´ç¶²é—œï¼Œå¢åŠ member_routeè¦å‰‡</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#bbb">        </span>- <span style="color:#8b008b;font-weight:bold">id</span>:<span style="color:#bbb"> </span>member_route<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">          </span><span style="color:#8b008b;font-weight:bold">uri</span>:<span style="color:#bbb"> </span>lb://member<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">          </span><span style="color:#8b008b;font-weight:bold">predicates</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>- Path=/api/member/**<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">          </span><span style="color:#8b008b;font-weight:bold">filters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>- RewritePath=/api/(?&lt;segment&gt;.*),/$\{segment}<span style="color:#bbb">
</span></span></span></code></pre></div><ul>
<li>æœƒå“¡æ¨¡çµ„çš„æ“ä½œå¤§éƒ¨åˆ†æ¯”è¼ƒå–®ç´”ï¼Œå…§å»ºç”Ÿæˆçš„æš«æ™‚å¤ ç”¨</li>
<li>éš¨ä¾¿æ–°å¢å…©å€‹æœƒå“¡ç­‰ç´š</li>
</ul>
<p><img src="image-20220117142225484.png" alt="image-20220117142225484"></p>
<h3 id="æ ¹æ“šåˆ†é¡è¿”å›é—œè¯çš„å“ç‰Œ">æ ¹æ“šåˆ†é¡è¿”å›é—œè¯çš„å“ç‰Œ</h3>
<ul>
<li>API:</li>
</ul>
<p><img src="image-20220117001707359.png" alt="image-20220117001707359"></p>
<ul>
<li>è¿”å›çš„dataå¾ˆç°¡å–®ï¼Œé€ ä¸€å€‹Voç¯€çœæµé‡
<ul>
<li>BrandVo.java</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Data</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">BrandVo</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> Long brandId;
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> String brandName;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>CategoryBrandRelationController.java
<ul>
<li>Controllerç”¨ä¾†è™•ç†è«‹æ±‚ã€æª¢é©—è³‡æ–™ã€å°è£</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * æ ¹æ“šcatIdè¿”å›é—œè¯çš„å“ç‰Œ
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@GetMapping</span>(<span style="color:#cd5555">&#34;/brands/list&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> R <span style="color:#008b45">list</span>(<span style="color:#707a7c">@RequestParam</span>(<span style="color:#cd5555">&#34;catId&#34;</span>) Long catId) {
</span></span><span style="display:flex;"><span>    List&lt;BrandEntity&gt; vos = categoryBrandRelationService.<span style="color:#658b00">getBrandsByCatId</span>(catId);
</span></span><span style="display:flex;"><span>    List&lt;BrandVo&gt; list = vos.<span style="color:#658b00">stream</span>().<span style="color:#658b00">map</span>(e -&gt; {
</span></span><span style="display:flex;"><span>        BrandVo brandVo = <span style="color:#8b008b;font-weight:bold">new</span> BrandVo();
</span></span><span style="display:flex;"><span>        brandVo.<span style="color:#658b00">setBrandId</span>(e.<span style="color:#658b00">getBrandId</span>);
</span></span><span style="display:flex;"><span>        brandVo.<span style="color:#658b00">setBrandName</span>(e.<span style="color:#658b00">getBrandName</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> brandVo;
</span></span><span style="display:flex;"><span>    }).<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">toList</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> R.<span style="color:#658b00">ok</span>().<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;data&#34;</span>, list);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>CategoryBrandRelationServiceImpl.java
<ul>
<li>Serviceå±¤å¯«æ¥­å‹™é‚è¼¯ï¼Œé€™é‚Šé›–ç„¶çœ‹èµ·ä¾†ç™½ç¹åœˆé‚„å¾ªç’°æŸ¥è¡¨ï¼Œä½†å»æ˜¯ç‚ºäº†ç¶­è­·æ€§èˆ‡æ“´å±•æ€§è€ƒé‡ï¼Œå¤šå­¸ç¿’è€å¸«çš„æ€è·¯ç¸½æ˜¯å¥½çš„</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> List&lt;BrandEntity&gt; <span style="color:#008b45">getBrandsByCatId</span>(Long catId) {
</span></span><span style="display:flex;"><span>    List&lt;CategoryBrandRelationEntity&gt; relationEntities =
</span></span><span style="display:flex;"><span>            baseMapper.<span style="color:#658b00">selectList</span>(<span style="color:#8b008b;font-weight:bold">new</span> QueryWrapper&lt;CategoryBrandRelationEntity&gt;().<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;catelog_id&#34;</span>, catId));
</span></span><span style="display:flex;"><span>    List&lt;BrandEntity&gt; collect = relationEntities.<span style="color:#658b00">stream</span>().<span style="color:#658b00">map</span>(e -&gt; {
</span></span><span style="display:flex;"><span>        Long brandId = e.<span style="color:#658b00">getBrandId</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// èª¿ç”¨Serviceè€ŒéDAOï¼Œå› ç‚ºDAOæ˜¯ç”Ÿæˆçš„æœ€å¥½å¯«æ­»çš„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">return</span> brandService.<span style="color:#658b00">getById</span>(brandId);
</span></span><span style="display:flex;"><span>    }).<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">toList</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> collect;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="ç²å–è¦æ ¼åƒæ•¸">ç²å–è¦æ ¼åƒæ•¸</h3>
<ul>
<li>API:</li>
</ul>
<p><img src="image-20220117131731335.png" alt="image-20220117131731335"></p>
<ul>
<li>è¦è¿”å›çš„æ˜¯AttrGroupä¸”è£¡é¢åŒ…å«çµ„å…§çš„å±¬æ€§</li>
</ul>
<pre tabindex="0"><code>	&#34;data&#34;: [{
		&#34;attrGroupId&#34;: 1,
		&#34;attrGroupName&#34;: &#34;ä¸»ä½“&#34;,
		&#34;sort&#34;: 0,
		&#34;descript&#34;: &#34;ä¸»ä½“&#34;,
		&#34;icon&#34;: &#34;dd&#34;,
		&#34;catelogId&#34;: 225,
		&#34;attrs&#34;: [{
			&#34;attrId&#34;: 7,
			&#34;attrName&#34;: &#34;å…¥ç½‘å‹å·&#34;,
			&#34;searchType&#34;: 1,
			&#34;valueType&#34;: 0,
			&#34;icon&#34;: &#34;xxx&#34;,
			&#34;valueSelect&#34;: &#34;aaa;bb&#34;,
			&#34;attrType&#34;: 1,
			&#34;enable&#34;: 1,
			&#34;catelogId&#34;: 225,
			&#34;showDesc&#34;: 1,
			&#34;attrGroupId&#34;: null
			}, {
			...
		},
		{
		&#34;attrGroupId&#34;: 2,
		...
</code></pre><ul>
<li>é€ ä¸€å€‹VO</li>
</ul>
<p><img src="image-20220117132943244.png" alt="image-20220117132943244"></p>
<ul>
<li>AttrGroupController.java
<ul>
<li>åƒæ•¸æœ¬èº«åœ¨URLçš„<code>/~/</code>ä¸­ç”¨<code>@PathVariable</code></li>
<li>åœ¨<code>?</code>è™Ÿå¾Œé¢çš„ç”¨<code>@RequestParam</code></li>
<li>æ§åˆ¶å±¤æ–¹æ³•åå–&quot;æƒ³è¦è¿”å›çš„æ±è¥¿&rdquo;</li>
<li>æœå‹™å±¤æ–¹æ³•åå¾Œé¢å†åŠ ä¸Š&quot;å‚³å…¥çš„åƒæ•¸&quot;</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * æ–°å¢å•†å“ç²å–è¦æ ¼åƒæ•¸
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@GetMapping</span>(<span style="color:#cd5555">&#34;/{catelogId}/withattr&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> R <span style="color:#008b45">getAttrGroupWithAttrs</span>(<span style="color:#707a7c">@PathVariable</span>(<span style="color:#cd5555">&#34;catelogId&#34;</span>) Long catelogId) {
</span></span><span style="display:flex;"><span>    List&lt;AttrGroupWithAttrsVo&gt; vos = attrGroupService.<span style="color:#658b00">getAttrGroupWithAttrsByCatelogId</span>(catelogId);
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> R.<span style="color:#658b00">ok</span>().<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;data&#34;</span>, vos);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>AttrGroupServiceImpl.java</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> List&lt;AttrGroupWithAttrsVo&gt; <span style="color:#008b45">getAttrGroupWithAttrsByCatelogId</span>(Long catelogId) {
</span></span><span style="display:flex;"><span>    List&lt;AttrGroupEntity&gt; attrGroupEntities = <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">list</span>(<span style="color:#8b008b;font-weight:bold">new</span> QueryWrapper&lt;AttrGroupEntity&gt;().<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;catelog_id&#34;</span>,
</span></span><span style="display:flex;"><span>            catelogId));
</span></span><span style="display:flex;"><span>    List&lt;AttrGroupWithAttrsVo&gt; collect = attrGroupEntities.<span style="color:#658b00">stream</span>().<span style="color:#658b00">map</span>(e -&gt; {
</span></span><span style="display:flex;"><span>        AttrGroupWithAttrsVo attrGroupWithAttrsVo = <span style="color:#8b008b;font-weight:bold">new</span> AttrGroupWithAttrsVo();
</span></span><span style="display:flex;"><span>        BeanUtils.<span style="color:#658b00">copyProperties</span>(e, attrGroupWithAttrsVo);
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// ç²å–attrsï¼Œç”¨ä¹‹å‰å¯«éçš„æ–¹æ³•å¾åˆ†çµ„IDå°±èƒ½æ‰¾åˆ°
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        List&lt;AttrEntity&gt; attrEntityList = attrService.<span style="color:#658b00">getAttrRelation</span>(e.<span style="color:#658b00">getAttrGroupId</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// è£é€²VO
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        attrGroupWithAttrsVo.<span style="color:#658b00">setAttrs</span>(attrEntityList);
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> attrGroupWithAttrsVo;
</span></span><span style="display:flex;"><span>    }).<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">toList</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> collect;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>å›å‰ç«¯è£œä¸€å€‹éç©ºåˆ¤æ–·</li>
</ul>
<p><img src="image-20220117140603784.png" alt="image-20220117140603784"></p>
<ul>
<li>æˆåŠŸï¼Œè©±èªªé€™å€‹å‰ç«¯é é¢é‚„è »å±Œçš„ï¼Œå¯é¸é …æ²’æœ‰ç”šè‡³é‚„èƒ½ç¾åŠ ï¼Œé‚„å¥½æ•™æåšäº†ä¸ç„¶è‡ªå·±ä¾†è‚¯å®šåˆè¦æåŠå¤©</li>
</ul>
<p><img src="image-20220117141026751.png" alt="image-20220117141026751"></p>
<ul>
<li>å¾Œé¢å…©æ­¥éƒ½æ²’å•é¡Œï¼Œå‰ç«¯é é¢éƒ½åšå¥½äº†ï¼Œæœƒæ ¹æ“šéŠ·å”®å±¬æ€§ç®—å‡ºç¬›å¡çˆ¾ç©ï¼Œå¯ä»¥è©³ç´°é‡å°æ¯å€‹SKUåšè¨­å®š</li>
</ul>
<p><img src="image-20220117160514657.png" alt="image-20220117160514657"></p>
<ul>
<li>é»é¸ç™¼ä½ˆï¼Œæœƒç”¢ç”Ÿä¸€ä¸²å¾ˆé•·çš„JSONï¼Œæ¥ä¸‹ä¾†å°±åˆ°ä¿å­˜äº†</li>
</ul>
<h1 id="ä¿å­˜å•†å“">ä¿å­˜å•†å“</h1>
<ul>
<li>ä¿å­˜å•†å“è¦èª¿ç”¨å•†å“æ¨¡çµ„ã€æœƒå“¡æ¨¡çµ„ï¼Œä¸åƒ…è¦è·¨æ¨¡çµ„ï¼Œé‚„æ¶‰åŠéå¸¸å¤šå¼µè¡¨ï¼Œåªèƒ½ä¸€é»ä¸€é»æ‹†é–‹ä¾†åšäº†</li>
</ul>
<p><img src="image-20220117163355499.png" alt="image-20220117163355499"></p>
<h3 id="å¾jsonç”Ÿæˆpojo">å¾JSONç”ŸæˆPOJO</h3>
<blockquote>
<p>é¡¯ç„¶è‡ªå·±æ‰‹å‹•é€ VOå¤ªç´¯äº†ï¼Œæœ‰æ›´å¿«çš„æ–¹æ³•</p>
</blockquote>
<ul>
<li>API:</li>
</ul>
<p><img src="image-20220117155719059.png" alt="image-20220117155719059"></p>
<ul>
<li>æŠŠAPIæ–‡æª”ç›´æ¥ä¸Ÿçµ¦æ’ä»¶è§£æï¼Œæˆ‘ä½¿ç”¨æ’ä»¶RoboPOJOGenerator</li>
</ul>
<p><img src="image-20220117155850409.png" alt="image-20220117155850409"></p>
<ul>
<li>é¸æ¡†æ¶ã€å‘½åï¼Œè‡ªå‹•ç”ŸæˆPOJO</li>
</ul>
<p><img src="image-20220117160200428.png" alt="image-20220117160200428"></p>
<ul>
<li>ä½†æ˜¯è¦æ³¨æ„ç”Ÿæˆçš„æ•¸å­—é¡å‹ï¼Œå¦‚æœæ˜¯é‡‘éŒ¢ç­‰è¦æ±‚ç²¾åº¦çš„ï¼Œæ‰‹å‹•æ›æˆ<code>BigDecimal</code></li>
<li>ä¸¦ä¸”è³‡æ–™åº«ä¸­éƒ½æ˜¯Longé¡å‹ï¼ŒæŠŠç›¸é—œçš„Intä¹Ÿéƒ½æ›æ‰</li>
</ul>
<h3 id="é–‹å§‹ä¿å­˜">é–‹å§‹ä¿å­˜</h3>
<ul>
<li>SpuInfoController.java</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * ä¿å­˜SpuSaveVo
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@RequestMapping</span>(<span style="color:#cd5555">&#34;/save&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> R <span style="color:#008b45">save</span>(<span style="color:#707a7c">@RequestBody</span> SpuSaveVo vo) {
</span></span><span style="display:flex;"><span>    spuInfoService.<span style="color:#658b00">saveSpuInfo</span>(vo);
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> R.<span style="color:#658b00">ok</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>SpuInfoServiceImpl.java</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Transactional</span>(rollbackFor = Exception.<span style="color:#658b00">class</span>)
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">saveSpuInfo</span>(SpuSaveVo vo) {
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// 1ã€ä¿å­˜spuåŸºæœ¬ä¿¡æ¯ï¼špms_spu_info
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    SpuInfoEntity spuInfoEntity = <span style="color:#8b008b;font-weight:bold">new</span> SpuInfoEntity();
</span></span><span style="display:flex;"><span>    BeanUtils.<span style="color:#658b00">copyProperties</span>(vo, spuInfoEntity);
</span></span><span style="display:flex;"><span>    spuInfoEntity.<span style="color:#658b00">setCreateTime</span>(<span style="color:#8b008b;font-weight:bold">new</span> Date());
</span></span><span style="display:flex;"><span>    spuInfoEntity.<span style="color:#658b00">setUpdateTime</span>(<span style="color:#8b008b;font-weight:bold">new</span> Date());
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">save</span>(spuInfoEntity);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// 2ã€ä¿å­˜spuçš„æè¿°åœ–ç‰‡ï¼špms_spu_info_desc
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#228b22">// é€™å€‹decriptéŒ¯å­—ä¾†è‡ªå‰ç«¯...ç®—äº†å°±ç…§å®ƒçš„å§
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    List&lt;String&gt; decript = vo.<span style="color:#658b00">getDecript</span>();
</span></span><span style="display:flex;"><span>    SpuInfoDescEntity spuInfoDescEntity = <span style="color:#8b008b;font-weight:bold">new</span> SpuInfoDescEntity();
</span></span><span style="display:flex;"><span>    spuInfoDescEntity.<span style="color:#658b00">setSpuId</span>(spuInfoEntity.<span style="color:#658b00">getId</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// ç”¨é€—è™Ÿåˆ†éš”å¤šå¼µæè¿°åœ–ç‰‡ï¼Œæè¿°åœ–ç‰‡å°±æ˜¯è³¼ç‰©æ™‚å·¦ä¸Šé‚£äº›æ‘¸éå»æœƒæ”¾å¤§çš„å°åœ–
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#228b22">// String.joinæ–¹æ³•å¯ä»¥è‡ªå‹•éæ­·æ•¸çµ„ä¸­çš„Stringç„¶å¾Œæ‹¼æ¥æˆä¸€å€‹String
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    spuInfoDescEntity.<span style="color:#658b00">setDecript</span>(String.<span style="color:#658b00">join</span>(<span style="color:#cd5555">&#34;,&#34;</span>, decript));
</span></span><span style="display:flex;"><span>    spuInfoDescService.<span style="color:#658b00">save</span>(spuInfoDescEntity);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// 3ã€ä¿å­˜spuçš„åœ–ç‰‡é›†ï¼špms_spu_imagesï¼Œ
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#228b22">// åœ–ç‰‡é›†å°±æ˜¯å¾€ä¸‹æ‹‰ï¼Œåœ¨é é¢ä¸­å¤®å‡ºç¾çš„å¤šå¼µå•†å“å®£å‚³å¤§åœ–
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    List&lt;String&gt; images = vo.<span style="color:#658b00">getImages</span>();
</span></span><span style="display:flex;"><span>    spuImagesService.<span style="color:#658b00">saveImages</span>(spuInfoEntity.<span style="color:#658b00">getId</span>(), images);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// 4ã€ä¿å­˜spuçš„è¦æ ¼åƒæ•¸ï¼špms_product_attr_value
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    List&lt;BaseAttrsItem&gt; baseAttrs = vo.<span style="color:#658b00">getBaseAttrs</span>();
</span></span><span style="display:flex;"><span>    List&lt;ProductAttrValueEntity&gt; collect = baseAttrs.<span style="color:#658b00">stream</span>().<span style="color:#658b00">map</span>(attr -&gt; {
</span></span><span style="display:flex;"><span>        ProductAttrValueEntity valueEntity = <span style="color:#8b008b;font-weight:bold">new</span> ProductAttrValueEntity();
</span></span><span style="display:flex;"><span>        valueEntity.<span style="color:#658b00">setAttrId</span>(attr.<span style="color:#658b00">getAttrId</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// æŸ¥è©¢attrå±¬æ€§å
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        AttrEntity byId = attrService.<span style="color:#658b00">getById</span>(attr.<span style="color:#658b00">getAttrId</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        valueEntity.<span style="color:#658b00">setAttrName</span>(byId.<span style="color:#658b00">getAttrName</span>());
</span></span><span style="display:flex;"><span>        valueEntity.<span style="color:#658b00">setAttrValue</span>(attr.<span style="color:#658b00">getAttrValues</span>());
</span></span><span style="display:flex;"><span>        valueEntity.<span style="color:#658b00">setQuickShow</span>(attr.<span style="color:#658b00">getShowDesc</span>());
</span></span><span style="display:flex;"><span>        valueEntity.<span style="color:#658b00">setSpuId</span>(spuInfoEntity.<span style="color:#658b00">getId</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> valueEntity;
</span></span><span style="display:flex;"><span>    }).<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">toList</span>());
</span></span><span style="display:flex;"><span>    productAttrValueService.<span style="color:#658b00">saveBatch</span>(collect);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// 6ã€ä¿å­˜spuçš„ç©åˆ†ä¿¡æ¯ï¼šgulimall_sms---&gt;sms_spu_bounds
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    Bounds bounds = vo.<span style="color:#658b00">getBounds</span>();
</span></span><span style="display:flex;"><span>    SpuBoundsTo spuBoundsTo = <span style="color:#8b008b;font-weight:bold">new</span> SpuBoundsTo();
</span></span><span style="display:flex;"><span>    BeanUtils.<span style="color:#658b00">copyProperties</span>(bounds, spuBoundsTo);
</span></span><span style="display:flex;"><span>    spuBoundsTo.<span style="color:#658b00">setSpuId</span>(spuInfoEntity.<span style="color:#658b00">getId</span>());
</span></span><span style="display:flex;"><span>    R r = couponFeignService.<span style="color:#658b00">saveSpuBounds</span>(spuBoundsTo);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">if</span> (r.<span style="color:#658b00">getCode</span>() != 0) {
</span></span><span style="display:flex;"><span>        log.<span style="color:#658b00">error</span>(<span style="color:#cd5555">&#34;é ç¨‹ä¿å­˜spuç©åˆ†å¤±æ•—&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// 5ã€ä¿å­˜ç•¶å‰spuå°æ‡‰çš„æ‰€æœ‰skuä¿¡æ¯ï¼špms_sku_info
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    List&lt;SkusItem&gt; skus = vo.<span style="color:#658b00">getSkus</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">if</span> (skus != <span style="color:#8b008b;font-weight:bold">null</span> &amp;&amp; skus.<span style="color:#658b00">size</span>() &gt; 0) {
</span></span><span style="display:flex;"><span>        skus.<span style="color:#658b00">forEach</span>(item -&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// å‚³ä¾†çš„æ˜¯å¤šå€‹skusï¼Œéæ­·ä¸€å€‹ä¸€å€‹è™•ç†
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// 5ã€1ï¼‰ã€skuçš„åŸºæœ¬ä¿¡æ¯:pms_sku_info
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            <span style="color:#228b22">// å¦‚æœæœ‰è¨­å®šé è¨­åœ–ç‰‡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            String defaultImg = <span style="color:#cd5555">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">for</span> (ImagesItem image : item.<span style="color:#658b00">getImages</span>()) {
</span></span><span style="display:flex;"><span>                <span style="color:#8b008b;font-weight:bold">if</span> (image.<span style="color:#658b00">getDefaultImg</span>() == 1) {
</span></span><span style="display:flex;"><span>                    defaultImg = image.<span style="color:#658b00">getImgUrl</span>();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// æº–å‚™å­˜åˆ°pms_sku_infoè¡¨
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            SkuInfoEntity skuInfoEntity = <span style="color:#8b008b;font-weight:bold">new</span> SkuInfoEntity();
</span></span><span style="display:flex;"><span>            BeanUtils.<span style="color:#658b00">copyProperties</span>(item, skuInfoEntity);
</span></span><span style="display:flex;"><span>            skuInfoEntity.<span style="color:#658b00">setBrandId</span>(spuInfoEntity.<span style="color:#658b00">getBrandId</span>());
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// è³‡æ–™åº«ä¸­åˆæ˜¯é€™å€‹éŒ¯å­—CatalogIdï¼Œä¹‹å‰è¢«å‘å¥½ä¹…
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            skuInfoEntity.<span style="color:#658b00">setCatalogId</span>(spuInfoEntity.<span style="color:#658b00">getCatalogId</span>());
</span></span><span style="display:flex;"><span>            skuInfoEntity.<span style="color:#658b00">setSaleCount</span>(0L);
</span></span><span style="display:flex;"><span>            skuInfoEntity.<span style="color:#658b00">setSpuId</span>(spuInfoEntity.<span style="color:#658b00">getId</span>());
</span></span><span style="display:flex;"><span>            skuInfoEntity.<span style="color:#658b00">setSkuDefaultImg</span>(defaultImg);
</span></span><span style="display:flex;"><span>            skuInfoService.<span style="color:#658b00">save</span>(skuInfoEntity);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            Long skuId = skuInfoEntity.<span style="color:#658b00">getSkuId</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// 5ã€2ï¼‰ã€skuçš„åœ–ç‰‡ä¿¡æ¯ï¼špms_sku_imagesï¼Œé€™å¼µè¡¨ä¸­çš„æ¢ç›®æ˜¯åŸºæ–¼skuId
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            <span style="color:#228b22">// å› ç‚ºä¸€å€‹skuIdå¯ä»¥æœ‰å¤šå¼µåœ–ç‰‡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            List&lt;SkuImagesEntity&gt; imagesEntities = item.<span style="color:#658b00">getImages</span>().<span style="color:#658b00">stream</span>().<span style="color:#658b00">map</span>(img -&gt; {
</span></span><span style="display:flex;"><span>                SkuImagesEntity skuImagesEntity = <span style="color:#8b008b;font-weight:bold">new</span> SkuImagesEntity();
</span></span><span style="display:flex;"><span>                skuImagesEntity.<span style="color:#658b00">setSkuId</span>(skuId);
</span></span><span style="display:flex;"><span>                skuImagesEntity.<span style="color:#658b00">setImgUrl</span>(img.<span style="color:#658b00">getImgUrl</span>());
</span></span><span style="display:flex;"><span>                skuImagesEntity.<span style="color:#658b00">setDefaultImg</span>(img.<span style="color:#658b00">getDefaultImg</span>());
</span></span><span style="display:flex;"><span>                <span style="color:#8b008b;font-weight:bold">return</span> skuImagesEntity;
</span></span><span style="display:flex;"><span>            }).<span style="color:#658b00">filter</span>(entity -&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#228b22">// filterè¿”å›trueå°±æ˜¯éœ€è¦ç•™ä¸‹çš„ï¼Œfalseå°±æ˜¯å‰”é™¤çš„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>                <span style="color:#8b008b;font-weight:bold">return</span> !StringUtils.<span style="color:#658b00">isEmpty</span>(entity.<span style="color:#658b00">getImgUrl</span>());
</span></span><span style="display:flex;"><span>            }).<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">toList</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// æ‰¹é‡ä¿å­˜åˆ°pms_sku_images
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            skuImagesService.<span style="color:#658b00">saveBatch</span>(imagesEntities);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// 5ã€3ï¼‰ã€skuçš„éŠ·å”®å±¬æ€§ï¼špms_sku_sale_attr_value
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            <span style="color:#228b22">// å°±æ˜¯å› ç‚ºéŠ·å”®å±¬æ€§çš„ç¬›å¡çˆ¾ç©å°è‡´æœ‰å¤šå€‹skuï¼Œé€™å¼µè¡¨ä¿å­˜äº†æŸå€‹skuIdå°æ‡‰çš„å±¬æ€§å…·é«”æ˜¯å•¥å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            <span style="color:#228b22">// ä¾‹å¦‚é¡è‰²æ˜¯é»‘è‰²ï¼ŒRAMæ˜¯8G
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            List&lt;AttrItem&gt; attr = item.<span style="color:#658b00">getAttr</span>();
</span></span><span style="display:flex;"><span>            List&lt;SkuSaleAttrValueEntity&gt; skuSaleAttrValueEntities = attr.<span style="color:#658b00">stream</span>().<span style="color:#658b00">map</span>(a -&gt; {
</span></span><span style="display:flex;"><span>                SkuSaleAttrValueEntity skuSaleAttrValueEntity = <span style="color:#8b008b;font-weight:bold">new</span> SkuSaleAttrValueEntity();
</span></span><span style="display:flex;"><span>                BeanUtils.<span style="color:#658b00">copyProperties</span>(a, skuSaleAttrValueEntity);
</span></span><span style="display:flex;"><span>                skuSaleAttrValueEntity.<span style="color:#658b00">setSkuId</span>(skuId);
</span></span><span style="display:flex;"><span>                <span style="color:#8b008b;font-weight:bold">return</span> skuSaleAttrValueEntity;
</span></span><span style="display:flex;"><span>            }).<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">toList</span>());
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// æ‰¹é‡ä¿å­˜åˆ°pms_sku_sale_attr_value
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            skuSaleAttrValueService.<span style="color:#658b00">saveBatch</span>(skuSaleAttrValueEntities);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// 5ã€4ï¼‰ã€skuçš„å„ªæƒ ã€æ»¿æ¸›ç­‰ä¿¡æ¯ï¼šgulimall_sms---&gt;sms_sku_ladderã€sms_sku_full_reductionã€sms_member_price
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            SkuReductionTo skuReductionTo = <span style="color:#8b008b;font-weight:bold">new</span> SkuReductionTo();
</span></span><span style="display:flex;"><span>            BeanUtils.<span style="color:#658b00">copyProperties</span>(item, skuReductionTo);
</span></span><span style="display:flex;"><span>            skuReductionTo.<span style="color:#658b00">setSkuId</span>(skuId);
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// æœ‰è¨­å®šæ‰“æŠ˜è¦å‰‡å†ä¿å­˜ï¼Œçœå¾—è³‡æ–™åº«ä¸­å­˜ä¸€å †0
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            <span style="color:#8b008b;font-weight:bold">if</span> (skuReductionTo.<span style="color:#658b00">getFullCount</span>() &gt; 0 || skuReductionTo.<span style="color:#658b00">getFullPrice</span>().<span style="color:#658b00">compareTo</span>(BigDecimal.<span style="color:#658b00">ZERO</span>) == 1) {
</span></span><span style="display:flex;"><span>                R r1 = couponFeignService.<span style="color:#658b00">saveSkuReduction</span>(skuReductionTo);
</span></span><span style="display:flex;"><span>                <span style="color:#8b008b;font-weight:bold">if</span> (r1.<span style="color:#658b00">getCode</span>() != 0) {
</span></span><span style="display:flex;"><span>                    log.<span style="color:#658b00">error</span>(<span style="color:#cd5555">&#34;é ç¨‹ä¿å­˜skuå„ªæƒ è³‡è¨Šå¤±æ•—&#34;</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><ul>
<li>SpuImagesServiceImpl.java
<ul>
<li>saveImagesæ–¹æ³•æ˜¯æ¯å¼µåœ–ç‰‡æœ‰è‡ªå·±çš„ä¸€å€‹<code>SpuImagesEntity</code></li>
</ul>
</li>
</ul>
<p><img src="image-20220117170242122.png" alt="image-20220117170242122"></p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">saveImages</span>(Long id, List&lt;String&gt; images) {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">if</span> (images != <span style="color:#8b008b;font-weight:bold">null</span> &amp;&amp; images.<span style="color:#658b00">size</span>() &gt; 0) {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// è¦å­˜æˆå¤šæ¢ç´€éŒ„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        List&lt;SpuImagesEntity&gt; collect = images.<span style="color:#658b00">stream</span>().<span style="color:#658b00">map</span>(e -&gt; {
</span></span><span style="display:flex;"><span>            SpuImagesEntity spuImagesEntity = <span style="color:#8b008b;font-weight:bold">new</span> SpuImagesEntity();
</span></span><span style="display:flex;"><span>            spuImagesEntity.<span style="color:#658b00">setSpuId</span>(id);
</span></span><span style="display:flex;"><span>            spuImagesEntity.<span style="color:#658b00">setImgUrl</span>(e);
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">return</span> spuImagesEntity;
</span></span><span style="display:flex;"><span>        }).<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">toList</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">saveBatch</span>(collect);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="é ç¨‹èª¿ç”¨feign">é ç¨‹èª¿ç”¨feign</h3>
<p>è¤‡ç¿’ä¸€ä¸‹æ­¥é©Ÿ:</p>
<ul>
<li>å°ä¾è³´spring-cloud-starter-openfeign</li>
<li>åœ¨commonæ¨¡çµ„é€ feignåŒ…ï¼ŒåŒ…ä¸‹æ”¾æ¥å£
<ul>
<li>æ¥å£ä¸Šè¨»è§£<code>@FeignClient(&quot;è¦è¢«èª¿ç”¨çš„æœå‹™å&quot;)</code></li>
<li>æŠŠè¦è¢«èª¿ç”¨çš„æ–¹æ³•å®Œæ•´URLå¯«ä¸Š(å¯ä»¥å»ç›®æ¨™controllerç›´æ¥å·)</li>
<li>ç¯„ä¾‹: CouponFeignService.java</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@FeignClient</span>(<span style="color:#cd5555">&#34;coupon&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">CouponFeignService</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// ä¸Šå‚³å•†å“æ™‚ï¼Œä¿å­˜ é ç¨‹èª¿ç”¨çš„ç©åˆ†è¨Šæ¯
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#707a7c">@PostMapping</span>(<span style="color:#cd5555">&#34;/coupon/spubounds/save&#34;</span>)
</span></span><span style="display:flex;"><span>    R <span style="color:#008b45">saveSpuBounds</span>(<span style="color:#707a7c">@RequestBody</span> SpuBoundsTo spuBoundsTo);
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// ç›¸ç•¶æ–¼ R save(@RequestBody SpuBoundsEntity spuBounds)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#228b22">// å› ç‚ºéƒ½æ˜¯è½‰æˆJSONåœ¨å‚³é€ï¼Œè½‰å›ä¾†å±¬æ€§èƒ½å°ä¸Šå°±è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// ä¸Šå‚³å•†å“æ™‚ï¼Œä¿å­˜ é ç¨‹èª¿ç”¨çš„æ»¿æ¸›ã€æœƒå“¡å„ªæƒ è¨Šæ¯
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#707a7c">@PostMapping</span>(<span style="color:#cd5555">&#34;/coupon/skufullreduction/saveinfo&#34;</span>)
</span></span><span style="display:flex;"><span>    R <span style="color:#008b45">saveSkuReduction</span>(<span style="color:#707a7c">@RequestBody</span> SkuReductionTo skuReductionTo);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>å›åˆ°è¦èª¿ç”¨åˆ¥äººçš„å•Ÿå‹•é¡ï¼Œè¨»è§£æƒæ<code>.common.feign</code>åŒ…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@EnableFeignClients</span>(basePackages = <span style="color:#cd5555">&#34;yozi.mall.common.feign&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">ProductApplication</span> {
</span></span></code></pre></div><h4 id="toé¡">Toé¡</h4>
<blockquote>
<p>Transfer Object</p>
</blockquote>
<ul>
<li>é€šå¸¸æ”¾åœ¨commonæ¨¡çµ„ä¸‹</li>
<li>ç”¨æ–¼æœå‹™é–“å‚³éç‰©ä»¶ï¼Œä¾‹å¦‚: SkuReductionTo.java</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Data</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">SkuReductionTo</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> Long skuId;
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æ‰“å¹¾æŠ˜
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">private</span> BigDecimal discount;
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> Integer priceStatus;
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> BigDecimal fullPrice;
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> BigDecimal reducePrice;
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> Integer countStatus;
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æ»¿å¹¾ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">private</span> Integer fullCount;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> List&lt;MemberPriceItem&gt; memberPrice;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>å…¶å¯¦feignæ˜¯è½‰æˆJSONåœ¨å‚³é€ï¼Œè½‰å›ä¾†å±¬æ€§èƒ½å°ä¸Šå°±è¡Œ</li>
<li>ä½†æ˜¯è¦æ³¨æ„JSONè½‰åŒ–çš„è¦å‰‡ï¼Œæœ‰æ™‚å€™ä¸åŒä¾è³´æä¾›çš„JSONç·¨ç¢¼æœ‰ç´°å°å·®ç•°å¯èƒ½å°±æœƒé€ æˆBUG</li>
<li>é€™é‚Šç¸½å…±é ç¨‹èª¿ç”¨äº†2å€‹æœå‹™ï¼Œç¬¬ä¸€å€‹spuç©åˆ†æ²’å•¥ç‰¹åˆ¥çš„ï¼Œç›´æ¥çŒçµ¦ç”Ÿæˆçš„saveæ–¹æ³•å°±å¥½</li>
<li>ç¬¬äºŒå€‹skuçš„æ»¿æ¸›ã€æœƒå“¡å„ªæƒ å°±å¾ˆå‘äº†ï¼Œå› ç‚ºToä¸­çš„å±¬æ€§èˆ‡ç›®æ¨™åœ°è¦ä¿å­˜çš„Entityæœ‰äº›å°ä¸ä¸Šï¼Œæ–¼æ˜¯æ‰è¦è‡ªå‰µsaveInfoæ–¹æ³•</li>
<li>SkuFullReductionServiceImpl.java
<ul>
<li>å–„ç”¨å¿«é€Ÿç”¢ç”Ÿsetterçš„æ’ä»¶</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">saveInfo</span>(SkuReductionTo skuReductionTo) {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// ä¿å­˜éšæ¢¯å„ªæƒ 
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">if</span> (skuReductionTo.<span style="color:#658b00">getFullCount</span>() &gt; 0) {
</span></span><span style="display:flex;"><span>            SkuLadderEntity skuLadderEntity = <span style="color:#8b008b;font-weight:bold">new</span> SkuLadderEntity();
</span></span><span style="display:flex;"><span>            skuLadderEntity.<span style="color:#658b00">setSkuId</span>(skuReductionTo.<span style="color:#658b00">getSkuId</span>());
</span></span><span style="display:flex;"><span>            skuLadderEntity.<span style="color:#658b00">setFullCount</span>(skuReductionTo.<span style="color:#658b00">getFullCount</span>());
</span></span><span style="display:flex;"><span>            skuLadderEntity.<span style="color:#658b00">setDiscount</span>(skuReductionTo.<span style="color:#658b00">getDiscount</span>());
</span></span><span style="display:flex;"><span>            skuLadderEntity.<span style="color:#658b00">setAddOther</span>(skuReductionTo.<span style="color:#658b00">getCountStatus</span>());
</span></span><span style="display:flex;"><span>            skuLadderService.<span style="color:#658b00">save</span>(skuLadderEntity);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// ä¿å­˜æ»¿æ¸›å„ªæƒ 
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">if</span> (skuReductionTo.<span style="color:#658b00">getFullPrice</span>().<span style="color:#658b00">compareTo</span>(BigDecimal.<span style="color:#658b00">ZERO</span>) &gt; 0) {
</span></span><span style="display:flex;"><span>            SkuFullReductionEntity fullReductionEntity = <span style="color:#8b008b;font-weight:bold">new</span> SkuFullReductionEntity();
</span></span><span style="display:flex;"><span>            fullReductionEntity.<span style="color:#658b00">setSkuId</span>(skuReductionTo.<span style="color:#658b00">getSkuId</span>());
</span></span><span style="display:flex;"><span>            fullReductionEntity.<span style="color:#658b00">setFullPrice</span>(skuReductionTo.<span style="color:#658b00">getFullPrice</span>());
</span></span><span style="display:flex;"><span>            fullReductionEntity.<span style="color:#658b00">setReducePrice</span>(skuReductionTo.<span style="color:#658b00">getReducePrice</span>());
</span></span><span style="display:flex;"><span>            fullReductionEntity.<span style="color:#658b00">setAddOther</span>(skuReductionTo.<span style="color:#658b00">getCountStatus</span>());
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">save</span>(fullReductionEntity);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// ä¿å­˜æœƒå“¡å„ªæƒ 
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        List&lt;MemberPriceEntity&gt; collect = skuReductionTo.<span style="color:#658b00">getMemberPrice</span>().<span style="color:#658b00">stream</span>().<span style="color:#658b00">map</span>(e -&gt; {
</span></span><span style="display:flex;"><span>            MemberPriceEntity memberPriceEntity = <span style="color:#8b008b;font-weight:bold">new</span> MemberPriceEntity();
</span></span><span style="display:flex;"><span>            memberPriceEntity.<span style="color:#658b00">setSkuId</span>(skuReductionTo.<span style="color:#658b00">getSkuId</span>());
</span></span><span style="display:flex;"><span>            memberPriceEntity.<span style="color:#658b00">setMemberLevelId</span>(e.<span style="color:#658b00">getId</span>());
</span></span><span style="display:flex;"><span>            memberPriceEntity.<span style="color:#658b00">setMemberLevelName</span>(e.<span style="color:#658b00">getName</span>());
</span></span><span style="display:flex;"><span>            memberPriceEntity.<span style="color:#658b00">setMemberPrice</span>(e.<span style="color:#658b00">getPrice</span>());
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// é è¨­å¯ç–ŠåŠ æœƒå“¡å„ªæƒ 
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            memberPriceEntity.<span style="color:#658b00">setAddOther</span>(1);
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">return</span> memberPriceEntity;
</span></span><span style="display:flex;"><span>        }).<span style="color:#658b00">filter</span>(e -&gt; e.<span style="color:#658b00">getMemberPrice</span>().<span style="color:#658b00">compareTo</span>(BigDecimal.<span style="color:#658b00">ZERO</span>) &gt; 0).<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">toList</span>());
</span></span><span style="display:flex;"><span>        memberPriceService.<span style="color:#658b00">saveBatch</span>(collect);
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h3 id="çŸ¥è­˜é»">çŸ¥è­˜é»</h3>
<ul>
<li>
<p>String.joinéæ­·æ•¸çµ„ä¸­çš„Stringï¼Œæ‹¼æ¥æˆä¸€å€‹é•·çš„String</p>
</li>
<li>
<p>æ‰‹å‹•è¨­å®šidçš„å±¬æ€§ï¼Œéè‡ªå¢è¦åŠ è¨»è§£(mybatisPlusé è¨­æœƒè‡ªå¢)</p>
</li>
</ul>
<p><img src="image-20220117213214251.png" alt="image-20220117213214251"></p>
<ul>
<li>åœ¨æµä¸­ä½¿ç”¨éæ¿¾å™¨</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>.<span style="color:#658b00">filter</span>(entity -&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// filterè¿”å›trueå°±æ˜¯éœ€è¦ç•™ä¸‹çš„ï¼Œfalseå°±æ˜¯å‰”é™¤çš„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">return</span> !StringUtils.<span style="color:#658b00">isEmpty</span>(entity.<span style="color:#658b00">getImgUrl</span>());
</span></span></code></pre></div><ul>
<li>BigDecimalçš„æ¯”è¼ƒèˆ‡åˆ¤æ–·
<ul>
<li>A.compareTo(B)ï¼Œè¿”å›1è¡¨ç¤ºAæ¯”Bå¤§ï¼Œè¿”å›0è¡¨ç¤ºç›¸ç­‰ï¼Œè¿”å›-1è¡¨ç¤ºAæ¯”Bå°</li>
<li>åˆ¤æ–·BigDecimal xxxæ˜¯å¦&gt; 0 :</li>
<li>å¹¹å°é˜¿==1ä¸å°± &gt; 0ï¼Œç›´æ¥ç”¨&gt;0é‚„æ¯”è¼ƒå¥½è®€</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>xxx.<span style="color:#658b00">compareTo</span>(BigDecimal.<span style="color:#658b00">ZERO</span>) == 1 æˆ– &gt; 0 
</span></span></code></pre></div><h2 id="debugå°æŠ€å·§">Debugå°æŠ€å·§</h2>
<ul>
<li>å¿«é€Ÿå°å‡ºHTTPè«‹æ±‚åˆ°postman</li>
</ul>
<p><img src="image-20220117215243371.png" alt="image-20220117215243371"></p>
<ul>
<li>ç¸®æ¸›F12ä¸éœ€è¦é¡¯ç¤ºçš„å€å¡Š</li>
</ul>
<p><img src="image-20220118162128763.png" alt="image-20220118162128763"></p>
<ul>
<li>è®“mybatis-plusè¼¸å‡ºlogåˆ°æ§åˆ¶å°ï¼Œapplication.properties</li>
</ul>
<pre tabindex="0"><code>mybatis-plus.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl
</code></pre><ul>
<li>Compoundæ‰¹æ¬¡å•Ÿå‹•æœå‹™</li>
</ul>
<p><img src="image-20220117212630739.png" alt="image-20220117212630739"></p>
<ul>
<li>-Xmxè¨­å®šæœ€å¤§å ç”¨è¨˜æ†¶é«”</li>
</ul>
<p><img src="image-20220117212736437.png" alt="image-20220117212736437"></p>
<ul>
<li>è¨­ç½®æ–·é»
<ul>
<li>è¦æŸ¥çœ‹çš„ç‰©ä»¶ç›´æ¥é»ç°å­—å¯ä»¥å±•é–‹è©³ç´°</li>
</ul>
</li>
</ul>
<p><img src="image-20220117220041272.png" alt="image-20220117220041272"></p>
<ul>
<li>ä½¿ç”¨F8ä¸‹ä¸€æ­¥ï¼Œæˆ–è¨­å¥½ä¸‹ä¸€å€‹æ–·é»ç›´æ¥æŒ‰å·¦ä¸‹çš„å¿«é€²(F9)</li>
</ul>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">ä¸Šæ¬¡ä¿®æ”¹æ–¼ 2022-01-23</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://yoziming.github.io/post/220123-array-list-polymorphism/">
			ä¸‹ä¸€ç¯‡<br>arrayã€listå¤šå‹èˆ‡BaseMapperä¹‹è¬
                </a>
                
                
                
                <a class="older-posts" href="https://yoziming.github.io/post/220122-java-try-finally-return/">
			ä¸Šä¸€ç¯‡<br>Javaä¸­finallyèˆ‡returnçš„é †åº
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                








<div id="waline"></div>
<script>
    new Waline({
        el: '#waline',
        path: location.pathname,
        serverURL: "https://waline-pn38gfwbz-yoziming.vercel.app/" ,
		lang: 'en-US',
		visitor: true,
		meta: ['nick', 'mail'],
    });
    </script>



            </div>
        </div>
    </div>


                    </div>
            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
ç§»æ¤è‡ª <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Yoziming
	
</div>
            </div>
    
    <script src="/js/journal.js"></script>
    </body>
</html>
