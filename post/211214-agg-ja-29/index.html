<!DOCTYPE html>
<html><head>
<meta name="google-site-verification" content="XrwF-xUZWSGJVBBm7jM8vqemVqx--zo5Tb9d-Vr7BCc" />
<title>åå°„Reflectionã€å‹•æ…‹ä»£ç†</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="å°šç¡…è°·JavaSEç­†è¨˜-29">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="åå°„Reflectionã€å‹•æ…‹ä»£ç†" />
<meta property="og:description" content="å°šç¡…è°·JavaSEç­†è¨˜-29" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yoziming.github.io/post/211214-agg-ja-29/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-12-14T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-12-14T00:00:00+00:00" /><meta property="og:site_name" content="My Blog" />






<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="åå°„Reflectionã€å‹•æ…‹ä»£ç†"/>
<meta name="twitter:description" content="å°šç¡…è°·JavaSEç­†è¨˜-29"/>







<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">


  




<link rel="icon" href="https://yoziming.github.io/images/favicon.png">



<link rel="stylesheet" href="https://yoziming.github.io/scss/journal.min.3f72a5fc8f5b5dd732a4b476aced0eece2156958d9d414316494ddb10593ddf7.css" integrity="sha256-P3Kl/I9bXdcypLR2rO0O7OIVaVjZ1BQxZJTdsQWT3fc=" media="screen">



<link rel="stylesheet" href="https://yoziming.github.io/scss/dark-mode.min.f7c2efa7183435a6bd1842f91c541481c7a5137b5991629a870f24e4a516ad4b.css" integrity="sha256-98Lvpxg0Naa9GEL5HFQUgcelE3tZkWKahw8k5KUWrUs=" media="screen">


<script src="/vendor/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>






  <script src="/js/toc.js"></script>











<script src="//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js"></script>





</head>
<body>
    	<div id="app"><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://yoziming.github.io/">
    
        <div class="nav-title">
            æŸšå­èŒ¶å®¤
        </div>
        
        <div class="nav-subtitle">
            ç´€éŒ„è‡ªå­¸å¤§å°äº‹
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/">
                é¦–é ğŸ 
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                ç³»åˆ—æ–‡ğŸ“–
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                æ¨™ç±¤ğŸ·ï¸
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about-me">
                é—œæ–¼æˆ‘ğŸ£
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
ç§»æ¤è‡ª <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Yoziming
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®éŒ„ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8f%8d%e5%b0%84reflection" onclick="onNavClick(`#åå°„reflection-nav`)" id="åå°„reflection-nav">
									åå°„Reflection
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%b8%bb%e8%a6%81api" onclick="onNavClick(`#ä¸»è¦api-nav`)" id="ä¸»è¦api-nav">
									ä¸»è¦API
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#class%e9%a1%9e" onclick="onNavClick(`#classé¡-nav`)" id="classé¡-nav">
									Classé¡
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%8d%b2%e5%8f%96class%e5%af%a6%e4%be%8b%e7%89%a9%e4%bb%b6" onclick="onNavClick(`#ç²å–classå¯¦ä¾‹ç‰©ä»¶-nav`)" id="ç²å–classå¯¦ä¾‹ç‰©ä»¶-nav">
									ç²å–Classå¯¦ä¾‹ç‰©ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#classloader" onclick="onNavClick(`#classloader-nav`)" id="classloader-nav">
									ClassLoader
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%9eclass%e5%89%b5%e7%ab%8b%e9%a1%9e%e7%9a%84%e5%af%a6%e4%be%8b%e7%89%a9%e4%bb%b6" onclick="onNavClick(`#å¾classå‰µç«‹é¡çš„å¯¦ä¾‹ç‰©ä»¶-nav`)" id="å¾classå‰µç«‹é¡çš„å¯¦ä¾‹ç‰©ä»¶-nav">
									å¾Classå‰µç«‹é¡çš„å¯¦ä¾‹ç‰©ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%9eclass%e5%af%a6%e4%be%8b%e7%89%a9%e4%bb%b6%e5%8f%8d%e5%b0%84%e7%8d%b2%e5%8f%96%e8%b3%87%e8%a8%8a" onclick="onNavClick(`#å¾classå¯¦ä¾‹ç‰©ä»¶åå°„ç²å–è³‡è¨Š-nav`)" id="å¾classå¯¦ä¾‹ç‰©ä»¶åå°„ç²å–è³‡è¨Š-nav">
									å¾Classå¯¦ä¾‹ç‰©ä»¶åå°„ç²å–è³‡è¨Š
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%bd%bf%e7%94%a8%e5%8f%8d%e5%b0%84" onclick="onNavClick(`#ä½¿ç”¨åå°„-nav`)" id="ä½¿ç”¨åå°„-nav">
									ä½¿ç”¨åå°„
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%93%8d%e4%bd%9c%e5%b1%ac%e6%80%a7" onclick="onNavClick(`#æ“ä½œå±¬æ€§-nav`)" id="æ“ä½œå±¬æ€§-nav">
									æ“ä½œå±¬æ€§
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%aa%bf%e7%94%a8%e6%96%b9%e6%b3%95" onclick="onNavClick(`#èª¿ç”¨æ–¹æ³•-nav`)" id="èª¿ç”¨æ–¹æ³•-nav">
									èª¿ç”¨æ–¹æ³•
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%aa%bf%e7%94%a8%e6%a7%8b%e9%80%a0%e5%99%a8" onclick="onNavClick(`#èª¿ç”¨æ§‹é€ å™¨-nav`)" id="èª¿ç”¨æ§‹é€ å™¨-nav">
									èª¿ç”¨æ§‹é€ å™¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%8b%95%e6%85%8b%e4%bb%a3%e7%90%86" onclick="onNavClick(`#å‹•æ…‹ä»£ç†-nav`)" id="å‹•æ…‹ä»£ç†-nav">
									å‹•æ…‹ä»£ç†
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%b0%8f%e7%b5%90" onclick="onNavClick(`#å°çµ-nav`)" id="å°çµ-nav">
									å°çµ
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/">
                    é¦–é ğŸ 
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    ç³»åˆ—æ–‡ğŸ“–
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    æ¨™ç±¤ğŸ·ï¸
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about-me">
                    é—œæ–¼æˆ‘ğŸ£
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®éŒ„ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8f%8d%e5%b0%84reflection" onclick="onNavClick(`#åå°„reflection-nav`)" id="åå°„reflection-nav">
									åå°„Reflection
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%b8%bb%e8%a6%81api" onclick="onNavClick(`#ä¸»è¦api-nav`)" id="ä¸»è¦api-nav">
									ä¸»è¦API
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#class%e9%a1%9e" onclick="onNavClick(`#classé¡-nav`)" id="classé¡-nav">
									Classé¡
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%8d%b2%e5%8f%96class%e5%af%a6%e4%be%8b%e7%89%a9%e4%bb%b6" onclick="onNavClick(`#ç²å–classå¯¦ä¾‹ç‰©ä»¶-nav`)" id="ç²å–classå¯¦ä¾‹ç‰©ä»¶-nav">
									ç²å–Classå¯¦ä¾‹ç‰©ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#classloader" onclick="onNavClick(`#classloader-nav`)" id="classloader-nav">
									ClassLoader
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%9eclass%e5%89%b5%e7%ab%8b%e9%a1%9e%e7%9a%84%e5%af%a6%e4%be%8b%e7%89%a9%e4%bb%b6" onclick="onNavClick(`#å¾classå‰µç«‹é¡çš„å¯¦ä¾‹ç‰©ä»¶-nav`)" id="å¾classå‰µç«‹é¡çš„å¯¦ä¾‹ç‰©ä»¶-nav">
									å¾Classå‰µç«‹é¡çš„å¯¦ä¾‹ç‰©ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%9eclass%e5%af%a6%e4%be%8b%e7%89%a9%e4%bb%b6%e5%8f%8d%e5%b0%84%e7%8d%b2%e5%8f%96%e8%b3%87%e8%a8%8a" onclick="onNavClick(`#å¾classå¯¦ä¾‹ç‰©ä»¶åå°„ç²å–è³‡è¨Š-nav`)" id="å¾classå¯¦ä¾‹ç‰©ä»¶åå°„ç²å–è³‡è¨Š-nav">
									å¾Classå¯¦ä¾‹ç‰©ä»¶åå°„ç²å–è³‡è¨Š
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%bd%bf%e7%94%a8%e5%8f%8d%e5%b0%84" onclick="onNavClick(`#ä½¿ç”¨åå°„-nav`)" id="ä½¿ç”¨åå°„-nav">
									ä½¿ç”¨åå°„
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%93%8d%e4%bd%9c%e5%b1%ac%e6%80%a7" onclick="onNavClick(`#æ“ä½œå±¬æ€§-nav`)" id="æ“ä½œå±¬æ€§-nav">
									æ“ä½œå±¬æ€§
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%aa%bf%e7%94%a8%e6%96%b9%e6%b3%95" onclick="onNavClick(`#èª¿ç”¨æ–¹æ³•-nav`)" id="èª¿ç”¨æ–¹æ³•-nav">
									èª¿ç”¨æ–¹æ³•
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%aa%bf%e7%94%a8%e6%a7%8b%e9%80%a0%e5%99%a8" onclick="onNavClick(`#èª¿ç”¨æ§‹é€ å™¨-nav`)" id="èª¿ç”¨æ§‹é€ å™¨-nav">
									èª¿ç”¨æ§‹é€ å™¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%8b%95%e6%85%8b%e4%bb%a3%e7%90%86" onclick="onNavClick(`#å‹•æ…‹ä»£ç†-nav`)" id="å‹•æ…‹ä»£ç†-nav">
									å‹•æ…‹ä»£ç†
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%b0%8f%e7%b5%90" onclick="onNavClick(`#å°çµ-nav`)" id="å°çµ-nav">
									å°çµ
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://yoziming.github.io/">
            æŸšå­èŒ¶å®¤
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://yoziming.github.io/">
        <div class="single-column-header-title">æŸšå­èŒ¶å®¤</div>
        
        <div class="single-column-header-subtitle">ç´€éŒ„è‡ªå­¸å¤§å°äº‹</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://yoziming.github.io/images/java-book.jpg')"
                    
                
            >
                <div class="post-title">
                    åå°„Reflectionã€å‹•æ…‹ä»£ç†
                    
                    <div class="post-subtitle">
                        å°šç¡…è°·JavaSEç­†è¨˜-29
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2021-12-14 00:00
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/javase%E7%B7%9A%E4%B8%8A%E8%AA%B2">JavaSEç·šä¸Šèª²</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/java">java</a>
                                &nbsp;
                            
                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h1 id="åå°„reflection">åå°„Reflection</h1>
<ul>
<li>åå°„Reflectionæ˜¯Javaè¢«è¦–ç‚ºå‹•æ…‹èªè¨€çš„é—œéµï¼Œå¯ä»¥åœ¨é‹è¡Œæ™‚ç²å–é¡çš„å…§éƒ¨è¨Šæ¯
<ul>
<li>å‹•æ…‹èªè¨€:ç¨‹å¼é‹è¡Œæ™‚ï¼Œä»£ç¢¼å¯ä»¥æ ¹æ“šæŸäº›æ¢ä»¶æ”¹è®Šè‡ªèº«çµæ§‹</li>
</ul>
</li>
<li>å…·é«”ä¾†èªªï¼Œç•¶æˆ‘å€‘åŠ è¼‰å®ŒæŸé¡ä¹‹å¾Œï¼Œåœ¨è¨˜æ†¶é«”ä¸­å †çš„æ–¹æ³•å€å°±ç”¢ç”Ÿäº†ä¸€å€‹è©²é¡çš„<code>Classç‰©ä»¶</code>ï¼Œæ­¤ç‰©ä»¶åŒ…å«äº†å®Œæ•´çš„è©²é¡çš„çµæ§‹è¨Šæ¯</li>
<li>å› æ­¤æˆ‘å€‘èƒ½é€éåå°„çš„APIï¼Œå¾ä¸€å€‹ç‰©ä»¶å–å¾—ä»–æ‰€å±¬é¡çš„å±¬æ€§èˆ‡æ–¹æ³•ä¸¦é€²è¡Œå„ç¨®æ“ä½œ</li>
</ul>
<h3 id="ä¸»è¦api">ä¸»è¦API</h3>
<ul>
<li><code>java.lang.Class</code>:ä»£è¡¨ä¸€å€‹é¡</li>
<li><code>java.lang.reflect.Method</code>:ä»£è¡¨é¡çš„æ–¹æ³•</li>
<li><code>java.lang.reflect.Field</code>:ä»£è¡¨é¡çš„æˆå“¡è®Šæ•¸</li>
<li><code>java.lang.reflect.Constructor</code>:ä»£è¡¨é¡çš„æ§‹é€ å™¨</li>
</ul>
<h3 id="classé¡">Classé¡</h3>
<ul>
<li><code>Classé¡</code>å³æ˜¯&quot;é¡çš„é¡&quot;ï¼Œç‚ºåå°„çš„æºé ­</li>
<li>Objecté¡ä¸­å®šç¾©äº†<code>getClass()</code>æ–¹æ³•ï¼Œæ­¤æ–¹æ³•è¢«æ‰€æœ‰é¡ç¹¼æ‰¿</li>
<li><code>Classé¡</code>çš„å¯¦ä¾‹ç‰©ä»¶åªèƒ½ç”±ç³»çµ±å»ºç«‹ï¼Œç•¶ä¸€å€‹<code>.classæª”æ¡ˆ</code>è¢«JVMè¼‰å…¥åŸ·è¡Œæ™‚ç³»çµ±åœ¨å †çš„æ–¹æ³•å€ç”¢ç”Ÿå”¯ä¸€å°æ‡‰çš„ç‰©ä»¶</li>
<li>é€šé<code>Classç‰©ä»¶</code>å¯ä»¥å®Œæ•´ç²å–é¡çš„çµæ§‹ä¸¦é€²è¡Œå„ç¨®æ“ä½œï¼Œæ‰€ä»¥è¦ä½¿ç”¨åå°„å¿…é ˆå…ˆç²å–<code>Classç‰©ä»¶</code></li>
<li>è¬ç‰©çš†ç‰©ä»¶ã€è¬ç‰©çš†æœ‰<code>Classé¡</code>
<ul>
<li>æ•¸çµ„çš„è©±åªè¦å…ƒç´ é¡å‹èˆ‡ç¶­åº¦ç›¸åŒï¼Œè¦–ç‚ºåŒä¸€å€‹<code>Class</code>ï¼Œä¾‹å¦‚<code>int[5]</code>èˆ‡<code>int[20]</code></li>
</ul>
</li>
</ul>
<h3 id="ç²å–classå¯¦ä¾‹ç‰©ä»¶">ç²å–Classå¯¦ä¾‹ç‰©ä»¶</h3>
<ul>
<li>å·²çŸ¥å…·é«”é¡å:<code>Class clazz = String.class</code></li>
<li>å·²çŸ¥å…¨é¡å:<code>Class clazz = Class.forName(&quot;java.lang.String&quot;)</code>
<ul>
<li>å¯èƒ½æ‹‹å‡ºéŒ¯èª¤<code>ClassNotFoundException</code></li>
<li>ä¹Ÿå¯ä»¥é€é<code>ClassLoader</code>
<ul>
<li><code>ClassLoader cl = this.getClass().getClassLoader()</code></li>
<li><code>Class clazz4 = cl.loadClass(&quot;å…¨é¡å&quot;)</code></li>
</ul>
</li>
</ul>
</li>
<li>å·²æœ‰æŸé¡çš„å¯¦ä¾‹ç‰©ä»¶:<code>Class clazz = obj01.getClass()</code></li>
</ul>
<h3 id="classloader">ClassLoader</h3>
<blockquote>
<p>è£œå……çŸ¥è­˜é»ï¼Œæœ‰å°è±¡å°±å¥½</p>
</blockquote>
<h5 id="é¡çš„åŠ è¼‰å¯¦éš›æ­¥é©Ÿ">é¡çš„åŠ è¼‰å¯¦éš›æ­¥é©Ÿ</h5>
<ol>
<li>Load:å°‡<code>.classæª”æ¡ˆ</code>è®€å…¥è¨˜æ†¶é«”ã€å‰µå»º<code>Classç‰©ä»¶</code></li>
<li>Link:å°‡é¡çš„äºŒé€²ä½æ•¸æ“šåˆä½µåˆ°JREä¸­ã€å¼•å…¥<code>å¸¸é‡</code></li>
<li>Initialize:åˆå§‹åŒ–ï¼ŒåŸ·è¡Œé¡æ§‹é€ å™¨<code>&lt;clinit&gt;()</code>æ–¹æ³•ï¼Œé€²è¡Œ<code>static</code>å±¬æ€§æˆ–æŒ‡å®šåˆå§‹å€¼çš„è³¦å€¼</li>
</ol>
<ul>
<li>å¦‚æœä¸€å€‹é¡çš„çˆ¶é¡é‚„æ²’åˆå§‹åŒ–ï¼Œæœƒå…ˆé€²è¡Œçˆ¶é¡çš„åˆå§‹åŒ–</li>
<li>JVMæœƒä¿è­‰<code>&lt;clinit&gt;()</code>æ–¹æ³•åœ¨å¤šç·šç¨‹ç’°å¢ƒä¸­çš„åŠ é–èˆ‡åŒæ­¥</li>
</ul>
<h5 id="åŠ è¼‰å™¨çš„åˆ†é¡">åŠ è¼‰å™¨çš„åˆ†é¡</h5>
<ul>
<li>Bootstrap:å¼•å°é¡ï¼Œç”±Cèªè¨€ç·¨å¯«ï¼Œè² è²¬Javaå¹³å°æ ¸å¿ƒåº«ï¼Œç„¡æ³•ç›´æ¥ç²å–</li>
<li>Extension:æ“´å±•é¡ï¼Œè² è²¬è¼‰å…¥<code>jre/lib/extæˆ–</code>æŒ‡å®šç›®éŒ„ä¸‹çš„<code>jaråŒ…</code></li>
<li>System(APPs):ç³»çµ±é¡ï¼Œè² è²¬è¼‰å…¥<code>java.class.path</code>ç›®éŒ„ä¸‹çš„<code>jaråŒ…</code>ï¼Œæœ€å¸¸ç”¨çš„</li>
<li>SomeClass:è‡ªè¨‚é¡</li>
</ul>
<h3 id="å¾classå‰µç«‹é¡çš„å¯¦ä¾‹ç‰©ä»¶">å¾Classå‰µç«‹é¡çš„å¯¦ä¾‹ç‰©ä»¶</h3>
<ul>
<li>å–å¾—ä¸€å€‹<code>Classç‰©ä»¶</code>å¾Œï¼Œå¯ä»¥é€é<code>newInstance()</code>æ–¹æ³•å‰µå»ºå°æ‡‰é¡çš„å¯¦ä¾‹ï¼Œä½†æœ‰å‰æ:
<ul>
<li>è©²é¡å¿…é ˆæœ‰ä¸€å€‹ç©ºåƒçš„æ§‹é€ å™¨</li>
<li>è©²æ§‹é€ å™¨è¦æœ‰ç¬¦åˆçš„è¨ªå•æ¬Šé™</li>
</ul>
</li>
</ul>
<h3 id="å¾classå¯¦ä¾‹ç‰©ä»¶åå°„ç²å–è³‡è¨Š">å¾Classå¯¦ä¾‹ç‰©ä»¶åå°„ç²å–è³‡è¨Š</h3>
<blockquote>
<p>åŸºæœ¬éƒ½æ˜¯<code>getXXX()</code>ï¼Œæ²’ç‰¹åˆ¥è²æ˜çš„æœƒè¿”å›åŒ…å«çˆ¶é¡çš„<code>public</code>è³‡è¨Š</p>
<p><code>Declared</code>ç”¨æ–¼æŒ‡æ˜&quot;ç•¶å‰ä»£&quot;ï¼Œä¸¦ä¸”ç„¡è¦–æ¬Šé™ä¿®é£¾ç¬¦</p>
</blockquote>
<h5 id="å–å¾—æ§‹é€ å™¨">å–å¾—æ§‹é€ å™¨</h5>
<ul>
<li><code>public Constructor&lt;T&gt;[] getConstructors()</code>:è¿”å›<code>public</code>çš„æ§‹é€ å™¨ï¼Œæ§‹é€ å™¨ç„¡æ³•ç¹¼æ‰¿ï¼Œé€™å¯ä¸æœƒæ‹¿åˆ°çˆ¶é¡çš„æ§‹é€ å™¨</li>
<li><code>public Constructor&lt;T&gt;[] getDeclaredConstructors</code>:è¿”å›ç•¶å‰é¡çš„æ‰€æœ‰æ§‹é€ å™¨(å«private)</li>
<li>å°æ–¼è¿”å›çš„<code>Constructoré¡ç‰©ä»¶</code>ï¼Œé‚„èƒ½å†ç´°æ¢:
<ul>
<li><code>public int getModifiers()</code>:å–å¾—ä¿®é£¾ç¬¦</li>
<li><code>public String getName()</code>:å–å¾—æ–¹æ³•åç¨±</li>
<li><code>public Class&lt;?&gt;[] getParameterTypes()</code>:å–å¾—åƒæ•¸çš„é¡å‹</li>
</ul>
</li>
</ul>
<h5 id="å–å¾—å±¬æ€§">å–å¾—å±¬æ€§</h5>
<ul>
<li>
<p><code>public Field[] getFields()</code>:è¿”å›é¡æˆ–æ¥å£publicçš„Field(å«çˆ¶é¡)</p>
</li>
<li>
<p><code>public Field[] getDeclaredFields()</code>:è¿”å›ç•¶å‰çš„Field(å«private)</p>
</li>
<li>
<p>å°æ–¼è¿”å›çš„<code>Fieldé¡ç‰©ä»¶</code>ï¼Œé‚„èƒ½å†ç´°æ¢:</p>
<ul>
<li>
<p><code>public int getModifiers()</code>:ä»¥æ•´æ•¸å½¢å¼è¿”å›æ­¤Fieldçš„ä¿®é£¾ç¬¦</p>
</li>
<li>
<p><code>public Class&lt;?&gt; getType()</code>:å¾—åˆ°Fieldçš„å±¬æ€§é¡å‹</p>
</li>
<li>
<p><code>public String getName()</code>:è¿”å›Fieldçš„åç¨±</p>
</li>
</ul>
</li>
</ul>
<h5 id="å–å¾—æ–¹æ³•">å–å¾—æ–¹æ³•</h5>
<ul>
<li><code>public Method[] getMethods()</code>:è¿”å›é¡<code>public</code>çš„æ–¹æ³•(å«çˆ¶é¡)</li>
<li><code>public Method[] getDeclaredMethods()</code>:è¿”å›ç•¶å‰çš„æ–¹æ³•(å«<code>private</code>)</li>
<li>å°æ–¼è¿”å›çš„<code>Methodé¡ç‰©ä»¶</code>ï¼Œé‚„èƒ½å†ç´°æ¢:
<ul>
<li><code>public Class&lt;?&gt; getReturnType()</code>:å–å¾—å…¨éƒ¨çš„è¿”å›å€¼</li>
<li><code>public Class&lt;?&gt;[] getParameterTypes()</code>:å–å¾—å…¨éƒ¨çš„åƒæ•¸</li>
<li><code>public int getModifiers()</code>:å–å¾—ä¿®é£¾ç¬¦</li>
<li><code>public Class&lt;?&gt;[] getExceptionTypes()</code>:å–å¾—ç•°å¸¸è³‡è¨Š</li>
</ul>
</li>
</ul>
<h5 id="ç²å–çˆ¶é¡æˆ–å¯¦ç¾çš„æ¥å£">ç²å–çˆ¶é¡æˆ–å¯¦ç¾çš„æ¥å£</h5>
<ul>
<li><code>public Class&lt;?&gt;[] getInterfaces()</code>:è¿”å›ç•¶å‰é¡æ‰€æœ‰å¯¦ç¾çš„æ¥å£(ä¸å«çˆ¶é¡)</li>
<li><code>public Class&lt;? Super T&gt; getSuperclass()</code>:è¿”å›çˆ¶é¡çš„<code>Classç‰©ä»¶</code></li>
<li>æƒ³ç²å¾—çˆ¶é¡çš„æ¥å£å¯ä»¥2å€‹çµ„åˆç”¨</li>
</ul>
<h5 id="heading"></h5>
<h5 id="å…¶ä»–è³‡è¨Š">å…¶ä»–è³‡è¨Š</h5>
<blockquote>
<p>æ¡†æ¶å¸¸ç”¨åˆ°ï¼Œå°¤å…¶æ˜¯æ³›å‹ç›¸é—œçš„</p>
</blockquote>
<ul>
<li><code>getDeclaredAnnotations()</code>:å–å¾—è¨»è§£</li>
<li><code>getGenericSuperclass</code>:ç²å–çˆ¶é¡æ³›å‹é¡å‹Type</li>
<li><code>ParameterizedType</code>:ç²å–æ³›å‹é¡å‹</li>
<li><code>getActualTypeArguments</code>:ç²å–å¯¦éš›çš„æ³›å‹é¡å‹åƒæ•¸</li>
<li><code>Package getPackage()</code>:ç²å–é¡æ‰€åœ¨çš„åŒ…</li>
</ul>
<h5 id="ç¯„ä¾‹">ç¯„ä¾‹</h5>
<blockquote>
<p>è‡ªè¨‚ä¸€å€‹Personé¡ï¼Œä»–çš„ç¹¼æ‰¿ã€æ¥å£ã€è¨»è§£é€™é‚Šå°±ä¸è²¼äº†</p>
<p>ç”¨ä¾†å˜—è©¦èª¿ç”¨ä¸Šé¢è¬›çš„é€™äº›ç²å¾—è³‡è¨Šæ–¹æ³•</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@MyAnnotation</span>(value = <span style="color:#cd5555">&#34;hi&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Person</span> <span style="color:#8b008b;font-weight:bold">extends</span> Creature&lt;String&gt; <span style="color:#8b008b;font-weight:bold">implements</span> Comparable&lt;String&gt;, MyInterface {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> String name;
</span></span><span style="display:flex;"><span>    <span style="color:#00688b;font-weight:bold">int</span> age;
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">int</span> id;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#008b45">Person</span>() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">toString</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;name=&#34;</span> + name + <span style="color:#cd5555">&#34;,id=&#34;</span> + id+ <span style="color:#cd5555">&#34;,age=&#34;</span> + age;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@MyAnnotation</span>(value = <span style="color:#cd5555">&#34;name&amp;int&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#008b45">Person</span>(String name, <span style="color:#00688b;font-weight:bold">int</span> age) {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">name</span> = name;
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">age</span> = age;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> String <span style="color:#008b45">show</span>(String nation) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;æˆ‘çš„åœ‹ç±æ˜¯&#34;</span> + nation);
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> nation;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">display</span>() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;æˆ‘æ˜¯éœæ…‹æ–¹æ³•&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">compareTo</span>(String o) {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> 0;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">info</span>() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;æˆ‘æ˜¯äºº&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="ä½¿ç”¨åå°„">ä½¿ç”¨åå°„</h1>
<blockquote>
<p>ç²å–è³‡è¨Šå¾Œï¼Œå¯ä»¥ç”¨è¿”å›çš„çµæ§‹é€éåå°„ä¾†æ“ä½œç‰©ä»¶å¯¦ä¾‹</p>
</blockquote>
<h3 id="æ“ä½œå±¬æ€§">æ“ä½œå±¬æ€§</h3>
<h5 id="ä½œæ³•1">ä½œæ³•1</h5>
<blockquote>
<p>å·²çŸ¥è¦èª¿ç”¨çš„å±¬å§“å</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Class&lt;Person&gt; clazz = Person.<span style="color:#658b00">class</span>;
</span></span><span style="display:flex;"><span>Person p = clazz.<span style="color:#658b00">newInstance</span>();
</span></span><span style="display:flex;"><span><span style="color:#228b22">// è¿”å›è©²å±¬æ€§çš„Fieldç‰©ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>Field id = clazz.<span style="color:#658b00">getField</span>(<span style="color:#cd5555">&#34;id&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#228b22">// èª¿ç”¨setæ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>id.<span style="color:#658b00">set</span>(p, 20);
</span></span><span style="display:flex;"><span>System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(p);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">// æŸ¥çœ‹å¯èª¿ç”¨getæ–¹æ³•ï¼Œè¿”å›objéœ€è¦å¼·è½‰
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#00688b;font-weight:bold">int</span> nid = (<span style="color:#00688b;font-weight:bold">int</span>) id.<span style="color:#658b00">get</span>(p);
</span></span><span style="display:flex;"><span>System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(nid);
</span></span></code></pre></div><ul>
<li>ç”¨<code>getField(String å±¬æ€§å)</code>æ–¹æ³•ç²å¾—è©²å±¬æ€§çš„Fieldç‰©ä»¶</li>
<li>ä»¥Fieldç‰©ä»¶èª¿ç”¨setæ–¹æ³•</li>
<li>å—åˆ°æ¬Šé™ç®¡åˆ¶ï¼Œå¯¦éš›é–‹ç™¼ä¸é€™æ¨£ç”¨</li>
</ul>
<hr>
<h5 id="ä½œæ³•2">ä½œæ³•2</h5>
<blockquote>
<p>çœŸæ­£ä½¿ç”¨çš„</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Class&lt;Person&gt; clazz = Person.<span style="color:#658b00">class</span>;
</span></span><span style="display:flex;"><span>Person p = clazz.<span style="color:#658b00">newInstance</span>();
</span></span><span style="display:flex;"><span><span style="color:#228b22">// ç”¨Declaredè¿”å›è©²å±¬æ€§çš„Fieldç‰©ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>Field name = clazz.<span style="color:#658b00">getDeclaredField</span>(<span style="color:#cd5555">&#34;name&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#228b22">// é–‹å•Ÿæ¬Šé™
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>name.<span style="color:#658b00">setAccessible</span>(<span style="color:#8b008b;font-weight:bold">true</span>);
</span></span><span style="display:flex;"><span>name.<span style="color:#658b00">set</span>(p, <span style="color:#cd5555">&#34;Tom&#34;</span>);
</span></span><span style="display:flex;"><span>System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(name.<span style="color:#658b00">get</span>(p));
</span></span></code></pre></div><ul>
<li>å·²çŸ¥è¦èª¿ç”¨çš„å±¬å§“å</li>
<li>ç”¨<code>getDeclaredField(String å±¬æ€§å)</code>æ–¹æ³•ç²å¾—è©²å±¬æ€§çš„Fieldç‰©ä»¶ï¼Œé€™æ¬¡æ²’æœ‰æ¬Šé™å•é¡Œäº†ï¼Œç¸½æ˜¯èƒ½ç²å¾—</li>
<li>ä½†æ˜¯èƒ½ç²å¾—ä¸ç­‰æ–¼èƒ½ä¿®æ”¹ï¼Œæƒ³ä¿®æ”¹ä¹‹å‰è¦å…ˆ<code>setAccessible(true)</code></li>
<li>ä»¥Fieldç‰©ä»¶èª¿ç”¨setæ–¹æ³•</li>
</ul>
<h3 id="èª¿ç”¨æ–¹æ³•">èª¿ç”¨æ–¹æ³•</h3>
<blockquote>
<p>ä½¿ç”¨invoke</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Class&lt;Person&gt; clazz = Person.<span style="color:#658b00">class</span>;
</span></span><span style="display:flex;"><span>Person p = clazz.<span style="color:#658b00">newInstance</span>();
</span></span><span style="display:flex;"><span><span style="color:#228b22">// èª¿ç”¨æ–¹æ³•ï¼Œéœ€è¦æŒ‡æ˜æ–¹æ³•çš„å½¢åƒé¡å‹
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>Method show = clazz.<span style="color:#658b00">getDeclaredMethod</span>(<span style="color:#cd5555">&#34;show&#34;</span>, String.<span style="color:#658b00">class</span>);
</span></span><span style="display:flex;"><span>show.<span style="color:#658b00">setAccessible</span>(<span style="color:#8b008b;font-weight:bold">true</span>);
</span></span><span style="display:flex;"><span>Object nation = show.<span style="color:#658b00">invoke</span>(p, <span style="color:#cd5555">&#34;å°ç£&#34;</span>);
</span></span><span style="display:flex;"><span>System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;nation = &#34;</span> + nation);
</span></span><span style="display:flex;"><span><span style="color:#228b22">// èª¿ç”¨éœæ…‹æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>Method display = clazz.<span style="color:#658b00">getDeclaredMethod</span>(<span style="color:#cd5555">&#34;display&#34;</span>);
</span></span><span style="display:flex;"><span>display.<span style="color:#658b00">invoke</span>(clazz);
</span></span></code></pre></div><ul>
<li>å·²çŸ¥è¦èª¿ç”¨çš„æ–¹æ³•å</li>
<li>ç”¨<code>getDeclaredMethod</code>ï¼Œéœ€è¦æŒ‡æ˜å…·é«”å½¢åƒé¡å‹ï¼Œå› ç‚ºå¯èƒ½æœ‰å¾ˆå¤š<code>override</code>çš„æ–¹æ³•</li>
<li>æœ‰æ¬Šé™å•é¡Œä¸€æ¨£éœ€è¦<code>setAccessible</code></li>
<li><code>invoke(ç‰©ä»¶, å½¢åƒ...)</code>çš„è¿”å›å€¼å°±æ˜¯èª¿ç”¨çš„æ–¹æ³•çš„è¿”å›å€¼
<ul>
<li>å¦‚æœæ²’æœ‰å‰‡è¿”å›<code>null</code></li>
</ul>
</li>
<li>ä¹Ÿå¯ä»¥èª¿ç”¨éœæ…‹æ–¹æ³•</li>
</ul>
<h3 id="èª¿ç”¨æ§‹é€ å™¨">èª¿ç”¨æ§‹é€ å™¨</h3>
<blockquote>
<p>JDK8å¹¾ä¹ä¸é€™æ¨£ç”¨ï¼Œç›´æ¥clazz.newInstance()å°±é€ ç‰©ä»¶äº†</p>
<p>ä½†æ–°ç‰ˆçš„JDKå°‡è©²æ–¹æ³•å»¢æ£„ï¼Œå»ºè­°ç”¨é€™ç¨®å½¢å¼ï¼Œæ‰€ä»¥é‚„æ˜¯å­¸ä¸€ä¸‹</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Class&lt;Person&gt; clazz = Person.<span style="color:#658b00">class</span>;
</span></span><span style="display:flex;"><span><span style="color:#228b22">// èª¿ç”¨æ§‹é€ å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>Constructor&lt;Person&gt; con = clazz.<span style="color:#658b00">getDeclaredConstructor</span>(String.<span style="color:#658b00">class</span>, <span style="color:#00688b;font-weight:bold">int</span>.<span style="color:#658b00">class</span>);
</span></span><span style="display:flex;"><span>con.<span style="color:#658b00">setAccessible</span>(<span style="color:#8b008b;font-weight:bold">true</span>);
</span></span><span style="display:flex;"><span>Person jay = con.<span style="color:#658b00">newInstance</span>(<span style="color:#cd5555">&#34;Jay&#34;</span>, 50);
</span></span><span style="display:flex;"><span>System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(jay);
</span></span></code></pre></div><ul>
<li>åƒæ•¸çš„éƒ¨åˆ†è¦æ³¨æ„ï¼Œæˆ‘æœ¬ä¾†é‚„ä»¥ç‚º<code>int.class</code>è¦ç”¨<code>Integer.class</code>ï¼Œçµæœä¸ç”¨</li>
</ul>
<h1 id="å‹•æ…‹ä»£ç†">å‹•æ…‹ä»£ç†</h1>
<blockquote>
<p>ä¸€å€‹å‹•æ…‹çš„ä»£ç†å·¥å» ï¼Œå¯ä»¥éš¨ç›®æ¨™é¡å‰µé€ å‡ºå°æ‡‰çš„ä»£ç†å¯¦ä¾‹</p>
</blockquote>
<ul>
<li>
<p>ç”±éœæ…‹ä»£ç†æ¨¡å¼è½‰å‹•æ…‹ï¼Œéœ€è¦è§£æ±ºå…©å€‹å•é¡Œ</p>
<ul>
<li>
<p>å¦‚ä½•æ ¹æ“šåŠ è¼‰åˆ°è¨˜æ†¶é«”ä¸­çš„<code>è¢«ä»£ç†é¡</code>ï¼Œå‹•æ…‹çš„å‰µå»ºä¸€å€‹<code>ä»£ç†é¡</code>åŠ<code>å¯¦ä¾‹ç‰©ä»¶</code>?</p>
</li>
<li>
<p>ç•¶é€šé<code>ä»£ç†é¡å¯¦ä¾‹ç‰©ä»¶</code>èª¿ç”¨<code>æ–¹æ³•a</code>æ™‚ï¼Œå¦‚ä½•å‹•æ…‹çš„å»èª¿ç”¨<code>è¢«ä»£ç†é¡</code>ä¸­çš„åŒå<code>æ–¹æ³•a</code>?</p>
</li>
</ul>
</li>
<li>
<p>ç¯„ä¾‹ä»£ç¢¼:</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">Human</span> {
</span></span><span style="display:flex;"><span>    String <span style="color:#008b45">getBelief</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">eat</span>(String food);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">// è¢«ä»£ç†é¡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">SuperMan</span> <span style="color:#8b008b;font-weight:bold">implements</span> Human {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">getBelief</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;I believe I can fly!&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">eat</span>(String food) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;è¶…äººæ„›åƒ&#34;</span> + food);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">// ä»£ç†å·¥å» 
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">ProxyFactory</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// èª¿ç”¨æ­¤æ–¹æ³•ï¼Œè¿”å›ä¸€å€‹ä»£ç†é¡çš„ç‰©ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> Object <span style="color:#008b45">getProxyInstance</span>(Object obj) { <span style="color:#228b22">// obj=è¢«ä»£ç†é¡çš„ç‰©ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        MyInvocationHandler myInvocationHandler = <span style="color:#8b008b;font-weight:bold">new</span> MyInvocationHandler();
</span></span><span style="display:flex;"><span>        myInvocationHandler.<span style="color:#658b00">bind</span>(obj); <span style="color:#228b22">// é€£çµç‰©ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">return</span> Proxy.<span style="color:#658b00">newProxyInstance</span>(obj.<span style="color:#658b00">getClass</span>().<span style="color:#658b00">getClassLoader</span>(), obj.<span style="color:#658b00">getClass</span>().<span style="color:#658b00">getInterfaces</span>(),
</span></span><span style="display:flex;"><span>                myInvocationHandler);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">// ä»£ç†é¡çš„ç‰©ä»¶è¢«èª¿ç”¨æ–¹æ³•aæ™‚ï¼Œå°±è‡ªå‹•èª¿ç”¨invokeæ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MyInvocationHandler</span> <span style="color:#8b008b;font-weight:bold">implements</span> InvocationHandler {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> Object obj; <span style="color:#228b22">// éœ€è¦ä½¿ç”¨è¢«ä»£ç†é¡çš„ç‰©ä»¶é€²è¡Œè³¦å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// é€£çµç‰©ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">bind</span>(Object obj) {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">obj</span> = obj;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// ç‰©ä»¶å‚³é€²ä¾†ï¼Œåœ¨é€™è£¡é€²è¡Œåå°„èª¿ç”¨
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> Object <span style="color:#008b45">invoke</span>(Object proxy, Method method, Object[] args) <span style="color:#8b008b;font-weight:bold">throws</span> Throwable {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// è¦åŸ·è¡Œçš„æ–¹æ³•å°±åœ¨é€™
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">return</span> method.<span style="color:#658b00">invoke</span>(obj, args);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">ProxyTest</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">main</span>(String[] args) {
</span></span><span style="display:flex;"><span>        SuperMan superMan = <span style="color:#8b008b;font-weight:bold">new</span> SuperMan();
</span></span><span style="display:flex;"><span>        Human proxyInstance = (Human) ProxyFactory.<span style="color:#658b00">getProxyInstance</span>(superMan);
</span></span><span style="display:flex;"><span>        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(proxyInstance.<span style="color:#658b00">getBelief</span>());
</span></span><span style="display:flex;"><span>        proxyInstance.<span style="color:#658b00">eat</span>(<span style="color:#cd5555">&#34;æ¼¢å ¡åŒ…&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>å¯¦ç¾<code>InvocationHandler</code>æ¥å£ï¼Œåœ¨<code>invoke</code>æ–¹æ³•ä¸­å®Œæˆå…·é«”çš„ä»£ç†æ“ä½œ</li>
<li>é€é<code>Proxy.newProxyInstance</code>éœæ…‹æ–¹æ³•ï¼Œè¿”å›ä»£ç†é¡çš„ç‰©ä»¶</li>
<li>ä»¥æ­¤ç‰©ä»¶å®Œæˆæƒ³ä»£ç†çš„æ“ä½œ</li>
</ul>
<h1 id="å°çµ">å°çµ</h1>
<ul>
<li>ç²å–Classç‰©ä»¶:<code>é¡.class</code></li>
<li>åå°„å‰µé€ å¯¦ä¾‹:<code>newInstance()</code></li>
<li>ç²å–è³‡è¨Š:
<ul>
<li><code>getXXX()</code>ç²å–<code>public</code>åŠä¸€äº›çˆ¶é¡çš„</li>
<li><code>getDeclaredXXX()</code>ç²å¾—ç•¶å‰é¡ï¼Œç„¡è¦–å°è£æ€§</li>
</ul>
</li>
<li>çªç ´å°è£æ¬Šé™:<code>setAccessible(true)</code></li>
<li>æ“ä½œ:<code>set</code>æ”¹è®Šå±¬æ€§ã€<code>invoke</code>èª¿ç”¨æ–¹æ³•</li>
<li>å‹•æ…‹ä»£ç†:<code>Proxy.newProxyInstance</code>éœæ…‹æ–¹æ³•ã€å¯¦ç¾<code>InvocationHandler</code>æ¥å£</li>
</ul>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">ä¸Šæ¬¡ä¿®æ”¹æ–¼ 2021-12-14</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://yoziming.github.io/post/211215-agg-ja-30/">
			ä¸‹ä¸€ç¯‡<br>JDK8æ–°ç‰¹æ€§:Lambdaè¡¨é”å¼ã€StreamAPIã€Optionalé¡
                </a>
                
                
                
                <a class="older-posts" href="https://yoziming.github.io/post/211213-agg-ja-28/">
			ä¸Šä¸€ç¯‡<br>é€šè¨Šå”å®š:URLã€IPèˆ‡ç¶²è·¯ç·¨ç¨‹
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                








<div id="waline"></div>
<script>
    new Waline({
        el: '#waline',
        path: location.pathname,
        serverURL: "https://waline-pn38gfwbz-yoziming.vercel.app/" ,
		lang: 'en-US',
		visitor: true,
		meta: ['nick', 'mail'],
    });
    </script>



            </div>
        </div>
    </div>


                    </div>
            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
ç§»æ¤è‡ª <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Yoziming
	
</div>
            </div>
    
    <script src="/js/journal.js"></script>
    </body>
</html>
