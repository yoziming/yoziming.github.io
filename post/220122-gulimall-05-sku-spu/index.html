<!DOCTYPE html>
<html><head>
<meta name="google-site-verification" content="XrwF-xUZWSGJVBBm7jM8vqemVqx--zo5Tb9d-Vr7BCc" />
<title>å¾Œå°-å•†å“å±¬æ€§ï¼Œå¤šå°å¤šéå¤–éµè¡¨æ“ä½œ</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="SpringBootå¾®æœå‹™é …ç›®ç­†è¨˜-05">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="å¾Œå°-å•†å“å±¬æ€§ï¼Œå¤šå°å¤šéå¤–éµè¡¨æ“ä½œ" />
<meta property="og:description" content="SpringBootå¾®æœå‹™é …ç›®ç­†è¨˜-05" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yoziming.github.io/post/220122-gulimall-05-sku-spu/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-01-22T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-01-22T00:00:00+00:00" /><meta property="og:site_name" content="My Blog" />






<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="å¾Œå°-å•†å“å±¬æ€§ï¼Œå¤šå°å¤šéå¤–éµè¡¨æ“ä½œ"/>
<meta name="twitter:description" content="SpringBootå¾®æœå‹™é …ç›®ç­†è¨˜-05"/>







<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">


  




<link rel="icon" href="https://yoziming.github.io/images/favicon.png">



<link rel="stylesheet" href="https://yoziming.github.io/scss/journal.min.3f72a5fc8f5b5dd732a4b476aced0eece2156958d9d414316494ddb10593ddf7.css" integrity="sha256-P3Kl/I9bXdcypLR2rO0O7OIVaVjZ1BQxZJTdsQWT3fc=" media="screen">



<link rel="stylesheet" href="https://yoziming.github.io/scss/dark-mode.min.f7c2efa7183435a6bd1842f91c541481c7a5137b5991629a870f24e4a516ad4b.css" integrity="sha256-98Lvpxg0Naa9GEL5HFQUgcelE3tZkWKahw8k5KUWrUs=" media="screen">


<script src="/vendor/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>






  <script src="/js/toc.js"></script>











<script src="//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js"></script>





</head>
<body>
    	<div id="app"><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://yoziming.github.io/">
    
        <div class="nav-title">
            æŸšå­èŒ¶å®¤
        </div>
        
        <div class="nav-subtitle">
            ç´€éŒ„è‡ªå­¸å¤§å°äº‹
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/">
                é¦–é ğŸ 
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                æ¨™ç±¤ğŸ·ï¸
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                ç³»åˆ—æ–‡ğŸ“–
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about-me">
                é—œæ–¼æˆ‘ğŸ£
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
ç§»æ¤è‡ª <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Yoziming
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®éŒ„ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%8c%e5%8f%b0-%e5%95%86%e5%93%81%e5%b1%ac%e6%80%a7" onclick="onNavClick(`#å¾Œå°-å•†å“å±¬æ€§-nav`)" id="å¾Œå°-å•†å“å±¬æ€§-nav">
									å¾Œå°-å•†å“å±¬æ€§
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e8%b3%87%e6%96%99%e5%ba%ab%e8%a1%a8%e7%9a%84%e5%90%8d%e8%a9%9e%e5%b0%8d%e6%87%89" onclick="onNavClick(`#è³‡æ–™åº«è¡¨çš„åè©å°æ‡‰-nav`)" id="è³‡æ–™åº«è¡¨çš„åè©å°æ‡‰-nav">
									è³‡æ–™åº«è¡¨çš„åè©å°æ‡‰
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%88%b6%e5%ad%90%e7%af%80%e9%bb%9e%e8%a8%8a%e6%81%af%e5%82%b3%e9%81%9e" onclick="onNavClick(`#çˆ¶å­ç¯€é»è¨Šæ¯å‚³é-nav`)" id="çˆ¶å­ç¯€é»è¨Šæ¯å‚³é-nav">
									çˆ¶å­ç¯€é»è¨Šæ¯å‚³é
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#bean%e8%bd%89json%e7%a9%ba%e5%88%a4%e6%96%b7" onclick="onNavClick(`#beanè½‰jsonç©ºåˆ¤æ–·-nav`)" id="beanè½‰jsonç©ºåˆ¤æ–·-nav">
									Beanè½‰JSONç©ºåˆ¤æ–·
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%9b%9e%e9%a1%af%e8%b3%87%e6%96%99" onclick="onNavClick(`#å›é¡¯è³‡æ–™-nav`)" id="å›é¡¯è³‡æ–™-nav">
									å›é¡¯è³‡æ–™
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%a8%a1%e7%b3%8a%e6%9f%a5%e8%a9%a2" onclick="onNavClick(`#æ¨¡ç³ŠæŸ¥è©¢-nav`)" id="æ¨¡ç³ŠæŸ¥è©¢-nav">
									æ¨¡ç³ŠæŸ¥è©¢
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%86%e9%a0%81%e6%8f%92%e4%bb%b6" onclick="onNavClick(`#åˆ†é æ’ä»¶-nav`)" id="åˆ†é æ’ä»¶-nav">
									åˆ†é æ’ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%97%9c%e8%81%af%e5%88%86%e9%a1%9e" onclick="onNavClick(`#é—œè¯åˆ†é¡-nav`)" id="é—œè¯åˆ†é¡-nav">
									é—œè¯åˆ†é¡
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%9b%b4%e6%96%b0%e5%86%97%e9%a4%98%e5%b1%ac%e6%80%a7" onclick="onNavClick(`#æ›´æ–°å†—é¤˜å±¬æ€§-nav`)" id="æ›´æ–°å†—é¤˜å±¬æ€§-nav">
									æ›´æ–°å†—é¤˜å±¬æ€§
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%85%88%e8%99%95%e7%90%86%e5%93%81%e7%89%8c%e5%90%8d" onclick="onNavClick(`#å…ˆè™•ç†å“ç‰Œå-nav`)" id="å…ˆè™•ç†å“ç‰Œå-nav">
									å…ˆè™•ç†å“ç‰Œå
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#xml%e7%b7%a8%e5%af%absql%e8%aa%9e%e5%8f%a5" onclick="onNavClick(`#xmlç·¨å¯«sqlèªå¥-nav`)" id="xmlç·¨å¯«sqlèªå¥-nav">
									xmlç·¨å¯«SQLèªå¥
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%a8%bb%e8%a7%a3%e4%ba%8b%e5%8b%99" onclick="onNavClick(`#è¨»è§£äº‹å‹™-nav`)" id="è¨»è§£äº‹å‹™-nav">
									è¨»è§£äº‹å‹™
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#vo%e9%a1%9e" onclick="onNavClick(`#voé¡-nav`)" id="voé¡-nav">
									Voé¡
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%96%b0%e5%a2%9e" onclick="onNavClick(`#æ–°å¢-nav`)" id="æ–°å¢-nav">
									æ–°å¢
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%9f%a5%e8%a9%a2" onclick="onNavClick(`#æŸ¥è©¢-nav`)" id="æŸ¥è©¢-nav">
									æŸ¥è©¢
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%b4%80%e9%8c%84%e4%b8%80%e5%80%8bdebug%e5%8d%8a%e5%a4%a9%e7%9a%84%e5%9d%91" onclick="onNavClick(`#ç´€éŒ„ä¸€å€‹debugåŠå¤©çš„å‘-nav`)" id="ç´€éŒ„ä¸€å€‹debugåŠå¤©çš„å‘-nav">
									ç´€éŒ„ä¸€å€‹debugåŠå¤©çš„å‘
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%bf%ae%e6%94%b9" onclick="onNavClick(`#ä¿®æ”¹-nav`)" id="ä¿®æ”¹-nav">
									ä¿®æ”¹
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/">
                    é¦–é ğŸ 
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    æ¨™ç±¤ğŸ·ï¸
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    ç³»åˆ—æ–‡ğŸ“–
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about-me">
                    é—œæ–¼æˆ‘ğŸ£
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®éŒ„ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%8c%e5%8f%b0-%e5%95%86%e5%93%81%e5%b1%ac%e6%80%a7" onclick="onNavClick(`#å¾Œå°-å•†å“å±¬æ€§-nav`)" id="å¾Œå°-å•†å“å±¬æ€§-nav">
									å¾Œå°-å•†å“å±¬æ€§
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e8%b3%87%e6%96%99%e5%ba%ab%e8%a1%a8%e7%9a%84%e5%90%8d%e8%a9%9e%e5%b0%8d%e6%87%89" onclick="onNavClick(`#è³‡æ–™åº«è¡¨çš„åè©å°æ‡‰-nav`)" id="è³‡æ–™åº«è¡¨çš„åè©å°æ‡‰-nav">
									è³‡æ–™åº«è¡¨çš„åè©å°æ‡‰
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%88%b6%e5%ad%90%e7%af%80%e9%bb%9e%e8%a8%8a%e6%81%af%e5%82%b3%e9%81%9e" onclick="onNavClick(`#çˆ¶å­ç¯€é»è¨Šæ¯å‚³é-nav`)" id="çˆ¶å­ç¯€é»è¨Šæ¯å‚³é-nav">
									çˆ¶å­ç¯€é»è¨Šæ¯å‚³é
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#bean%e8%bd%89json%e7%a9%ba%e5%88%a4%e6%96%b7" onclick="onNavClick(`#beanè½‰jsonç©ºåˆ¤æ–·-nav`)" id="beanè½‰jsonç©ºåˆ¤æ–·-nav">
									Beanè½‰JSONç©ºåˆ¤æ–·
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%9b%9e%e9%a1%af%e8%b3%87%e6%96%99" onclick="onNavClick(`#å›é¡¯è³‡æ–™-nav`)" id="å›é¡¯è³‡æ–™-nav">
									å›é¡¯è³‡æ–™
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%a8%a1%e7%b3%8a%e6%9f%a5%e8%a9%a2" onclick="onNavClick(`#æ¨¡ç³ŠæŸ¥è©¢-nav`)" id="æ¨¡ç³ŠæŸ¥è©¢-nav">
									æ¨¡ç³ŠæŸ¥è©¢
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%86%e9%a0%81%e6%8f%92%e4%bb%b6" onclick="onNavClick(`#åˆ†é æ’ä»¶-nav`)" id="åˆ†é æ’ä»¶-nav">
									åˆ†é æ’ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%97%9c%e8%81%af%e5%88%86%e9%a1%9e" onclick="onNavClick(`#é—œè¯åˆ†é¡-nav`)" id="é—œè¯åˆ†é¡-nav">
									é—œè¯åˆ†é¡
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%9b%b4%e6%96%b0%e5%86%97%e9%a4%98%e5%b1%ac%e6%80%a7" onclick="onNavClick(`#æ›´æ–°å†—é¤˜å±¬æ€§-nav`)" id="æ›´æ–°å†—é¤˜å±¬æ€§-nav">
									æ›´æ–°å†—é¤˜å±¬æ€§
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%85%88%e8%99%95%e7%90%86%e5%93%81%e7%89%8c%e5%90%8d" onclick="onNavClick(`#å…ˆè™•ç†å“ç‰Œå-nav`)" id="å…ˆè™•ç†å“ç‰Œå-nav">
									å…ˆè™•ç†å“ç‰Œå
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#xml%e7%b7%a8%e5%af%absql%e8%aa%9e%e5%8f%a5" onclick="onNavClick(`#xmlç·¨å¯«sqlèªå¥-nav`)" id="xmlç·¨å¯«sqlèªå¥-nav">
									xmlç·¨å¯«SQLèªå¥
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%a8%bb%e8%a7%a3%e4%ba%8b%e5%8b%99" onclick="onNavClick(`#è¨»è§£äº‹å‹™-nav`)" id="è¨»è§£äº‹å‹™-nav">
									è¨»è§£äº‹å‹™
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#vo%e9%a1%9e" onclick="onNavClick(`#voé¡-nav`)" id="voé¡-nav">
									Voé¡
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%96%b0%e5%a2%9e" onclick="onNavClick(`#æ–°å¢-nav`)" id="æ–°å¢-nav">
									æ–°å¢
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%9f%a5%e8%a9%a2" onclick="onNavClick(`#æŸ¥è©¢-nav`)" id="æŸ¥è©¢-nav">
									æŸ¥è©¢
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%b4%80%e9%8c%84%e4%b8%80%e5%80%8bdebug%e5%8d%8a%e5%a4%a9%e7%9a%84%e5%9d%91" onclick="onNavClick(`#ç´€éŒ„ä¸€å€‹debugåŠå¤©çš„å‘-nav`)" id="ç´€éŒ„ä¸€å€‹debugåŠå¤©çš„å‘-nav">
									ç´€éŒ„ä¸€å€‹debugåŠå¤©çš„å‘
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%bf%ae%e6%94%b9" onclick="onNavClick(`#ä¿®æ”¹-nav`)" id="ä¿®æ”¹-nav">
									ä¿®æ”¹
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://yoziming.github.io/">
            æŸšå­èŒ¶å®¤
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://yoziming.github.io/">
        <div class="single-column-header-title">æŸšå­èŒ¶å®¤</div>
        
        <div class="single-column-header-subtitle">ç´€éŒ„è‡ªå­¸å¤§å°äº‹</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://yoziming.github.io/images/gulimall.png')"
                    
                
            >
                <div class="post-title">
                    å¾Œå°-å•†å“å±¬æ€§ï¼Œå¤šå°å¤šéå¤–éµè¡¨æ“ä½œ
                    
                    <div class="post-subtitle">
                        SpringBootå¾®æœå‹™é …ç›®ç­†è¨˜-05
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2022-01-22 00:00
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/java%E5%BE%AE%E6%9C%8D%E5%8B%99%E5%B0%88%E6%A1%88">Javaå¾®æœå‹™å°ˆæ¡ˆ</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/java">Java</a>
                                &nbsp;
                            
                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h1 id="å¾Œå°-å•†å“å±¬æ€§">å¾Œå°-å•†å“å±¬æ€§</h1>
<blockquote>
<p>å…ˆèªè­˜åè©</p>
</blockquote>
<ul>
<li>SPUï¼ˆStandard Product Unitï¼‰
<ul>
<li>ã€Œæ¨™æº–ç”¢å“å–®ä½ã€ï¼Œæ˜¯å•†å“è³‡è¨Šèšåˆçš„æœ€å°å–®ä½ï¼Œæ˜¯ä¸€çµ„å¯è¤‡ç”¨ã€æ˜“æª¢ç´¢çš„æ¨™æº–åŒ–è³‡è¨Šçš„é›†åˆï¼Œè©²é›†åˆæè¿°äº†ä¸€å€‹ç”¢å“çš„ç‰¹æ€§ï¼Œä¾‹å¦‚: ã€ŒiPhone 13ã€</li>
</ul>
</li>
<li>SKUï¼ˆStock Keeping Unitï¼‰
<ul>
<li>ã€Œæœ€å°åº«å­˜å–®ä½ã€ï¼Œå°æ‡‰å…·é«”è¦æ ¼çš„å•†å“ï¼Œå³è²¨è™Ÿï¼ˆæˆ–æ–™è™Ÿï¼‰ï¼Œä¾‹å¦‚: ã€ŒiPhone 13(256G)ã€ã€ã€Œæ½®ç”·è¡é‹’è¡£-M-Blueã€</li>
</ul>
</li>
<li>æ—¢ç„¶æ˜¯å•†åŸé …ç›®ï¼Œç¾åœ¨éœ€è¦å‘ˆç¾å¹¾ç¨®é—œè¯:
<ul>
<li>é¸ä¸­ä¸€å€‹å“ç‰Œï¼Œä»–æœ‰å“ªäº›å“é …çš„ç”¢å“ï¼Œä¾‹å¦‚: è˜‹æœ:æ‰‹æ©Ÿã€å¹³æ¿&hellip;</li>
<li>é¸ä¸­ä¸€å€‹å“é …(åˆ†é¡)ï¼Œè£¡é¢æœ‰ä»–çš„è¦æ ¼ç­‰åƒæ•¸ï¼Œä¾‹å¦‚: æ‰‹æ©Ÿ{CPU:é«˜é€š880, å°ºå¯¸:6å‹&hellip;}</li>
<li>é¸ä¸­ä¸€å€‹SPUï¼Œä»–æœ‰é‚£äº›å…±é€šå±¬æ€§ï¼Œä¾‹å¦‚: iPhone 13çš„å» å•†éƒ½æ˜¯è˜‹æœã€ä½œæ¥­ç³»çµ±éƒ½æ˜¯IOS&hellip;</li>
<li>é¸ä¸­ä¸€å€‹SKUï¼Œæœ‰å“ªäº›ç¨ç‰¹å±¬æ€§ï¼Œä¾‹å¦‚: é¡è‰²ã€æœ‰å¤šå°‘åº«å­˜&hellip;</li>
<li>ä»¥ä¸Šæœ‰äº›æ˜¯å¤šå°å¤šçš„é—œä¿‚ï¼Œé‚„æŒºè¤‡é›œçš„ï¼Œä¸€ä¸€æ‹†è§£ä¾†å¯¦ç¾
<ul>
<li>æ¨™é¡Œå¤§ç¶±æ˜¯å­¸ç¿’çš„çŸ¥è­˜é»</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="è³‡æ–™åº«è¡¨çš„åè©å°æ‡‰">è³‡æ–™åº«è¡¨çš„åè©å°æ‡‰</h2>
<blockquote>
<p>æˆ‘ç›´åˆ°è·Ÿè‘—åšå®Œæ•´å€‹å•†å“ç®¡ç†ï¼Œæ‰å¼„æ¸…ä»–è³‡æ–™åº«è¨­è¨ˆèƒŒå¾Œçš„å•†æ¥­é‚è¼¯ï¼Œå› ç‚ºæ²’æœ‰å¤–éµåˆè¦å¤šå°å¤šé—œè¯ï¼Œæ•´å€‹æŒºè¤‡é›œçš„ï¼Œé€™å¡Šæ˜¯é›£é»</p>
</blockquote>
<ul>
<li>brand = å“ç‰Œï¼Œä¸€å€‹å“ç‰Œä¹‹ä¸‹å¯èƒ½å­˜åœ¨å¤šå€‹category
<ul>
<li>è˜‹æœ æœ‰ æ‰‹æ©Ÿã€å¹³æ¿</li>
</ul>
</li>
<li>åœ¨å“ç‰Œä¸­æ“ä½œé—œè¯ = æ“ä½œpms_category_brand_relation</li>
</ul>
<p><img src="image-20220116152328062.png" alt="image-20220116152328062"></p>
<ul>
<li>category = åˆ†é¡ï¼Œå“é …</li>
</ul>
<p><img src="image-20220116152104695.png" alt="image-20220116152104695"></p>
<ul>
<li>attr_group = å±¬æ€§åˆ†çµ„
<ul>
<li>éš¸å±¬æ–¼æŸå€‹categoryä¹‹ä¸‹</li>
<li>ä¾‹å¦‚: æ‰‹æ©Ÿçš„åŸºæœ¬ä¿¡æ¯é›†åˆ(è£¡é¢æœ‰é•·å¯¬ã€å¤§å°ã€æè³ªç­‰ç­‰)</li>
</ul>
</li>
</ul>
<p><img src="image-20220116153732943.png" alt="image-20220116153732943"></p>
<ul>
<li>attr = å±¬æ€§
<ul>
<li>éš¸å±¬æ–¼æŸå€‹categoryä¹‹ä¸‹ï¼Œä¾‹å¦‚: æ‰‹æ©Ÿçš„å¤–æ®¼æœ‰ç™½è‰²ã€é»‘è‰²</li>
<li>å…¶ä¸­attr_type = 1 è¡¨ç¤ºåŸºæœ¬å±¬æ€§(è¦æ ¼åƒæ•¸)ï¼Œä¾‹å¦‚: ä¸‰æ˜ŸS21çš„å……é›»å£æ˜¯typeC(æ¯å€‹å‹è™Ÿéƒ½ä¸€æ¨£)</li>
<li>å…¶ä¸­attr_type = 0 è¡¨ç¤ºéŠ·å”®å±¬æ€§ï¼Œä¾‹å¦‚å“€é³³13çš„é¡è‰²(æœ‰å¤šç¨®å°æ‡‰çš„è²¨è™Ÿ)</li>
</ul>
</li>
</ul>
<p><img src="image-20220116154240270.png" alt="image-20220116154240270"></p>
<ul>
<li>å±¬æ€§ä¸ä¸€å®šæœ‰åˆ†çµ„ï¼Œå› ç‚ºä»–å»ºç«‹çš„æ™‚å€™ä¸ä¸€å®šè¦å¡«</li>
<li>å»ºç«‹é—œè¯å°±æ˜¯æ“ä½œpms_attr_attrgroup_relationé€™å¼µè¡¨
<ul>
<li>å¯ä»¥åœ¨è¦æ ¼åƒæ•¸é é¢ä¸­å°æŸæ¢åƒæ•¸ä¿®æ”¹ï¼ŒæŒ‡å®šä»–å±¬æ–¼æŸåˆ†çµ„</li>
<li>ä¹Ÿå¯ä»¥åœ¨åˆ†çµ„é é¢ä¸­å°‡åŒå“é …æœªç´å…¥åˆ†çµ„çš„å±¬æ€§é—œè¯åˆ°æ——ä¸‹</li>
</ul>
</li>
</ul>
<h2 id="çˆ¶å­ç¯€é»è¨Šæ¯å‚³é">çˆ¶å­ç¯€é»è¨Šæ¯å‚³é</h2>
<ul>
<li>é¦–å…ˆå¾å“é …å‡ºç™¼ï¼Œè¦å‘ˆç¾çš„æ•ˆæœæ˜¯é€™æ¨£</li>
</ul>
<p><img src="image-20220114214047979.png" alt="image-20220114214047979"></p>
<ul>
<li>
<p>å·¦é‚Šçš„å“é …ä¸‰ç´šåˆ†é¡ç›´æ¥æ‹¿å…ˆå‰åšå¥½çš„ä¾†ç”¨</p>
</li>
<li>
<p>attrgroupæ˜¯çˆ¶ç¯€é»ï¼Œå¼•ç”¨äº†<code>&quot;../common/category&quot;</code>ç”¨ä¾†é¡¯ç¤ºä¸‰ç´šåˆ†é¡</p>
<ul>
<li><code>../</code>è¡¨ç¤ºä¸Šä¸€å±¤</li>
<li><code>./</code>è¡¨ç¤ºåŒå±¤</li>
</ul>
</li>
</ul>
<p><img src="image-20220114174101734.png" alt="image-20220114174101734"></p>
<ul>
<li>è³‡æ–™å‘ˆç¾æ˜¯æ²’å•é¡Œï¼Œç„¶è€Œé€™é‚Šé‚„éœ€è¦äº’å‹•ï¼Œæ‰€ä»¥æ˜¯è·¨ç¯€é»äº‹ä»¶</li>
</ul>
<p><img src="image-20220114175105375.png" alt="image-20220114175105375"></p>
<ul>
<li>åœ¨categoryå­ç¯€é»ç¶å®šé»æ“Šäº‹ä»¶ï¼Œä¸¦ä¸”ç”¨<code>this.$emit</code>å‚³éå‡ºå»</li>
</ul>
<pre tabindex="0"><code>this.$emit(&#34;è‡ªè¨‚äº‹ä»¶å&#34;,å‚³éçš„è³‡æ–™...)
</code></pre><p><img src="image-20220114174338462.png" alt="image-20220114174338462"></p>
<ul>
<li>å›åˆ°attrgroupçˆ¶ç¯€é»ï¼Œç”±æ–¼ä¸€é–‹å§‹å°±importäº†ï¼Œå¯ä»¥ç›´æ¥èª¿ç”¨å‰›å‰›è‡ªè¨‚çš„äº‹ä»¶å<code>tree-node-click</code></li>
<li>ä¸¦ä¸”ç¶å®šä¸€å€‹é‡æ–°æŸ¥è©¢çš„å‹•ä½œ(å¾å­ç¯€é»å‚³ä¾†çš„dataæ‹¿åˆ°Idï¼Œä¸¦èª¿ç”¨getæ–¹æ³•å¾—åˆ°è³‡è¨Š)</li>
</ul>
<p><img src="image-20220114174528813.png" alt="image-20220114174528813"></p>
<ul>
<li>åˆæ­¥å®ŒæˆåŠŸèƒ½ï¼Œæ¥è‘—å®Œå–„æ–°å¢ä¿®æ”¹ï¼Œç›®æ¨™é è¦½:</li>
</ul>
<p><img src="image-20220114214159788.png" alt="image-20220114214159788"></p>
<h2 id="beanè½‰jsonç©ºåˆ¤æ–·">Beanè½‰JSONç©ºåˆ¤æ–·</h2>
<ul>
<li>
<p>æŸ¥è©¢å­åˆ†é¡childrenï¼Œåˆ°äº†ç¬¬ä¸‰ç´šä»–çš„childrenæ˜¯<code>[]</code>ï¼Œå°è‡´å‡ºç¾ç©ºç™½çš„ä¸‹ç´šåˆ†é¡</p>
</li>
<li>
<p>ä½¿ç”¨<code>@JsonInclude</code>ï¼Œè®“è¿”å›çµæœæ™‚å¦‚æœæ˜¯ç©ºæ™‚ï¼Œä¸å‚³ä¸€å€‹ç©ºçš„<code>[]</code>éå»</p>
<ul>
<li>NON_EMPTYå°±åŒ…å«NON_NULL</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@TableField</span>(exist = <span style="color:#8b008b;font-weight:bold">false</span>)
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@JsonInclude</span>(JsonInclude.<span style="color:#658b00">Include</span>.<span style="color:#658b00">NON_EMPTY</span>)
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">private</span> List&lt;CategoryEntity&gt; children;
</span></span></code></pre></div><h2 id="å›é¡¯è³‡æ–™">å›é¡¯è³‡æ–™</h2>
<ul>
<li>ç•¶åœ¨é é¢ä¸Šé»æ–°å¢æˆ–ä¿®æ”¹æ™‚æœƒè§¸ç™¼äº‹ä»¶ï¼Œèª¿ç”¨å®ƒçš„å­æ¨¡çµ„xxx-add-or-updateï¼Œé»é–‹ä¾†çœ‹è£¡é¢æœƒæœ‰ä¸€å€‹initæ–¹æ³•ï¼Œå¾é€™é‚Šç™¼èµ·è«‹æ±‚çµ¦å¾Œç«¯</li>
</ul>
<p><img src="image-20220114213624976.png" alt="image-20220114213624976"></p>
<ul>
<li>åœ¨AttrGroupä¸­å¢åŠ ä¸€å€‹è¡¨ç¤ºè·¯å¾‘çš„å±¬æ€§</li>
</ul>
<p><img src="image-20220114211504934.png" alt="image-20220114211504934"></p>
<ul>
<li>AttrGroupController</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@RequestMapping</span>(<span style="color:#cd5555">&#34;/info/{attrGroupId}&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> R <span style="color:#008b45">info</span>(<span style="color:#707a7c">@PathVariable</span>(<span style="color:#cd5555">&#34;attrGroupId&#34;</span>) Long attrGroupId) {
</span></span><span style="display:flex;"><span>    AttrGroupEntity attrGroup = attrGroupService.<span style="color:#658b00">getById</span>(attrGroupId);
</span></span><span style="display:flex;"><span>    Long catelogId = attrGroup.<span style="color:#658b00">getCatelogId</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æ‰¾å‡ºå•†å“å±¬æ€§æ‰€åœ¨çš„è·¯å¾‘(é›»å™¨-å¤§å®¶é›»-é›»è¦–)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    Long[] path = categoryService.<span style="color:#658b00">findCatalogPath</span>(catelogId);
</span></span><span style="display:flex;"><span>    attrGroup.<span style="color:#658b00">setCatalogPath</span>(path);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> R.<span style="color:#658b00">ok</span>().<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;attrGroup&#34;</span>, attrGroup);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p>æ³¨æ„æ˜¯åœ¨AttrGroupä¸­èª¿ç”¨categoryService</p>
</li>
<li>
<p>categoryServiceImpl</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span> <span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * æ‰¾å‡ºå•†å“å±¬æ€§æ‰€åœ¨çš„è·¯å¾‘(é›»å™¨-å¤§å®¶é›»-é›»è¦–)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     *
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param catelogId
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> Long[] <span style="color:#008b45">findCatalogPath</span>(Long catelogId) {
</span></span><span style="display:flex;"><span>        List&lt;Long&gt; paths = <span style="color:#8b008b;font-weight:bold">new</span> ArrayList&lt;&gt;();
</span></span><span style="display:flex;"><span>        List&lt;Long&gt; parentPath = findParentPath(catelogId, paths);
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// æ‰¾çš„æ˜¯å¾å­å‡ºç™¼ï¼Œæ‰€ä»¥é‚„è¦é€†è½‰
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        Collections.<span style="color:#658b00">reverse</span>(parentPath);
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> parentPath.<span style="color:#658b00">toArray</span>(<span style="color:#8b008b;font-weight:bold">new</span> Long[parentPath.<span style="color:#658b00">size</span>()]);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * æ‰¾å‡ºæ‰€æœ‰çˆ¶path
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     *
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param catelogId
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param paths
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> List&lt;Long&gt; <span style="color:#008b45">findParentPath</span>(Long catelogId, List&lt;Long&gt; paths) {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// å…ˆæ”¾é€²ç•¶å‰çš„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        paths.<span style="color:#658b00">add</span>(catelogId);
</span></span><span style="display:flex;"><span>        CategoryEntity byId = <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">getById</span>(catelogId);
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">if</span> (byId.<span style="color:#658b00">getParentCid</span>() != 0) {
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// éæ­¸æœ
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            findParentPath(byId.<span style="color:#658b00">getParentCid</span>(), paths);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> paths;
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h2 id="æ¨¡ç³ŠæŸ¥è©¢">æ¨¡ç³ŠæŸ¥è©¢</h2>
<ul>
<li>å“ç‰Œç®¡ç†ç›´æ¥å°å…¥é é¢ï¼Œå®Œæˆä¸€å€‹ç°¡å–®çš„æŸ¥è©¢ç¯©é¸åŠŸèƒ½</li>
</ul>
<p><img src="image-20220114220827080.png" alt="image-20220114220827080"></p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> PageUtils <span style="color:#008b45">queryPage</span>(Map&lt;String, Object&gt; params) {
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æ¨¡ç³ŠæŸ¥è©¢
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    String key = (String) params.<span style="color:#658b00">get</span>(<span style="color:#cd5555">&#34;key&#34;</span>);
</span></span><span style="display:flex;"><span>    QueryWrapper&lt;BrandEntity&gt; qw = <span style="color:#8b008b;font-weight:bold">new</span> QueryWrapper&lt;&gt;();
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">if</span> (!StringUtils.<span style="color:#658b00">isEmpty</span>(key)) {
</span></span><span style="display:flex;"><span>        qw.<span style="color:#658b00">and</span>((obj) -&gt; {
</span></span><span style="display:flex;"><span>            obj.<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;brand_id&#34;</span>, key).<span style="color:#658b00">or</span>().<span style="color:#658b00">like</span>(<span style="color:#cd5555">&#34;name&#34;</span>, key);
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    IPage&lt;BrandEntity&gt; page = <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">page</span>(
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">new</span> Query&lt;BrandEntity&gt;().<span style="color:#658b00">getPage</span>(params), qw);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> PageUtils(page);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="åˆ†é æ’ä»¶">åˆ†é æ’ä»¶</h2>
<blockquote>
<p>å®˜æ–¹ <a href="https://baomidou.com/pages/2976a3/#spring">https://baomidou.com/pages/2976a3/#spring</a></p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@EnableTransactionManagement</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@MapperScan</span>(basePackages = <span style="color:#cd5555">&#34;yozi.mall.**.dao&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MyBatisPlusConfig</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * æ’ä»¶é›†åˆ
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> MybatisPlusInterceptor <span style="color:#008b45">mybatisPlusInterceptor</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// æ’ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        MybatisPlusInterceptor interceptor = <span style="color:#8b008b;font-weight:bold">new</span> MybatisPlusInterceptor();
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// åˆ†é æ’ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        PaginationInnerInterceptor paginationInnerInterceptor = <span style="color:#8b008b;font-weight:bold">new</span> PaginationInnerInterceptor(DbType.<span style="color:#658b00">MYSQL</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// æ·»åŠ åˆ†é æ’ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        interceptor.<span style="color:#658b00">addInnerInterceptor</span>(paginationInnerInterceptor);
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> interceptor;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="é—œè¯åˆ†é¡">é—œè¯åˆ†é¡</h2>
<ul>
<li>å“ç‰Œèˆ‡å“é …æ˜¯å¤šå°å¤šçš„é—œä¿‚ï¼Œä¾‹å¦‚å“ç‰Œè˜‹æœå°æ‡‰å“é …æ‰‹æ©Ÿã€å¹³æ¿ï¼›å“é …æ‰‹æ©Ÿå°æ‡‰è¨±å¤šå» ç‰Œ</li>
</ul>
<p><img src="image-20220114222344156.png" alt="image-20220114222344156"></p>
<ul>
<li>å¤šå°å¤šï¼Œæ‰€ä»¥è³‡æ–™åº«æœ‰ä¸­é–“è¡¨</li>
</ul>
<p><img src="image-20220114222519902.png" alt="image-20220114222519902"></p>
<ul>
<li>CategoryBrandRelationController.java</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JAVA" data-lang="JAVA"><span style="display:flex;"><span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * å¾å“ç‰Œç²å–é—œè¯å“é …åˆ—è¡¨
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@GetMapping</span>(<span style="color:#cd5555">&#34;/catelog/list&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> R <span style="color:#008b45">catelogList</span>(<span style="color:#707a7c">@RequestParam</span>(<span style="color:#cd5555">&#34;brandId&#34;</span>) Long brandId) {
</span></span><span style="display:flex;"><span>    List&lt;CategoryBrandRelationEntity&gt; data =
</span></span><span style="display:flex;"><span>            categoryBrandRelationService.<span style="color:#658b00">list</span>(<span style="color:#8b008b;font-weight:bold">new</span> QueryWrapper&lt;CategoryBrandRelationEntity&gt;().<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;brand_id&#34;</span>,
</span></span><span style="display:flex;"><span>                    brandId));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> R.<span style="color:#658b00">ok</span>().<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;data&#34;</span>, data);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>å› ç‚ºæ–°å¢çš„apiå‰ç«¯åªå‚³ä¾†å“ç‰Œidè·Ÿå“é …idï¼Œå¾Œç«¯é‚„å¾—è‡ªå·±å»æ‰¾å“ç‰Œåã€å“é …å
<ul>
<li>ç‚ºä½•ä¸åœ¨è³‡æ–™åº«å¤–éµé€£è¡¨?</li>
<li>æ¯”å¦‚æ·˜å¯¶é€™ç¨®å¤§é›»å•†ï¼Œå‡å¦‚å“ç‰Œ10è¬å€‹ï¼Œå“é …100è¬å€‹ï¼Œç”¨å¤–éµç¬›å¡çˆ¾ç©æœƒé«˜çš„åš‡äººæ‹–å®è³‡æºï¼Œforå¾ªç’°æŸ¥è¡¨Næ¬¡ç›¸è¼ƒä¹‹ä¸‹å¾®ä¸è¶³é“ï¼Œåªèƒ½èªªå…©å®³ç›¸æ¬Šå–å…¶è¼•</li>
<li>ä¸€èˆ¬ä¾†èªªå¯¦å‹™ä¸Šéƒ½æ˜¯ç¦æ­¢ä½¿ç”¨å¤–éµçš„(é‚£ä¹‹å‰é‚„å­¸å€‹æ¯›left join å“­é˜¿)</li>
</ul>
</li>
</ul>
<p><img src="image-20220114224604927.png" alt="image-20220114224604927"></p>
<ul>
<li>å®Œæˆ</li>
</ul>
<p><img src="image-20220114225005472.png" alt="image-20220114225005472"></p>
<h2 id="æ›´æ–°å†—é¤˜å±¬æ€§">æ›´æ–°å†—é¤˜å±¬æ€§</h2>
<ul>
<li>å‰é¢ç”¨å¤šé¤˜çš„æŸ¥è©¢æ–¹å¼å»ç²å–å“ç‰Œåã€å“é …åï¼Œé›–ç„¶çœä¸‹äº†å¤–éµçš„æ¶ˆè€—ï¼Œä½†æ˜¯æœ‰éš±æ‚£ï¼Œå°±æ˜¯æ›´æ–°å“ç‰Œåç¨±æˆ–å“é …åï¼Œå°±è¦é€£ä¸­é–“è¡¨è£¡é¢çš„å“ç‰Œåã€å“é …åä¸€èµ·æ›´æ–°</li>
</ul>
<h3 id="å…ˆè™•ç†å“ç‰Œå">å…ˆè™•ç†å“ç‰Œå</h3>
<p><img src="image-20220114225513176.png" alt="image-20220114225513176"></p>
<ul>
<li>BrandServiceImpl</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * å†—é¤˜çš„å“ç‰Œåã€å“é …åæ›´æ–°
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     *
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param brand
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">updateDetail</span>(BrandEntity brand) {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// å…ˆæ›´æ–°è‡ªå·±
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">updateById</span>(brand);
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// å¦‚æœæœ‰æ›´å‹•å“ç‰Œå
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">if</span> (!StringUtils.<span style="color:#658b00">isEmpty</span>(brand.<span style="color:#658b00">getName</span>())) {
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// æ›´æ–°è³‡æ–™åº«è¡¨ä¸­æ‰€æœ‰èˆŠçš„å“ç‰Œå
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            categoryBrandRelationService.<span style="color:#658b00">updateBrand</span>(brand.<span style="color:#658b00">getBrandId</span>(), brand.<span style="color:#658b00">getName</span>());
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// TODO æ›´æ–°å…¶ä»–é—œè¯
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><ul>
<li>æ³¨æ„æ˜¯å¾Brandèª¿ç”¨CategoryBrandRelationService
<ul>
<li>CategoryBrandRelationServiceImpl</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">updateBrand</span>(Long brandId, String name) {
</span></span><span style="display:flex;"><span>    CategoryBrandRelationEntity categoryBrandRelationEntity = <span style="color:#8b008b;font-weight:bold">new</span> CategoryBrandRelationEntity();
</span></span><span style="display:flex;"><span>    categoryBrandRelationEntity.<span style="color:#658b00">setBrandId</span>(brandId);
</span></span><span style="display:flex;"><span>    categoryBrandRelationEntity.<span style="color:#658b00">setBrandName</span>(name);
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æ›´æ–°è³‡æ–™åº«è¡¨ä¸­æ‰€æœ‰èˆŠçš„å“ç‰Œå
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">update</span>(categoryBrandRelationEntity, <span style="color:#8b008b;font-weight:bold">new</span> UpdateWrapper&lt;CategoryBrandRelationEntity&gt;()
</span></span><span style="display:flex;"><span>            .<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;brand_id&#34;</span>, brandId));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="xmlç·¨å¯«sqlèªå¥">xmlç·¨å¯«SQLèªå¥</h3>
<blockquote>
<p>æ‰¿ä¸Šï¼Œå“é …åç¨±ä¹Ÿè¦æ”¹</p>
</blockquote>
<ul>
<li>CategoryControllerä¹Ÿè¦æ”¹</li>
</ul>
<p><img src="image-20220114231726896.png" alt="image-20220114231726896"></p>
<ul>
<li>CategoryServiceImpl
<ul>
<li>é€™è£¡æ›å€‹èŠ±æ¨£ï¼Œä¸æ˜¯ç”¨UpdateWrapperï¼Œæ›è‡ªå·±é€ ä¸€å€‹åŸ·è¡Œsqlèªå¥çš„æ–¹æ³•</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">updateCascade</span>(CategoryEntity category) {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">updateById</span>(category);
</span></span><span style="display:flex;"><span>    categoryBrandRelationService.<span style="color:#658b00">updateCategory</span>(category.<span style="color:#658b00">getCatId</span>(),category.<span style="color:#658b00">getName</span>() );
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>IDEAå®‰è£MybatisXæ’ä»¶ï¼Œåœ¨DAOå¯ä»¥çœ‹åˆ°é€™å€‹é³¥å…’</li>
</ul>
<p><img src="image-20220114232816525.png" alt="image-20220114232816525"></p>
<ul>
<li>alt + enter é»ä¸€ä¸‹è·³åˆ°xmlï¼Œå·²ç¶“è‡ªå‹•ç”Ÿæˆå¥½å¾…ç¶å®šçš„æ–¹æ³•ï¼Œè‡ªå·±å¡«å…¥SQLèªå¥</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;update</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;updateCategory&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    UPDATE pms_category_brand_relation
</span></span><span style="display:flex;"><span>    SET catelog_name= #{name}
</span></span><span style="display:flex;"><span>    WHERE catelog_id = #{catId}
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;/update&gt;</span>
</span></span></code></pre></div><ul>
<li>å›åˆ°DAOç”¨<code>@Param(&quot;è®Šæ•¸å&quot;)</code>ç¶å®šxmlä¸­çš„<code>#{è®Šæ•¸å}</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Mapper</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">CategoryBrandRelationDao</span> <span style="color:#8b008b;font-weight:bold">extends</span> BaseMapper&lt;CategoryBrandRelationEntity&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">updateCategory</span>(<span style="color:#707a7c">@Param</span>(<span style="color:#cd5555">&#34;catId&#34;</span>) Long catId, <span style="color:#707a7c">@Param</span>(<span style="color:#cd5555">&#34;name&#34;</span>) String name);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="è¨»è§£äº‹å‹™">è¨»è§£äº‹å‹™</h3>
<ul>
<li>æœ€å¾Œç‚ºäº†ç¢ºä¿æ›´æ–°æˆåŠŸï¼Œé‚„è¦åŠ ä¸Šäº‹å‹™è¨»è§£ï¼Œå¿…é ˆå…ˆåˆ°MyBatisPlusConfigé–‹å•ŸåŠŸèƒ½<code>@EnableTransactionManagement</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#228b22">// MyBatisPlusConfig
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#707a7c">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@EnableTransactionManagement</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@MapperScan</span>(basePackages = <span style="color:#cd5555">&#34;yozi.mall.**.dao&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MyBatisPlusConfig</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">// CategoryServiceImpl
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#707a7c">@Transactional</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">updateCascade</span>(CategoryEntity category) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">// BrandServiceImpl
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#707a7c">@Transactional</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">updateDetail</span>(BrandEntity brand) {
</span></span></code></pre></div><h2 id="voé¡">Voé¡</h2>
<ul>
<li>ç¾åœ¨ä¾†åˆ°è¦æ ¼åƒæ•¸ï¼Œè³‡æ–™åº«ä¸­<code>pms_attr</code>é€™å¼µè¡¨ï¼Œä¿å­˜çš„æ˜¯é€™äº›è³‡æ–™</li>
</ul>
<p><img src="image-20220115100359811.png" alt="image-20220115100359811"></p>
<ul>
<li>å› ç‚ºéƒ½æ˜¯å¤šå°å¤šé—œè¯ï¼Œæ‰€ä»¥Entityä¸­æ ¹æ“šè³‡æ–™åº«è¡¨ç”Ÿæˆçš„å±¬æ€§è‚¯å®šæ˜¯ä¸å¤ ç”¨çš„ï¼Œé‚„è¦æœ‰èƒ½å¤ è¡¨ç¤ºå¤–éµé—œè¯çš„é¡å¤–å±¬æ€§</li>
<li>ç”¨èˆŠæ–¹æ³•å¯ä»¥åœ¨AttrEntityæ–°å¢ä¸€å€‹å±¬æ€§ç„¶å¾Œè²æ˜<code>@TableField(exist = false)</code>ï¼Œä½†é€™éº¼åšä¹…äº†æœƒå¾ˆäº‚</li>
<li>æ–¼æ˜¯å°±è¦ä½¿ç”¨VOï¼ŒVOç°¡å–®ä¾†èªªå°±æ˜¯å°ˆé–€æ‡‰ä»˜å‰ç«¯çš„éœ€æ±‚ï¼Œç”¨ä¾†æ¥æ”¶ajaxå‚³éçš„dataæˆ–è¿”å›æŸ¥è©¢çµæœç”¨</li>
</ul>
<h3 id="æ–°å¢">æ–°å¢</h3>
<ul>
<li>å‰ç«¯çš„APIæ˜¯é€™æ¨£</li>
</ul>
<p><img src="image-20220115101222051.png" alt="image-20220115101222051"></p>
<ul>
<li>
<p>é¡¯ç„¶æœ¬ä¾†çš„AttrEntityæ˜¯æ²’æœ‰attrGroupIdé€™å€‹æ¬„ä½çš„ï¼Œæ‰€ä»¥å¿…é ˆé€ ä¸€å€‹AttrVoï¼Œä»–è·ŸAttrEntityä¸€æ¨£ï¼Œä½†å¤šäº†<code>private Long attrGroupId;</code></p>
</li>
<li>
<p>ä¿®æ”¹ä¿å­˜æ–¹æ³•</p>
</li>
</ul>
<p><img src="image-20220115011445868.png" alt="image-20220115011445868"></p>
<ul>
<li>AttrServiceImpl
<ul>
<li>æ³¨æ„é€™é‚Šæ˜¯åˆ†å…©æ­¥é©Ÿï¼Œæœ¬ä¾†çš„attrEntityä¸€æ¨£å­˜çµ¦ä»–æœ¬ä¾†çš„è¡¨</li>
<li>ä¸‹é¢é¡å¤–ä¿å­˜é—œè¯é—œä¿‚ï¼Œèª¿ç”¨çš„æ˜¯AttrAttrgroupRelationDaoçš„insert</li>
</ul>
</li>
</ul>
<p><img src="image-20220115012331942.png" alt="image-20220115012331942"></p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Transactional</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">saveAttr</span>(AttrVo attr) {
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// å…ˆä¿å­˜åŸºæœ¬è³‡æ–™
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    AttrEntity attrEntity = <span style="color:#8b008b;font-weight:bold">new</span> AttrEntity();
</span></span><span style="display:flex;"><span>    BeanUtils.<span style="color:#658b00">copyProperties</span>(attr, attrEntity);
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">save</span>(attrEntity);
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// ä¿å­˜é—œè¯é—œä¿‚
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    AttrAttrgroupRelationEntity relationEntity = <span style="color:#8b008b;font-weight:bold">new</span> AttrAttrgroupRelationEntity();
</span></span><span style="display:flex;"><span>    relationEntity.<span style="color:#658b00">setAttrGroupId</span>(attr.<span style="color:#658b00">getAttrGroupId</span>());
</span></span><span style="display:flex;"><span>    relationEntity.<span style="color:#658b00">setAttrId</span>(attrEntity.<span style="color:#658b00">getAttrId</span>());
</span></span><span style="display:flex;"><span>    relationDao.<span style="color:#658b00">insert</span>(relationEntity);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="æŸ¥è©¢">æŸ¥è©¢</h3>
<blockquote>
<p>é›£é»ï¼Œé‡é»çŸ¥è­˜æµå¼è™•ç†ã€ç„¡å¤–éµå¤šé—œè¯è¡¨çš„æŸ¥è©¢è¿”å›</p>
</blockquote>
<ul>
<li>å‰ç«¯çš„API</li>
</ul>
<p><img src="image-20220115101509373.png" alt="image-20220115101509373"></p>
<ul>
<li>ç‚ºäº†çµ¦å‰ç«¯è¿”å›çµæœï¼Œå†é€ ä¸€å€‹AttrRespVo</li>
</ul>
<p><img src="image-20220115115338585.png" alt="image-20220115115338585"></p>
<ul>
<li>AttrController</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * è¦æ ¼åƒæ•¸åˆ—è¡¨
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@GetMapping</span>(<span style="color:#cd5555">&#34;/base/list/{catelogId}&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#228b22">//@RequiresPermissions(&#34;product:attr:list&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> R <span style="color:#008b45">baseAttrList</span>(<span style="color:#707a7c">@RequestParam</span> Map&lt;String, Object&gt; params,
</span></span><span style="display:flex;"><span>                      <span style="color:#707a7c">@PathVariable</span>(<span style="color:#cd5555">&#34;catelogId&#34;</span>) Long catelogId) {
</span></span><span style="display:flex;"><span>    PageUtils page = attrService.<span style="color:#658b00">queryBasePageCatelogId</span>(params, catelogId);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> R.<span style="color:#658b00">ok</span>().<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;page&#34;</span>, page);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>AttrServiceImpl
<ul>
<li>é€™å€‹å°±è¤‡é›œäº†ï¼Œè¦å…ˆæŸ¥å‡ºè‡ªå·±æœ¬ä¾†çš„ï¼Œç„¶å¾Œæ‹¿CatelogIdå»é—œè¯è¡¨ã€catelogNameã€groupName</li>
</ul>
</li>
</ul>
<p><img src="image-20220115095914398.png" alt="image-20220115095914398"></p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> PageUtils <span style="color:#008b45">queryBasePageCatelogId</span>(Map&lt;String, Object&gt; params, Long catelogId) {
</span></span><span style="display:flex;"><span>    QueryWrapper&lt;AttrEntity&gt; qw = <span style="color:#8b008b;font-weight:bold">new</span> QueryWrapper&lt;&gt;();
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æŒ‡å®šä¸‰ç´šåˆ†é¡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">if</span> (catelogId != 0) {
</span></span><span style="display:flex;"><span>        qw.<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;catelog_id&#34;</span>, catelogId);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æœ‰æŸ¥è©¢æ¢ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    String key = (String) params.<span style="color:#658b00">get</span>(<span style="color:#cd5555">&#34;key&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">if</span> (!StringUtils.<span style="color:#658b00">isEmpty</span>(key)) {
</span></span><span style="display:flex;"><span>        qw.<span style="color:#658b00">and</span>((obj) -&gt; {
</span></span><span style="display:flex;"><span>            obj.<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;attr_id&#34;</span>, key).<span style="color:#658b00">or</span>().<span style="color:#658b00">like</span>(<span style="color:#cd5555">&#34;attr_name&#34;</span>, key);
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    IPage&lt;AttrEntity&gt; page = <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">page</span>(
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">new</span> Query&lt;AttrEntity&gt;().<span style="color:#658b00">getPage</span>(params), qw);
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// åˆ°é€™é‚ŠæŸ¥å®ŒAttråŸºæœ¬è¨Šæ¯ï¼ŒæŠŠé æ•¸ç¸½æ•¸é‚£äº›å•¥çš„ç”¨PageUtilså°è£èµ·ä¾†
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    PageUtils pageUtils = <span style="color:#8b008b;font-weight:bold">new</span> PageUtils(page);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// ä½†æ˜¯å…§å®¹ç‰©é‚„æ²’å®Œï¼Œå°‡æŸ¥åˆ°çš„ç´€éŒ„ä¸€ç­†ç­†æ‹¿å‡ºä¾†ï¼Œæ‰¾ä»–å€‘çš„catelogNameèˆ‡groupName
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    List&lt;AttrEntity&gt; records = page.<span style="color:#658b00">getRecords</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æµå¼ï¼ŒæŠŠä¸€ç­†ç­†è³‡æ–™ç•¶æ°´æµï¼Œéå®Œç®¡é“å°±è™•ç†å®Œäº†
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    List&lt;AttrRespVo&gt; respVos = records.<span style="color:#658b00">stream</span>().<span style="color:#658b00">map</span>(attrEntity -&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// æŠ“å‡ºè£¡é¢çš„attrEntityï¼Œæ‹·è²åˆ°AttrRespVoä¸Š
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        AttrRespVo attrRespVo = <span style="color:#8b008b;font-weight:bold">new</span> AttrRespVo();
</span></span><span style="display:flex;"><span>        BeanUtils.<span style="color:#658b00">copyProperties</span>(attrEntity, attrRespVo);
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// å»é—œè¯è¡¨æ‹¿relationEntityï¼Œç”¨ä¾†æ‰¾åˆ°AttrGroupIdï¼Œæ³¨æ„æ˜¯selectOne
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        AttrAttrgroupRelationEntity relationEntity =
</span></span><span style="display:flex;"><span>                relationDao.<span style="color:#658b00">selectOne</span>(<span style="color:#8b008b;font-weight:bold">new</span> QueryWrapper&lt;AttrAttrgroupRelationEntity&gt;().<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;attr_id&#34;</span>,
</span></span><span style="display:flex;"><span>                        attrEntity.<span style="color:#658b00">getAttrId</span>()));
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// æ‹¿åˆ°groupNameåˆ†çµ„å: ä¸»é«”ã€è¢å¹•ç­‰
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">if</span> (relationEntity != <span style="color:#8b008b;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            AttrGroupEntity attrGroupEntity = attrGroupDao.<span style="color:#658b00">selectById</span>(relationEntity.<span style="color:#658b00">getAttrGroupId</span>());
</span></span><span style="display:flex;"><span>            attrRespVo.<span style="color:#658b00">setGroupName</span>(attrGroupEntity.<span style="color:#658b00">getAttrGroupName</span>());
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// æ‹¿åˆ°catelogNameåˆ†é¡å(é›»å™¨-å¤§å®¶é›»-&#34;é›»è¦–&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        CategoryEntity categoryEntity = categoryDao.<span style="color:#658b00">selectById</span>(attrEntity.<span style="color:#658b00">getCatelogId</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">if</span> (categoryEntity != <span style="color:#8b008b;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            attrRespVo.<span style="color:#658b00">setCatelogName</span>(categoryEntity.<span style="color:#658b00">getName</span>());
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> attrRespVo;
</span></span><span style="display:flex;"><span>    }).<span style="color:#658b00">collect</span>(Collectors.<span style="color:#658b00">toList</span>()); <span style="color:#228b22">// æ¥èµ·è™•ç†å®Œçš„æµï¼Œè£åˆ°List&lt;AttrRespVo&gt; respVos
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æŠŠå¤šè³¦å¥½2å€‹å±¬æ€§çš„listå¡å›å»
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    pageUtils.<span style="color:#658b00">setList</span>(respVos);
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> pageUtils;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="ç´€éŒ„ä¸€å€‹debugåŠå¤©çš„å‘">ç´€éŒ„ä¸€å€‹debugåŠå¤©çš„å‘</h4>
<ul>
<li>å› ç‚ºé€™å€‹åŠŸèƒ½å¤–é€£åˆ°å…¶ä»–è¡¨ï¼Œåªæƒ³åˆ°relationEntityæœ‰åˆ¤æ–·éç©ºä¸æœƒå¾€ä¸‹åšï¼Œä½†æ˜¯æˆ‘æ²’æƒ³åˆ°relationEntityæ˜¯æœ‰äº†ï¼Œçµæœè¡¨è£é¢æœ‰ç©ºçš„æ¬„</li>
</ul>
<p><img src="image-20220115153034095.png" alt="image-20220115153034095"></p>
<ul>
<li>debugåŠŸåŠ›é‚„å¤ªå·®äº†ï¼Œæˆ‘å¯¦åœ¨ä¸æ€æœƒç”¨å°ç´…é»ï¼Œæ¯æ¬¡ä¸€ç›´æŒ‰éƒ½è·‘åˆ°å¾ˆæ·±çš„åœ°æ–¹å›ä¸ä¾†</li>
<li>ç¸½ä¹‹æœ‰å¤–é€£çš„è¡¨ï¼Œé–‹ç™¼æ™‚å¯èƒ½æš«æ™‚æ¸¬åŠŸèƒ½å¡«äº†ä¸ç¬¦åˆè¦å®šçš„å€¼ï¼Œç”¨å®Œè¨˜å¾—åˆªæ‰ï¼Œåˆ‡è¨˜åˆ‡è¨˜!!</li>
</ul>
<h3 id="ä¿®æ”¹">ä¿®æ”¹</h3>
<ul>
<li>ä¿®æ”¹è¦å…ˆå®Œæˆå›é¡¯ï¼ŒAPI:</li>
</ul>
<p><img src="image-20220115113406718.png" alt="image-20220115113406718"></p>
<ul>
<li>AttrController.java</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@RequestMapping</span>(<span style="color:#cd5555">&#34;/info/{attrId}&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#228b22">//@RequiresPermissions(&#34;product:attr:info&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> R <span style="color:#008b45">info</span>(<span style="color:#707a7c">@PathVariable</span>(<span style="color:#cd5555">&#34;attrId&#34;</span>) Long attrId) {
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// AttrEntity attr = attrService.getById(attrId);
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    AttrRespVo respVo = attrService.<span style="color:#658b00">getInfoById</span>(attrId);
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> R.<span style="color:#658b00">ok</span>().<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;attr&#34;</span>, respVo);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>AttrServiceImpl.java</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * å±¬æ€§è©³æƒ…(çµ¦ä¿®æ”¹å›é¡¯ç”¨)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> *
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * @param attrId
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> * @return
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> AttrRespVo <span style="color:#008b45">getInfoById</span>(Long attrId) {
</span></span><span style="display:flex;"><span>    AttrEntity attrEntity = <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">getById</span>(attrId);
</span></span><span style="display:flex;"><span>    AttrRespVo attrRespVo = <span style="color:#8b008b;font-weight:bold">new</span> AttrRespVo();
</span></span><span style="display:flex;"><span>    BeanUtils.<span style="color:#658b00">copyProperties</span>(attrEntity, attrRespVo);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// å»é—œè¯è¡¨æ‹¿relationEntityï¼Œç”¨ä¾†æ‰¾åˆ°AttrGroupIdï¼Œæ³¨æ„æ˜¯selectOne
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    AttrAttrgroupRelationEntity relationEntity =
</span></span><span style="display:flex;"><span>            relationDao.<span style="color:#658b00">selectOne</span>(<span style="color:#8b008b;font-weight:bold">new</span> QueryWrapper&lt;AttrAttrgroupRelationEntity&gt;().<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;attr_id&#34;</span>,
</span></span><span style="display:flex;"><span>                    attrEntity.<span style="color:#658b00">getAttrId</span>()));
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æ‹¿åˆ°groupNameåˆ†çµ„å: ä¸»é«”ã€è¢å¹•ç­‰
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">if</span> (relationEntity != <span style="color:#8b008b;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>        attrRespVo.<span style="color:#658b00">setAttrGroupId</span>(relationEntity.<span style="color:#658b00">getAttrGroupId</span>());
</span></span><span style="display:flex;"><span>        AttrGroupEntity attrGroupEntity = attrGroupDao.<span style="color:#658b00">selectById</span>(relationEntity.<span style="color:#658b00">getAttrGroupId</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">if</span> (attrGroupEntity != <span style="color:#8b008b;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            attrRespVo.<span style="color:#658b00">setGroupName</span>(attrGroupEntity.<span style="color:#658b00">getAttrGroupName</span>());
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// å®Œæ•´åˆ†é¡è·¯å¾‘ï¼Œä¹‹å‰å¯«éçš„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    Long catelogId = attrEntity.<span style="color:#658b00">getCatelogId</span>();
</span></span><span style="display:flex;"><span>    Long[] catalogPath = categoryService.<span style="color:#658b00">findCatalogPath</span>(catelogId);
</span></span><span style="display:flex;"><span>    attrRespVo.<span style="color:#658b00">setCatelogPath</span>(catalogPath);
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// è‡ªå·±çš„ä¸‰ç´šåˆ†é¡å
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    CategoryEntity categoryEntity = categoryDao.<span style="color:#658b00">selectById</span>(catelogId);
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">if</span> (categoryEntity != <span style="color:#8b008b;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>        attrRespVo.<span style="color:#658b00">setCatelogName</span>(categoryEntity.<span style="color:#658b00">getName</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> attrRespVo;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>æ¥è‘—ä¿®æ”¹ï¼Œè®“ä¿å­˜çš„ä¹Ÿè·Ÿå‰é¢ä¸€æ¨£æ‹†æˆå…©æ­¥</li>
</ul>
<p><img src="image-20220115115830496.png" alt="image-20220115115830496"></p>
<ul>
<li>AttrServiceImpl.java</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Transactional</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">updateAttr</span>(AttrVo attr) {
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// å…ˆæ›´æ–°åŸºæœ¬è³‡æ–™
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    AttrEntity attrEntity = <span style="color:#8b008b;font-weight:bold">new</span> AttrEntity();
</span></span><span style="display:flex;"><span>    BeanUtils.<span style="color:#658b00">copyProperties</span>(attr, attrEntity);
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">updateById</span>(attrEntity);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// ä¿å­˜é—œè¯é—œä¿‚
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    AttrAttrgroupRelationEntity relationEntity = <span style="color:#8b008b;font-weight:bold">new</span> AttrAttrgroupRelationEntity();
</span></span><span style="display:flex;"><span>    relationEntity.<span style="color:#658b00">setAttrGroupId</span>(attr.<span style="color:#658b00">getAttrGroupId</span>());
</span></span><span style="display:flex;"><span>    relationEntity.<span style="color:#658b00">setAttrId</span>(attr.<span style="color:#658b00">getAttrId</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// å…ˆåˆ¤æ–·æœ¬ä¾†æœ‰ç„¡å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    Long count = relationDao.<span style="color:#658b00">selectCount</span>(<span style="color:#8b008b;font-weight:bold">new</span> QueryWrapper&lt;AttrAttrgroupRelationEntity&gt;().<span style="color:#658b00">eq</span>(
</span></span><span style="display:flex;"><span>            <span style="color:#cd5555">&#34;attr_id&#34;</span>,
</span></span><span style="display:flex;"><span>            attr.<span style="color:#658b00">getAttrId</span>()));
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">if</span> (count &gt; 0) {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// æ›´æ–°
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        relationDao.<span style="color:#658b00">update</span>(relationEntity, <span style="color:#8b008b;font-weight:bold">new</span> UpdateWrapper&lt;AttrAttrgroupRelationEntity&gt;().<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;attr_id&#34;</span>,
</span></span><span style="display:flex;"><span>                attr.<span style="color:#658b00">getAttrId</span>()));
</span></span><span style="display:flex;"><span>    } <span style="color:#8b008b;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// æ–°å¢
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        relationDao.<span style="color:#658b00">insert</span>(relationEntity);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">ä¸Šæ¬¡ä¿®æ”¹æ–¼ 2022-01-22</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://yoziming.github.io/post/220122-java-try-finally-return/">
			ä¸‹ä¸€ç¯‡<br>Javaä¸­finallyèˆ‡returnçš„é †åº
                </a>
                
                
                
                <a class="older-posts" href="https://yoziming.github.io/post/220121-npm-sass-webpack/">
			ä¸Šä¸€ç¯‡<br>nodeç‰ˆæœ¬å°æ‡‰ã€NVSå¿«é€Ÿåˆ‡æ›
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                








<div id="waline"></div>
<script>
    new Waline({
        el: '#waline',
        path: location.pathname,
        serverURL: "https://waline-pn38gfwbz-yoziming.vercel.app/" ,
		lang: 'en-US',
		visitor: true,
		meta: ['nick', 'mail'],
    });
    </script>



            </div>
        </div>
    </div>


                    </div>
            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
ç§»æ¤è‡ª <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Yoziming
	
</div>
            </div>
    
    <script src="/js/journal.js"></script>
    </body>
</html>
