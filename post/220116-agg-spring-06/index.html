<!DOCTYPE html>
<html><head>
<meta name="google-site-verification" content="XrwF-xUZWSGJVBBm7jM8vqemVqx--zo5Tb9d-Vr7BCc" />
<title>å­—å…¸æª”æ¨¡çµ„ã€Spring Cache&#43;Redisã€Nginx</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="å°šç¡…è°·Springç­†è¨˜-06">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="å­—å…¸æª”æ¨¡çµ„ã€Spring Cache&#43;Redisã€Nginx" />
<meta property="og:description" content="å°šç¡…è°·Springç­†è¨˜-06" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yoziming.github.io/post/220116-agg-spring-06/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-01-16T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-01-16T00:00:00+00:00" /><meta property="og:site_name" content="My Blog" />






<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="å­—å…¸æª”æ¨¡çµ„ã€Spring Cache&#43;Redisã€Nginx"/>
<meta name="twitter:description" content="å°šç¡…è°·Springç­†è¨˜-06"/>







<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">


  




<link rel="icon" href="https://yoziming.github.io/images/favicon.png">



<link rel="stylesheet" href="https://yoziming.github.io/scss/journal.min.3f72a5fc8f5b5dd732a4b476aced0eece2156958d9d414316494ddb10593ddf7.css" integrity="sha256-P3Kl/I9bXdcypLR2rO0O7OIVaVjZ1BQxZJTdsQWT3fc=" media="screen">



<link rel="stylesheet" href="https://yoziming.github.io/scss/dark-mode.min.f7c2efa7183435a6bd1842f91c541481c7a5137b5991629a870f24e4a516ad4b.css" integrity="sha256-98Lvpxg0Naa9GEL5HFQUgcelE3tZkWKahw8k5KUWrUs=" media="screen">


<script src="/vendor/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>






  <script src="/js/toc.js"></script>











<script src="//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js"></script>





</head>
<body>
    	<div id="app"><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://yoziming.github.io/">
    
        <div class="nav-title">
            æŸšå­èŒ¶å®¤
        </div>
        
        <div class="nav-subtitle">
            ç´€éŒ„è‡ªå­¸å¤§å°äº‹
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/">
                é¦–é ğŸ 
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                æ¨™ç±¤ğŸ·ï¸
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                ç³»åˆ—æ–‡ğŸ“–
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about-me">
                é—œæ–¼æˆ‘ğŸ£
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
ç§»æ¤è‡ª <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Yoziming
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®éŒ„ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%ad%97%e5%85%b8%e6%aa%94" onclick="onNavClick(`#å­—å…¸æª”-nav`)" id="å­—å…¸æª”-nav">
									å­—å…¸æª”
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e9%a1%af%e7%a4%ba%e5%88%97%e8%a1%a8" onclick="onNavClick(`#é¡¯ç¤ºåˆ—è¡¨-nav`)" id="é¡¯ç¤ºåˆ—è¡¨-nav">
									é¡¯ç¤ºåˆ—è¡¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%be%8c%e7%ab%af-%e5%bb%ba%e6%a8%a1%e7%b5%84" onclick="onNavClick(`#å¾Œç«¯-å»ºæ¨¡çµ„-nav`)" id="å¾Œç«¯-å»ºæ¨¡çµ„-nav">
									å¾Œç«¯-å»ºæ¨¡çµ„
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%8c%e7%ab%af-%e5%af%ab%e6%8e%a5%e5%8f%a3" onclick="onNavClick(`#å¾Œç«¯-å¯«æ¥å£-nav`)" id="å¾Œç«¯-å¯«æ¥å£-nav">
									å¾Œç«¯-å¯«æ¥å£
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%89%8d%e7%ab%af" onclick="onNavClick(`#å‰ç«¯-nav`)" id="å‰ç«¯-nav">
									å‰ç«¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e8%b7%af%e7%94%b1%e5%81%b4%e9%82%8a%e6%ac%84" onclick="onNavClick(`#è·¯ç”±å´é‚Šæ¬„-nav`)" id="è·¯ç”±å´é‚Šæ¬„-nav">
									è·¯ç”±(å´é‚Šæ¬„)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%8e%a5%e5%8f%a3" onclick="onNavClick(`#æ¥å£-nav`)" id="æ¥å£-nav">
									æ¥å£
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%a0%81%e9%9d%a2" onclick="onNavClick(`#é é¢-nav`)" id="é é¢-nav">
									é é¢
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%b0%8e%e5%87%ba%e5%88%97%e8%a1%a8" onclick="onNavClick(`#å°å‡ºåˆ—è¡¨-nav`)" id="å°å‡ºåˆ—è¡¨-nav">
									å°å‡ºåˆ—è¡¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%b0%8e%e5%85%a5" onclick="onNavClick(`#å°å…¥-nav`)" id="å°å…¥-nav">
									å°å…¥
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%89%8d%e7%ab%af-1" onclick="onNavClick(`#å‰ç«¯-1-nav`)" id="å‰ç«¯-1-nav">
									å‰ç«¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#spring-cache" onclick="onNavClick(`#spring-cache-nav`)" id="spring-cache-nav">
									Spring Cache
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%ba%8b%e5%89%8d%e6%ba%96%e5%82%99" onclick="onNavClick(`#äº‹å‰æº–å‚™-nav`)" id="äº‹å‰æº–å‚™-nav">
									äº‹å‰æº–å‚™
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%a8%bb%e8%a7%a3" onclick="onNavClick(`#è¨»è§£-nav`)" id="è¨»è§£-nav">
									è¨»è§£
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%87%89%e7%94%a8" onclick="onNavClick(`#æ‡‰ç”¨-nav`)" id="æ‡‰ç”¨-nav">
									æ‡‰ç”¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#nginx" onclick="onNavClick(`#nginx-nav`)" id="nginx-nav">
									Nginx
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/">
                    é¦–é ğŸ 
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    æ¨™ç±¤ğŸ·ï¸
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    ç³»åˆ—æ–‡ğŸ“–
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about-me">
                    é—œæ–¼æˆ‘ğŸ£
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®éŒ„ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%ad%97%e5%85%b8%e6%aa%94" onclick="onNavClick(`#å­—å…¸æª”-nav`)" id="å­—å…¸æª”-nav">
									å­—å…¸æª”
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e9%a1%af%e7%a4%ba%e5%88%97%e8%a1%a8" onclick="onNavClick(`#é¡¯ç¤ºåˆ—è¡¨-nav`)" id="é¡¯ç¤ºåˆ—è¡¨-nav">
									é¡¯ç¤ºåˆ—è¡¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%be%8c%e7%ab%af-%e5%bb%ba%e6%a8%a1%e7%b5%84" onclick="onNavClick(`#å¾Œç«¯-å»ºæ¨¡çµ„-nav`)" id="å¾Œç«¯-å»ºæ¨¡çµ„-nav">
									å¾Œç«¯-å»ºæ¨¡çµ„
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%8c%e7%ab%af-%e5%af%ab%e6%8e%a5%e5%8f%a3" onclick="onNavClick(`#å¾Œç«¯-å¯«æ¥å£-nav`)" id="å¾Œç«¯-å¯«æ¥å£-nav">
									å¾Œç«¯-å¯«æ¥å£
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%89%8d%e7%ab%af" onclick="onNavClick(`#å‰ç«¯-nav`)" id="å‰ç«¯-nav">
									å‰ç«¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e8%b7%af%e7%94%b1%e5%81%b4%e9%82%8a%e6%ac%84" onclick="onNavClick(`#è·¯ç”±å´é‚Šæ¬„-nav`)" id="è·¯ç”±å´é‚Šæ¬„-nav">
									è·¯ç”±(å´é‚Šæ¬„)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%8e%a5%e5%8f%a3" onclick="onNavClick(`#æ¥å£-nav`)" id="æ¥å£-nav">
									æ¥å£
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%a0%81%e9%9d%a2" onclick="onNavClick(`#é é¢-nav`)" id="é é¢-nav">
									é é¢
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%b0%8e%e5%87%ba%e5%88%97%e8%a1%a8" onclick="onNavClick(`#å°å‡ºåˆ—è¡¨-nav`)" id="å°å‡ºåˆ—è¡¨-nav">
									å°å‡ºåˆ—è¡¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%b0%8e%e5%85%a5" onclick="onNavClick(`#å°å…¥-nav`)" id="å°å…¥-nav">
									å°å…¥
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%89%8d%e7%ab%af-1" onclick="onNavClick(`#å‰ç«¯-1-nav`)" id="å‰ç«¯-1-nav">
									å‰ç«¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#spring-cache" onclick="onNavClick(`#spring-cache-nav`)" id="spring-cache-nav">
									Spring Cache
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%ba%8b%e5%89%8d%e6%ba%96%e5%82%99" onclick="onNavClick(`#äº‹å‰æº–å‚™-nav`)" id="äº‹å‰æº–å‚™-nav">
									äº‹å‰æº–å‚™
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%a8%bb%e8%a7%a3" onclick="onNavClick(`#è¨»è§£-nav`)" id="è¨»è§£-nav">
									è¨»è§£
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%87%89%e7%94%a8" onclick="onNavClick(`#æ‡‰ç”¨-nav`)" id="æ‡‰ç”¨-nav">
									æ‡‰ç”¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#nginx" onclick="onNavClick(`#nginx-nav`)" id="nginx-nav">
									Nginx
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://yoziming.github.io/">
            æŸšå­èŒ¶å®¤
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://yoziming.github.io/">
        <div class="single-column-header-title">æŸšå­èŒ¶å®¤</div>
        
        <div class="single-column-header-subtitle">ç´€éŒ„è‡ªå­¸å¤§å°äº‹</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://yoziming.github.io/images/spring.png')"
                    
                
            >
                <div class="post-title">
                    å­—å…¸æª”æ¨¡çµ„ã€Spring Cache&#43;Redisã€Nginx
                    
                    <div class="post-subtitle">
                        å°šç¡…è°·Springç­†è¨˜-06
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2022-01-16 00:00
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/java%E5%BE%AE%E6%9C%8D%E5%8B%99%E5%B0%88%E6%A1%88">Javaå¾®æœå‹™å°ˆæ¡ˆ</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/java">Java</a>
                                &nbsp;
                            
                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h1 id="å­—å…¸æª”">å­—å…¸æª”</h1>
<blockquote>
<p>æš«æ™‚ä¸çŸ¥é“ä½œä¾†å¹¹å˜›ï¼Œå°±æ˜¯æ”¾ä¸€äº›ç¸£å¸‚ç´šåˆ†å€çš„è³‡æœ¬è³‡æ–™</p>
</blockquote>
<ul>
<li>ä¸€æ¨£åˆ†å‰ã€å¾Œç«¯å¯¦ç¾åŠŸèƒ½</li>
</ul>
<h2 id="é¡¯ç¤ºåˆ—è¡¨">é¡¯ç¤ºåˆ—è¡¨</h2>
<h3 id="å¾Œç«¯-å»ºæ¨¡çµ„">å¾Œç«¯-å»ºæ¨¡çµ„</h3>
<ul>
<li>å»ºç«‹<code>service-cmn</code>å­æ¨¡çµ„
<ul>
<li>è¤‡ç¿’ä¸€ä¸‹éç¨‹ï¼Œåœ¨çˆ¶ç¯€é»serviceå³éµæ–°å¢</li>
<li>é¸mavenï¼Œç„¡åŸå‹ï¼Œç”¨<code>-</code>å‘½åï¼Œé¸Parentï¼Œå…¶ä»–ä¸å‹•</li>
<li>åˆ°pom.xmlä¸­</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>åˆªé™¤
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;properties&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;maven.compiler.source&gt;</span>8<span style="color:#8b008b;font-weight:bold">&lt;/maven.compiler.source&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;maven.compiler.target&gt;</span>8<span style="color:#8b008b;font-weight:bold">&lt;/maven.compiler.target&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;/properties&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>åŠ å…¥æè¿°
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>1.0-SNAPSHOT<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;packaging&gt;</span>jar<span style="color:#8b008b;font-weight:bold">&lt;/packaging&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;name&gt;</span>service-cmn<span style="color:#8b008b;font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;description&gt;</span>service-cmn<span style="color:#8b008b;font-weight:bold">&lt;/description&gt;</span>
</span></span></code></pre></div><ul>
<li>æŠŠ<code>servicehosp</code>æ•´åŒ…è¤‡è£½éä¾†ï¼Œå–å®Œæ•´æ–°åŒ…å<code>yoziming.ad.servicecmn</code>ï¼Œé–‹å§‹æ”¹é€ åç¨±</li>
<li>å¯ä»¥ç”¨é‡å‘½ååŠŸèƒ½èˆ‡å¤§é‡å–ä»£ï¼Œæ³¨æ„å¤§å°å¯«èˆ‡ç¯„åœ</li>
</ul>
<p><img src="image-20220108012217872.png" alt="image-20220108012217872"></p>
<p><img src="image-20220108012535685.png" alt="image-20220108012535685"></p>
<ul>
<li>æŸ¥åˆ°<code>mybatis plus</code>æœ‰è‡ªå‹•ç”ŸæˆåŠŸèƒ½ï¼Œä½†çœ‹äº†ä¸€ä¸‹æœ‰é»äº‚ï¼Œç”¨è¤‡è£½çš„æŒºç©©ä¹Ÿå¿«ï¼Œå…ˆå°‡å°±å§</li>
<li>æœ€å¾Œè¨˜å¾—å°å­æ¨¡çµ„å³éµï¼Œå¼•å…¥æ¡†æ¶æ”¯æ´
<ul>
<li>çœ‹åˆ°<code>application.properties</code>è£¡é¢æ˜¯ç°çš„å°±è¦æƒ³åˆ°é€™é»
<ul>
<li>è£¡é¢é€£çš„åº«åèˆ‡æœå‹™ç«¯å£ã€æœå‹™åè¦æ”¹</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="image-20220108013449761.png" alt="image-20220108013449761"></p>
<ul>
<li>swaggerçš„@Apiè¨»è§£valueèˆ‡tagsçš„å€åˆ¥
<ul>
<li>valueç”¨æ–¼æè¿°</li>
<li>tagsç”¨æ–¼åˆ†çµ„ï¼Œé¡çš„tagæœƒè¦†è“‹æ–¹æ³•çš„</li>
</ul>
</li>
</ul>
<h3 id="å¾Œç«¯-å¯«æ¥å£">å¾Œç«¯-å¯«æ¥å£</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#228b22">// DictController
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#707a7c">@Api</span>(value = <span style="color:#cd5555">&#34;æ•¸æ“šå­—å…¸&#34;</span>, tags = <span style="color:#cd5555">&#34;æ•¸æ“šå­—å…¸&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@RestController</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@RequestMapping</span>(<span style="color:#cd5555">&#34;/admin/cmn/Dict&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@CrossOrigin</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">DictController</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">private</span> DictService dictService;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@ApiOperation</span>(<span style="color:#cd5555">&#34;æ ¹æ“šidæŸ¥è©¢å­æ•¸æ“šåˆ—è¡¨&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@GetMapping</span>(<span style="color:#cd5555">&#34;getAllChildDictById/{id}&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> Result <span style="color:#008b45">getAllChildDictById</span>(<span style="color:#707a7c">@PathVariable</span> Long id) {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> Result.<span style="color:#658b00">ok</span>(dictService.<span style="color:#658b00">getAllChildDictById</span>(id));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">// DictServiceImpl
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#707a7c">@Service</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">DictServiceImpl</span> <span style="color:#8b008b;font-weight:bold">extends</span> ServiceImpl&lt;DictMapper, Dict&gt; <span style="color:#8b008b;font-weight:bold">implements</span> DictService {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// åˆ¤æ–·idä¸‹é¢æ˜¯å¦é‚„æœ‰å­ç¯€é»
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#00688b;font-weight:bold">boolean</span> <span style="color:#008b45">hasChildren</span>(<span style="color:#00688b;font-weight:bold">long</span> id) {
</span></span><span style="display:flex;"><span>        QueryWrapper&lt;Dict&gt; qw = <span style="color:#8b008b;font-weight:bold">new</span> QueryWrapper&lt;&gt;();
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// ä»¥è‡ªå·±ç‚ºçˆ¸çˆ¸æŸ¥å…’å­æ•¸é‡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        qw.<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;parent_id&#34;</span>, id);
</span></span><span style="display:flex;"><span>        Integer count = baseMapper.<span style="color:#658b00">selectCount</span>(qw);
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// æœ‰å°±æ˜¯true
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">return</span> count &gt; 0;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æ ¹æ“šidæŸ¥è©¢å­æ•¸æ“šåˆ—è¡¨
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> List&lt;Dict&gt; <span style="color:#008b45">getAllChildDictById</span>(Long id) {
</span></span><span style="display:flex;"><span>        QueryWrapper&lt;Dict&gt; qw = <span style="color:#8b008b;font-weight:bold">new</span> QueryWrapper&lt;&gt;();
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// æ ¹æ“šidæŸ¥è¡¨ä¸­å­idï¼Œæ‰€ä»¥æ‰¾parent_idæ˜¯å‚³å…¥çš„idçš„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        qw.<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;parent_id&#34;</span>, id);
</span></span><span style="display:flex;"><span>        List&lt;Dict&gt; dictList = baseMapper.<span style="color:#658b00">selectList</span>(qw);
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// çµ¦beanè³¦å€¼ï¼Œå› ç‚ºè³‡æ–™åº«ä¸­æ²’è¨˜è¼‰æ˜¯å¦æœ‰å­ç¯€é»
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#228b22">// å°æ‡‰çš„æ˜¯@TableField(exist = false)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">for</span> (Dict dict : dictList) {
</span></span><span style="display:flex;"><span>            Long dictId = dict.<span style="color:#658b00">getId</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#00688b;font-weight:bold">boolean</span> b = <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">hasChildren</span>(dictId);
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// é€™å€‹thisæ˜¯ç•¶å‰é¡DictServiceImplï¼Œèª¿ç”¨è‡ªå·±çš„æ–¹æ³•æŸ¥
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            <span style="color:#228b22">// æŸå€‹dictIdæ˜¯å¦æœ‰å­ç¯€é»ï¼Œæˆ‘ç”¨dict.hasæ‰¾åŠå¤©æœ‰é»æ˜é ­
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            dict.<span style="color:#658b00">setHasChildren</span>(b);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> dictList;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="å‰ç«¯">å‰ç«¯</h3>
<blockquote>
<p>ä¸€æ¨£ä¸‰æ­¥é©Ÿ: åŠ è·¯ç”±ã€å¯«æ¥å£ã€é€ é é¢</p>
</blockquote>
<h4 id="è·¯ç”±å´é‚Šæ¬„">è·¯ç”±(å´é‚Šæ¬„)</h4>
<ul>
<li><code>@/router/index.js</code>
<ul>
<li><code>path &amp; redirect</code>æ˜¯è‡ªè¨‚çš„å´é‚Šæ¬„ç¶²å€ï¼Œèˆ‡å¯¦éš›é é¢ç„¡é—œ</li>
<li><code>alwaysShow: true</code>è®“å–®å­é …ä¹Ÿé¡¯ç¤ºå´é‚Šæ¬„</li>
<li>ç¶å®šå¯¦éš›å­˜åœ¨çš„é é¢æ˜¯<code>component: () =&gt; import('@/views/dict/list'),</code></li>
<li>å¦å¤–<code>children: [</code>çš„<code>[</code>ä¸èƒ½åˆªé™¤å¦å‰‡å ±éŒ¯</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#a61717;background-color:#e3d2d2">path:</span> <span style="color:#a61717;background-color:#e3d2d2">&#39;/cmn&#39;,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a61717;background-color:#e3d2d2">component:</span> <span style="color:#a61717;background-color:#e3d2d2">Layout,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a61717;background-color:#e3d2d2">redirect:</span> <span style="color:#a61717;background-color:#e3d2d2">&#39;/cmn/list&#39;,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a61717;background-color:#e3d2d2">name:</span> <span style="color:#a61717;background-color:#e3d2d2">&#39;å­—å…¸ç®¡ç†&#39;,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a61717;background-color:#e3d2d2">alwaysShow:</span> <span style="color:#a61717;background-color:#e3d2d2">true,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a61717;background-color:#e3d2d2">meta:</span> <span style="color:#a61717;background-color:#e3d2d2">{</span> <span style="color:#a61717;background-color:#e3d2d2">title:</span> <span style="color:#a61717;background-color:#e3d2d2">&#39;å­—å…¸ç®¡ç†&#39;,</span> <span style="color:#a61717;background-color:#e3d2d2">icon:</span> <span style="color:#a61717;background-color:#e3d2d2">&#39;el-icon-s-help&#39;</span> }<span style="color:#a61717;background-color:#e3d2d2">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a61717;background-color:#e3d2d2">children:</span> [
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#a61717;background-color:#e3d2d2">path:</span> <span style="color:#a61717;background-color:#e3d2d2">&#39;list&#39;,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a61717;background-color:#e3d2d2">name:</span> <span style="color:#a61717;background-color:#e3d2d2">&#39;å­—å…¸åˆ—è¡¨&#39;,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a61717;background-color:#e3d2d2">component:</span> <span style="color:#a61717;background-color:#e3d2d2">()</span> <span style="color:#a61717;background-color:#e3d2d2">=&gt;</span> <span style="color:#a61717;background-color:#e3d2d2">import(&#39;@/views/dict/list&#39;),</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a61717;background-color:#e3d2d2">meta:</span> <span style="color:#a61717;background-color:#e3d2d2">{</span> <span style="color:#a61717;background-color:#e3d2d2">title:</span> <span style="color:#a61717;background-color:#e3d2d2">&#39;å­—å…¸åˆ—è¡¨&#39;,</span> <span style="color:#a61717;background-color:#e3d2d2">icon:</span> <span style="color:#a61717;background-color:#e3d2d2">&#39;table&#39;</span> }
</span></span><span style="display:flex;"><span>      <span style="color:#a61717;background-color:#e3d2d2">}</span>
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>  <span style="color:#a61717;background-color:#e3d2d2">},</span>
</span></span></code></pre></div><h4 id="æ¥å£">æ¥å£</h4>
<p><code>@/api/dict.js</code></p>
<pre tabindex="0"><code>import request from &#39;@/utils/request&#39;

export default {
  getAllChildDictById(id) {
    return request({
      // ES6ç‰¹æ€§ï¼Œåå¼•è™ŸåŒ…è£¹å¼·åŒ–å­—ä¸²
      url: `http://localhost:8202/admin/cmn/dict/getAllChildDictById/${id}`,
      method: &#39;get&#39;
    })
  }
}
</code></pre><h4 id="é é¢">é é¢</h4>
<p><code>@/views/dict/list.vue</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;app-container&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#8b008b;font-weight:bold">el-table</span>
</span></span><span style="display:flex;"><span>      <span style="color:#658b00">:data</span>=<span style="color:#cd5555">&#34;list&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#658b00">style</span>=<span style="color:#cd5555">&#34;width: 100%&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#658b00">row-key</span>=<span style="color:#cd5555">&#34;id&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#658b00">border</span>
</span></span><span style="display:flex;"><span>      <span style="color:#658b00">lazy</span>
</span></span><span style="display:flex;"><span>      <span style="color:#658b00">:load</span>=<span style="color:#cd5555">&#34;getChildrens&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#658b00">:tree-props</span>=<span style="color:#cd5555">&#34;{ children: &#39;children&#39;, hasChildren: &#39;hasChildren&#39; }&#34;</span>
</span></span><span style="display:flex;"><span>    &gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#8b008b;font-weight:bold">el-table-column</span> <span style="color:#658b00">label</span>=<span style="color:#cd5555">&#34;åç¨±&#34;</span> <span style="color:#658b00">width</span>=<span style="color:#cd5555">&#34;230&#34;</span> <span style="color:#658b00">align</span>=<span style="color:#cd5555">&#34;left&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#8b008b;font-weight:bold">template</span> <span style="color:#658b00">slot-scope</span>=<span style="color:#cd5555">&#34;scope&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#8b008b;font-weight:bold">span</span>&gt;{{ scope.row.name }}&lt;/<span style="color:#8b008b;font-weight:bold">span</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#8b008b;font-weight:bold">template</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#8b008b;font-weight:bold">el-table-column</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#8b008b;font-weight:bold">el-table-column</span> <span style="color:#658b00">label</span>=<span style="color:#cd5555">&#34;ç·¨ç¢¼&#34;</span> <span style="color:#658b00">width</span>=<span style="color:#cd5555">&#34;220&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#8b008b;font-weight:bold">template</span> <span style="color:#658b00">slot-scope</span>=<span style="color:#cd5555">&#34;{ row }&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          {{ row.dictCode }}
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#8b008b;font-weight:bold">template</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#8b008b;font-weight:bold">el-table-column</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#8b008b;font-weight:bold">el-table-column</span> <span style="color:#658b00">label</span>=<span style="color:#cd5555">&#34;å€¼&#34;</span> <span style="color:#658b00">width</span>=<span style="color:#cd5555">&#34;230&#34;</span> <span style="color:#658b00">align</span>=<span style="color:#cd5555">&#34;left&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#8b008b;font-weight:bold">template</span> <span style="color:#658b00">slot-scope</span>=<span style="color:#cd5555">&#34;scope&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#8b008b;font-weight:bold">span</span>&gt;{{ scope.row.value }}&lt;/<span style="color:#8b008b;font-weight:bold">span</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#8b008b;font-weight:bold">template</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#8b008b;font-weight:bold">el-table-column</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#8b008b;font-weight:bold">el-table-column</span> <span style="color:#658b00">label</span>=<span style="color:#cd5555">&#34;å‰µå»ºæ™‚é–“&#34;</span> <span style="color:#658b00">align</span>=<span style="color:#cd5555">&#34;center&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#8b008b;font-weight:bold">template</span> <span style="color:#658b00">slot-scope</span>=<span style="color:#cd5555">&#34;scope&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#8b008b;font-weight:bold">span</span>&gt;{{ scope.row.createTime }}&lt;/<span style="color:#8b008b;font-weight:bold">span</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#8b008b;font-weight:bold">template</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#8b008b;font-weight:bold">el-table-column</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#8b008b;font-weight:bold">el-table</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#8b008b;font-weight:bold">template</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">script</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#228b22">// å¼•å…¥æ¥å£çš„js
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">import</span> dict from <span style="color:#cd5555">&#34;@/api/dict&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">export</span> <span style="color:#8b008b;font-weight:bold">default</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#228b22">// å®šç¾©æ¥æ”¶ç”¨çš„è®Šé‡èˆ‡åˆå§‹å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>  data() {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> {
</span></span><span style="display:flex;"><span>      list: [],
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  created() {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">this</span>.getList(<span style="color:#b452cd">1</span>);
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  methods: {
</span></span><span style="display:flex;"><span>    getList(id) {
</span></span><span style="display:flex;"><span>      <span style="color:#228b22">// ç™¼é€axajè«‹æ±‚
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>      dict
</span></span><span style="display:flex;"><span>        .getAllChildDictById(id)
</span></span><span style="display:flex;"><span>        .then((response) =&gt; {
</span></span><span style="display:flex;"><span>          <span style="color:#228b22">// è«‹æ±‚æˆåŠŸï¼Œå–å‡ºå›æ‡‰è³‡æ–™
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>          <span style="color:#8b008b;font-weight:bold">this</span>.list = response.data;
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// è«‹æ±‚å¤±æ•—
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        .<span style="color:#8b008b;font-weight:bold">catch</span>((error) =&gt; {
</span></span><span style="display:flex;"><span>          console.log(error);
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    getChildrens(tree, treeNode, resolve) {
</span></span><span style="display:flex;"><span>      dict.getAllChildDictById(tree.id).then((response) =&gt; {
</span></span><span style="display:flex;"><span>        resolve(response.data);
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#8b008b;font-weight:bold">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">style</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#8b008b;font-weight:bold">style</span>&gt;
</span></span></code></pre></div><ul>
<li>å¼•ç”¨çš„æ˜¯&quot;æ ‘å½¢æ•°æ®ä¸æ‡’åŠ è½½&quot;
<ul>
<li><a href="https://element.eleme.io/#/zh-CN/component/table#shu-xing-shu-ju-yu-lan-jia-zai">https://element.eleme.io/#/zh-CN/component/table#shu-xing-shu-ju-yu-lan-jia-zai</a></li>
</ul>
</li>
<li>æ³¨æ„ä¸‹é¢æ–¹æ³•éœ€è¦å¯¦ç¾<code>getChildrens</code>ï¼Œä¸¦ä¸”ä»¥idä½œç‚ºä¾æ“š</li>
<li>å¦å¤–axiosçš„ajaxè«‹æ±‚å·²ç¶“å°è£éï¼Œ<code>response.data</code>å°±æ˜¯é€šå¸¸æ„ç¾©çš„é‚£å±¤äº†ï¼Œä¸è¦å†å¯«æˆ<code>.data.data</code>å‘åˆ°è‡ªå·±</li>
</ul>
<hr>
<h2 id="å°å‡ºåˆ—è¡¨">å°å‡ºåˆ—è¡¨</h2>
<blockquote>
<p>è®“ä½¿ç”¨è€…ä¸‹è¼‰æ•´å€‹åˆ—è¡¨</p>
</blockquote>
<ul>
<li>éœ€è¦å¼•ç”¨easyExcelä¾è³´ï¼Œç”±æ–¼ä¾è³´ç®¡ç†å·²ç¶“å®£å‘Šéï¼Œé€™é‚Šä¸ç”¨å¯«ç‰ˆæœ¬è™Ÿ</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>com.alibaba<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>easyexcel<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;scope&gt;</span>provided<span style="color:#8b008b;font-weight:bold">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></div><ul>
<li>å…ˆé€ ä¸€å€‹Voå¯¦é«”é¡ï¼Œå±¬æ€§åè·ŸåŸä¾†çš„beanä¸€æ¨£ï¼Œç„¶å¾Œç”¨<code>@ExcelProperty</code>è¨»è§£å®£å‘Šæ¬„ä½</li>
<li>ç•¶ç„¶å¯¦éš›æ“ä½œçš„æ˜¯Listï¼Œéæ­·æŠŠbeanå±¬æ€§ç”¨<code>BeanUtils.copyProperties</code>å¡åˆ°Voä¸­</li>
<li>æœ€å¾Œç”¨<code>doWrite(dictVoList)</code>è®“ä»–ä¸€è¡Œä¸€è¡Œå¯«ä¸‹å»</li>
</ul>
<p><img src="image-20220108215545141.png" alt="image-20220108215545141"></p>
<ul>
<li>æ§åˆ¶å™¨èˆ‡æœå‹™å¯¦é«”é¡
<ul>
<li>// TODO é€™é‚Šæˆ‘è¦ºå¾—æœ‰é»æ€ªï¼Œç‚ºå•¥æ¥æ”¶çš„åƒæ•¸æ˜¯<code>response</code>ï¼Œå¾Œç«¯ä¸æ‡‰è©²æ˜¯æ¥<code>req</code>å—</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">exportData</span>(HttpServletResponse response) {
</span></span><span style="display:flex;"><span>    response.<span style="color:#658b00">setContentType</span>(<span style="color:#cd5555">&#34;application/vnd.ms-excel&#34;</span>);
</span></span><span style="display:flex;"><span>    response.<span style="color:#658b00">setCharacterEncoding</span>(<span style="color:#cd5555">&#34;utf-8&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æª”æ¡ˆåæƒ³å–ä¸­æ–‡ç”¨URLEncoder.encode
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    String fileName = (<span style="color:#cd5555">&#34;dict-export-&#34;</span> + <span style="color:#8b008b;font-weight:bold">new</span> LocalDateTime());
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// è¨­å®šå›æ‡‰æ˜¯&#34;ä¸‹è¼‰æª”æ¡ˆ&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    response.<span style="color:#658b00">setHeader</span>(<span style="color:#cd5555">&#34;Content-disposition&#34;</span>, <span style="color:#cd5555">&#34;attachment;filename=&#34;</span> + fileName + <span style="color:#cd5555">&#34;.xlsx&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æŸ¥è³‡æ–™åº«
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    List&lt;Dict&gt; dictList = baseMapper.<span style="color:#658b00">selectList</span>(<span style="color:#8b008b;font-weight:bold">null</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æŠŠè³‡æ–™å¡åˆ°å°æ‡‰çš„excelè¡¨æ ¼voå¯¦é«”é¡
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    List&lt;DictEeVo&gt; dictVoList = <span style="color:#8b008b;font-weight:bold">new</span> ArrayList&lt;&gt;(dictList.<span style="color:#658b00">size</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">for</span> (Dict dict : dictList) {
</span></span><span style="display:flex;"><span>        DictEeVo dictVo = <span style="color:#8b008b;font-weight:bold">new</span> DictEeVo();
</span></span><span style="display:flex;"><span>        BeanUtils.<span style="color:#658b00">copyProperties</span>(dict, dictVo, DictEeVo.<span style="color:#658b00">class</span>);
</span></span><span style="display:flex;"><span>        dictVoList.<span style="color:#658b00">add</span>(dictVo);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// è¼¸å‡ºåˆ°å›æ‡‰æµè®“ç”¨æˆ¶ä¸‹è¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        EasyExcel.<span style="color:#658b00">write</span>(response.<span style="color:#658b00">getOutputStream</span>(), DictEeVo.<span style="color:#658b00">class</span>).<span style="color:#658b00">sheet</span>(<span style="color:#cd5555">&#34;dict&#34;</span>).<span style="color:#658b00">doWrite</span>(dictVoList);
</span></span><span style="display:flex;"><span>    } <span style="color:#8b008b;font-weight:bold">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>        e.<span style="color:#658b00">printStackTrace</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@ApiOperation</span>(<span style="color:#cd5555">&#34;å°å‡ºå­—å…¸æª”&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@GetMapping</span>(<span style="color:#cd5555">&#34;exportDict&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">exportDict</span>(HttpServletResponse response) {
</span></span><span style="display:flex;"><span>    dictService.<span style="color:#658b00">exportData</span>(response);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>ç”±æ–¼è¦çš„æ±è¥¿å°±åœ¨HTTPå›æ‡‰ä¸­(ä¸‹è¼‰)ï¼Œé€™å€‹å‰ç«¯å°±ä¸å¯«apiäº†ï¼Œç›´æ¥aæ¨™ç±¤è¨ªå•url
<ul>
<li><code>target=&quot;_blank&quot;</code>é–‹æ–°è¦–çª—ï¼Œå¦å‰‡é»ä¸€ä¸‹å°±è·³æˆç©ºç™½é </li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">a</span>
</span></span><span style="display:flex;"><span><span style="color:#658b00">href</span>=<span style="color:#cd5555">&#34;http://localhost:8202/admin/cmn/dict/exportDict&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#658b00">target</span>=<span style="color:#cd5555">&#34;_blank&#34;</span>
</span></span><span style="display:flex;"><span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">el-button</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;text&#34;</span>&gt;&lt;<span style="color:#8b008b;font-weight:bold">i</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;fa fa-plus&#34;</span> /&gt; å°å‡º&lt;/<span style="color:#8b008b;font-weight:bold">el-button</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#8b008b;font-weight:bold">a</span>&gt;
</span></span></code></pre></div><hr>
<ul>
<li>æƒ³åœ¨æ–¹æ³•ä¸­é–‹å•Ÿé€£æ¥å‰‡ç”¨<code>window.location.href=&quot;URL&quot;</code></li>
</ul>
<h2 id="å°å…¥">å°å…¥</h2>
<blockquote>
<p>easyExcelè®€å–excelè¡¨å…§å®¹ï¼Œéœ€è¦ç”¨åˆ°ç›£è½å™¨</p>
</blockquote>
<ul>
<li>åœ¨Controlleræ¥æ”¶å‰ç«¯ä¾†çš„MultipartFile</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#228b22">// DictController
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#707a7c">@ApiOperation</span>(<span style="color:#cd5555">&#34;å°å…¥å­—å…¸è¡¨æ ¼æª”&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@PostMapping</span>(<span style="color:#cd5555">&#34;importDict&#34;</span>) <span style="color:#228b22">// æ³¨æ„mappingé–‹é ­æ²’æœ‰/
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> Result <span style="color:#008b45">importDict</span>(MultipartFile file) {
</span></span><span style="display:flex;"><span>    dictService.<span style="color:#658b00">importDict</span>(file);
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> Result.<span style="color:#658b00">ok</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>åœ¨DictServiceImplæŠŠæµäº¤çµ¦ç›£è½å™¨è™•ç†</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">importDict</span>(MultipartFile file) {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        EasyExcel.<span style="color:#658b00">read</span>(file.<span style="color:#658b00">getInputStream</span>(), DictEeVo.<span style="color:#658b00">class</span>, <span style="color:#8b008b;font-weight:bold">new</span> DictListener(baseMapper)).<span style="color:#658b00">sheet</span>().<span style="color:#658b00">doRead</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">/*
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">        DictServiceImplç¹¼æ‰¿äº†ServiceImpl&lt;DictMapper, Dict&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">        DictMapperåˆç¹¼æ‰¿äº† BaseMapper&lt;Dict&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">        æ‰€ä»¥åœ¨DictServiceImplçš„æ–¹æ³•ä¸­baseMapperå…¶å¯¦å°±æ˜¯DictMapper
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">        */</span>
</span></span><span style="display:flex;"><span>    } <span style="color:#8b008b;font-weight:bold">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>        e.<span style="color:#658b00">printStackTrace</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>ç›£è½å™¨DictListeneréœ€è¦ç¹¼æ‰¿<code>AnalysisEventListener</code>ï¼Œé€™å€‹ç›£è½å™¨æœƒä¸€è¡Œä¸€è¡Œè®€å–excelè¡¨æ ¼ä¸­çš„è³‡æ–™ç‚ºVoå¯¦é«”é¡</li>
<li>ç›´æ¥åœ¨æ­¤è½‰ç‚ºbeanä¸¦èª¿ç”¨mapperå­˜åˆ°SQLä¸­</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">DictListener</span> <span style="color:#8b008b;font-weight:bold">extends</span> AnalysisEventListener&lt;DictEeVo&gt; {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æ§‹é€ å™¨æ³¨å…¥ï¼Œå› ç‚ºeasyExcelå®˜æ–¹æ–‡æª”ä¸å»ºè­°å°‡listeneräº¤çµ¦springç®¡ç†
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">private</span> DictMapper dictMapper;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#008b45">DictListener</span>(DictMapper dictMapper) {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">dictMapper</span> = dictMapper;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// ä¸€è¡Œä¸€è¡Œè®€å–
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">invoke</span>(DictEeVo dictEeVo, AnalysisContext analysisContext) {
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// è®€å–è¡¨æ ¼å…§å®¹ï¼Œè½‰æˆdictç‰©ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        Dict dict = <span style="color:#8b008b;font-weight:bold">new</span> Dict();
</span></span><span style="display:flex;"><span>        BeanUtils.<span style="color:#658b00">copyProperties</span>(dictEeVo, dict);
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// å¯«åˆ°è³‡æ–™åº«
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        dictMapper.<span style="color:#658b00">insert</span>(dict);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">doAfterAllAnalysed</span>(AnalysisContext analysisContext) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="å‰ç«¯-1">å‰ç«¯</h3>
<ul>
<li>è¨­2å€‹ç‰©ä»¶ï¼ŒæŒ‰éˆ•èˆ‡å½ˆå‡ºçš„ä¸Šå‚³è¡¨æ ¼æ¨¡æ¿</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">el-button</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;text&#34;</span> <span style="color:#a61717;background-color:#e3d2d2">@</span><span style="color:#658b00">click</span>=<span style="color:#cd5555">&#34;importDict&#34;</span>
</span></span><span style="display:flex;"><span>           &gt;&lt;<span style="color:#8b008b;font-weight:bold">i</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;fa fa-plus&#34;</span> /&gt; å°å…¥&lt;/<span style="color:#8b008b;font-weight:bold">el-button</span>
</span></span><span style="display:flex;"><span>    &gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">el-dialog</span> <span style="color:#658b00">title</span>=<span style="color:#cd5555">&#34;å°å…¥&#34;</span> <span style="color:#658b00">:visible</span><span style="color:#a61717;background-color:#e3d2d2">.</span><span style="color:#658b00">sync</span>=<span style="color:#cd5555">&#34;dialogImportVisible&#34;</span> <span style="color:#658b00">width</span>=<span style="color:#cd5555">&#34;480px&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#8b008b;font-weight:bold">el-form</span> <span style="color:#658b00">label-position</span>=<span style="color:#cd5555">&#34;right&#34;</span> <span style="color:#658b00">label-width</span>=<span style="color:#cd5555">&#34;170px&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#8b008b;font-weight:bold">el-form-item</span> <span style="color:#658b00">label</span>=<span style="color:#cd5555">&#34;æ–‡ä»¶&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#8b008b;font-weight:bold">el-upload</span>
</span></span><span style="display:flex;"><span>            <span style="color:#658b00">:multiple</span>=<span style="color:#cd5555">&#34;false&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#658b00">:on-success</span>=<span style="color:#cd5555">&#34;onUploadSuccess&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#658b00">:action</span>=<span style="color:#cd5555">&#34;&#39;http://localhost:8202/admin/cmn/dict/importDict&#39;&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;upload-demo&#34;</span>
</span></span><span style="display:flex;"><span>          &gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#8b008b;font-weight:bold">el-button</span> <span style="color:#658b00">size</span>=<span style="color:#cd5555">&#34;small&#34;</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;primary&#34;</span>&gt;é»æ“Šä¸Šå‚³&lt;/<span style="color:#8b008b;font-weight:bold">el-button</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">slot</span>=<span style="color:#cd5555">&#34;tip&#34;</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;el-upload__tip&#34;</span>&gt;
</span></span><span style="display:flex;"><span>              åªèƒ½ä¸Šå‚³excelæ–‡ä»¶ï¼Œä¸”ä¸è¶…é500kb
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;/<span style="color:#8b008b;font-weight:bold">el-upload</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#8b008b;font-weight:bold">el-form-item</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#8b008b;font-weight:bold">el-form</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">slot</span>=<span style="color:#cd5555">&#34;footer&#34;</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;dialog-footer&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#8b008b;font-weight:bold">el-button</span> <span style="color:#a61717;background-color:#e3d2d2">@</span><span style="color:#658b00">click</span>=<span style="color:#cd5555">&#34;dialogImportVisible = false&#34;</span>&gt; å–æ¶ˆ &lt;/<span style="color:#8b008b;font-weight:bold">el-button</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#8b008b;font-weight:bold">el-dialog</span>&gt;
</span></span></code></pre></div><ul>
<li>ä¸‹é¢æ–°å¢å…©å€‹æ–¹æ³•</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#228b22">// åˆå§‹è®Šé‡è™•
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>dialogImportVisible: <span style="color:#8b008b;font-weight:bold">false</span>, <span style="color:#228b22">// è®“å½ˆæ¡†é è¨­ä¸è·³å‡º
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">// æ–¹æ³•å€
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    importDict() {
</span></span><span style="display:flex;"><span>      <span style="color:#228b22">// è®“å½ˆæ¡†è·³å‡º
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>      <span style="color:#8b008b;font-weight:bold">this</span>.dialogImportVisible = <span style="color:#8b008b;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    onUploadSuccess(response, file) {
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.$message.info(<span style="color:#cd5555">&#34;ä¸Šå‚³æˆåŠŸ&#34;</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">this</span>.dialogImportVisible = <span style="color:#8b008b;font-weight:bold">false</span>; <span style="color:#228b22">// è®“å½ˆæ¡†å†æ»¾å›å»
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>      <span style="color:#8b008b;font-weight:bold">this</span>.getList(<span style="color:#b452cd">1</span>); <span style="color:#228b22">// åˆ·æ–°é é¢
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    },
</span></span></code></pre></div><hr>
<h2 id="spring-cache">Spring Cache</h2>
<ul>
<li>å¸¸è®€å–ã€ä¸å¸¸ä¿®æ”¹çš„è³‡æ–™å°±å¾ˆé©åˆæ”¾åˆ°å¿«å–
<ul>
<li>ä¾‹å¦‚:è³¼ç‰©ç¶²é¦–é å•†å“ã€ç†±é–€æ–‡ç« ç­‰ç­‰</li>
</ul>
</li>
</ul>
<h3 id="äº‹å‰æº–å‚™">äº‹å‰æº–å‚™</h3>
<ul>
<li>ç”±æ–¼å¯ä»¥å…±ç”¨ï¼Œå›åˆ°commonä¸‹çš„service-utilå­æ¨¡çµ„ï¼Œé¦–å…ˆå°å…¥ä¾è³´</li>
</ul>
<pre tabindex="0"><code>&lt;!-- redis --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;!-- spring2.Xé›†æˆredisæ‰€éœ€common-pool2--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
    &lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;
    &lt;version&gt;2.6.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><ul>
<li>æ–°å¢è¨­å®šé¡</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@EnableCaching</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">RedisConfig</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> KeyGenerator <span style="color:#008b45">keyGenerator</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> KeyGenerator() {
</span></span><span style="display:flex;"><span>            <span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">public</span> Object <span style="color:#008b45">generate</span>(Object target, Method method, Object... params) {
</span></span><span style="display:flex;"><span>                StringBuilder sb = <span style="color:#8b008b;font-weight:bold">new</span> StringBuilder();
</span></span><span style="display:flex;"><span>                sb.<span style="color:#658b00">append</span>(target.<span style="color:#658b00">getClass</span>().<span style="color:#658b00">getName</span>());
</span></span><span style="display:flex;"><span>                sb.<span style="color:#658b00">append</span>(method.<span style="color:#658b00">getName</span>());
</span></span><span style="display:flex;"><span>                <span style="color:#8b008b;font-weight:bold">for</span> (Object obj : params) {
</span></span><span style="display:flex;"><span>                    sb.<span style="color:#658b00">append</span>(obj.<span style="color:#658b00">toString</span>());
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#8b008b;font-weight:bold">return</span> sb.<span style="color:#658b00">toString</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> RedisTemplate&lt;Object, Object&gt; <span style="color:#008b45">redisTemplate</span>(RedisConnectionFactory redisConnectionFactory) {
</span></span><span style="display:flex;"><span>        RedisTemplate&lt;Object, Object&gt; redisTemplate = <span style="color:#8b008b;font-weight:bold">new</span> RedisTemplate&lt;&gt;();
</span></span><span style="display:flex;"><span>        redisTemplate.<span style="color:#658b00">setConnectionFactory</span>(redisConnectionFactory);
</span></span><span style="display:flex;"><span>        Jackson2JsonRedisSerializer jackson2JsonRedisSerializer = <span style="color:#8b008b;font-weight:bold">new</span> Jackson2JsonRedisSerializer(Object.<span style="color:#658b00">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">//è§£æ±ºæŸ¥è©¢ç·©å­˜è½‰æ›ç•°å¸¸çš„å•é¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        ObjectMapper om = <span style="color:#8b008b;font-weight:bold">new</span> ObjectMapper();
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// æŒ‡å®šè¦åºåˆ—åŒ–çš„åŸŸï¼Œfield,getå’Œset,ä»¥åŠä¿®é£¾ç¬¦ç¯„åœï¼ŒANYæ˜¯éƒ½æœ‰åŒ…æ‹¬privateå’Œpublic
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        om.<span style="color:#658b00">setVisibility</span>(PropertyAccessor.<span style="color:#658b00">ALL</span>, JsonAutoDetect.<span style="color:#658b00">Visibility</span>.<span style="color:#658b00">ANY</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// æŒ‡å®šåºåˆ—åŒ–è¼¸å…¥çš„é¡å‹ï¼Œé¡å¿…é ˆæ˜¯éfinalä¿®é£¾çš„ï¼Œfinalä¿®é£¾çš„é¡ï¼Œæ¯”å¦‚String,Integerç­‰æœƒè·‘å‡ºç•°å¸¸
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        om.<span style="color:#658b00">enableDefaultTyping</span>(ObjectMapper.<span style="color:#658b00">DefaultTyping</span>.<span style="color:#658b00">NON_FINAL</span>);
</span></span><span style="display:flex;"><span>        jackson2JsonRedisSerializer.<span style="color:#658b00">setObjectMapper</span>(om);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">//åºåˆ—è™Ÿkey value
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        redisTemplate.<span style="color:#658b00">setKeySerializer</span>(<span style="color:#8b008b;font-weight:bold">new</span> StringRedisSerializer());
</span></span><span style="display:flex;"><span>        redisTemplate.<span style="color:#658b00">setValueSerializer</span>(jackson2JsonRedisSerializer);
</span></span><span style="display:flex;"><span>        redisTemplate.<span style="color:#658b00">setHashKeySerializer</span>(<span style="color:#8b008b;font-weight:bold">new</span> StringRedisSerializer());
</span></span><span style="display:flex;"><span>        redisTemplate.<span style="color:#658b00">setHashValueSerializer</span>(jackson2JsonRedisSerializer);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        redisTemplate.<span style="color:#658b00">afterPropertiesSet</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> redisTemplate;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#707a7c">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">public</span> CacheManager <span style="color:#008b45">cacheManager</span>(RedisConnectionFactory factory) {
</span></span><span style="display:flex;"><span>        RedisSerializer&lt;String&gt; redisSerializer = <span style="color:#8b008b;font-weight:bold">new</span> StringRedisSerializer();
</span></span><span style="display:flex;"><span>        Jackson2JsonRedisSerializer jackson2JsonRedisSerializer = <span style="color:#8b008b;font-weight:bold">new</span> Jackson2JsonRedisSerializer(Object.<span style="color:#658b00">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">//è§£æ±ºæŸ¥è©¢ç·©å­˜è½‰æ›ç•°å¸¸çš„å•é¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        ObjectMapper om = <span style="color:#8b008b;font-weight:bold">new</span> ObjectMapper();
</span></span><span style="display:flex;"><span>        om.<span style="color:#658b00">setVisibility</span>(PropertyAccessor.<span style="color:#658b00">ALL</span>, JsonAutoDetect.<span style="color:#658b00">Visibility</span>.<span style="color:#658b00">ANY</span>);
</span></span><span style="display:flex;"><span>        om.<span style="color:#658b00">enableDefaultTyping</span>(ObjectMapper.<span style="color:#658b00">DefaultTyping</span>.<span style="color:#658b00">NON_FINAL</span>);
</span></span><span style="display:flex;"><span>        jackson2JsonRedisSerializer.<span style="color:#658b00">setObjectMapper</span>(om);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// é…ç½®åºåˆ—åŒ–ï¼ˆè§£æ±ºäº‚ç¢¼çš„å•é¡Œï¼‰,éæœŸæ™‚é–“600ç§’
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        RedisCacheConfiguration config = RedisCacheConfiguration.<span style="color:#658b00">defaultCacheConfig</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#658b00">entryTtl</span>(Duration.<span style="color:#658b00">ofSeconds</span>(600))
</span></span><span style="display:flex;"><span>                .<span style="color:#658b00">serializeKeysWith</span>(RedisSerializationContext.<span style="color:#658b00">SerializationPair</span>.<span style="color:#658b00">fromSerializer</span>(redisSerializer))
</span></span><span style="display:flex;"><span>                .<span style="color:#658b00">serializeValuesWith</span>(RedisSerializationContext.<span style="color:#658b00">SerializationPair</span>.<span style="color:#658b00">fromSerializer</span>(jackson2JsonRedisSerializer))
</span></span><span style="display:flex;"><span>                .<span style="color:#658b00">disableCachingNullValues</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        RedisCacheManager cacheManager = RedisCacheManager.<span style="color:#658b00">builder</span>(factory)
</span></span><span style="display:flex;"><span>                .<span style="color:#658b00">cacheDefaults</span>(config)
</span></span><span style="display:flex;"><span>                .<span style="color:#658b00">build</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> cacheManager;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>å›åˆ°service-cmnè¨­å®šapplication.properties</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#228b22"># spring redis</span>
</span></span><span style="display:flex;"><span><span style="color:#658b00">spring.redis.host</span>=<span style="color:#cd5555">localhost</span>
</span></span><span style="display:flex;"><span><span style="color:#658b00">spring.redis.port</span>=<span style="color:#cd5555">6379</span>
</span></span><span style="display:flex;"><span><span style="color:#658b00">spring.redis.database</span>=<span style="color:#cd5555">0</span>
</span></span><span style="display:flex;"><span><span style="color:#658b00">spring.redis.timeout</span>=<span style="color:#cd5555">1800000</span>
</span></span><span style="display:flex;"><span><span style="color:#658b00">spring.redis.lettuce.pool.max-active</span>=<span style="color:#cd5555">20</span>
</span></span><span style="display:flex;"><span><span style="color:#658b00">spring.redis.lettuce.pool.max-wait</span>=<span style="color:#cd5555">-1</span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">#æœ€å¤§é˜»å¡ç­‰å¾…æ™‚é–“(è² æ•¸è¡¨ç¤ºæ²’é™åˆ¶)</span>
</span></span><span style="display:flex;"><span><span style="color:#658b00">spring.redis.lettuce.pool.max-idle</span>=<span style="color:#cd5555">5</span>
</span></span><span style="display:flex;"><span><span style="color:#658b00">spring.redis.lettuce.pool.min-idle</span>=<span style="color:#cd5555">0</span>
</span></span></code></pre></div><h3 id="è¨»è§£">è¨»è§£</h3>
<blockquote>
<p>Spring Cacheé€šå¸¸åœ¨æ–¹æ³•ä¸Šè¨»è§£</p>
</blockquote>
<ul>
<li><code>@Cacheable</code>:ç·©å­˜æ–¹æ³•çš„çµæœï¼Œå¦‚æœè«‹æ±‚æ™‚å·²ç¶“æœ‰å¿«å–ï¼Œå°±ç•¥éæ–¹æ³•ç›´æ¥èª¿ç”¨å¿«å–çµ¦çµæœ
<ul>
<li>value:ç·©å­˜å</li>
<li>cacheNames:åŒä¸Šï¼ŒäºŒé¸ä¸€å³å¯</li>
<li>key:å¯é¸ï¼Œè‡ªè¨‚å¿«å–çš„key</li>
</ul>
</li>
<li><code>@CachePut</code>:ç„¡è«–å¦‚ä½•éƒ½æœƒåŸ·è¡Œæ–¹æ³•ä¸¦æ›´æ–°åˆ°å¿«å–åº«
<ul>
<li>çµåˆä½¿ç”¨ï¼Œå¯ä»¥ç”¨@CachePutåŸ·è¡Œæ–¹æ³•ä¸¦æ›´æ–°å¿«å–åº«</li>
</ul>
</li>
<li><code>@CacheEvict</code>:æ¸…ç©ºæŒ‡å®šå¿«å–ï¼Œé€šå¸¸ç”¨æ–¼æ›´æ–°æˆ–åˆªé™¤
<ul>
<li>allEntries:æ¸…ç©ºæ‰€æœ‰å¿«å–ï¼Œé è¨­ç‚ºfalse</li>
<li>beforeInvocation:åœ¨æ–¹æ³•åŸ·è¡Œå‰å°±æ¸…ç©ºï¼Œé è¨­ç‚ºfalse</li>
</ul>
</li>
</ul>
<h3 id="æ‡‰ç”¨">æ‡‰ç”¨</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#228b22">// æ ¹æ“šidæŸ¥è©¢å­æ•¸æ“šåˆ—è¡¨
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#707a7c">@Cacheable</span>(value = <span style="color:#cd5555">&#34;dict&#34;</span>, keyGenerator = <span style="color:#cd5555">&#34;keyGenerator&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> List&lt;Dict&gt; <span style="color:#008b45">getAllChildDictById</span>(Long id) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">// å°å…¥æ•¸æ“š
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#707a7c">@CacheEvict</span>(value = <span style="color:#cd5555">&#34;dict&#34;</span>, allEntries = <span style="color:#8b008b;font-weight:bold">true</span>)
</span></span><span style="display:flex;"><span><span style="color:#707a7c">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">importDict</span>(MultipartFile file) {
</span></span></code></pre></div><ul>
<li>é€²redisç”¨<code>keys *</code>æŸ¥çœ‹æ˜¯å¦æˆåŠŸ</li>
</ul>
<hr>
<h1 id="nginx">Nginx</h1>
<ul>
<li>
<p>Nginx (è®€ä½œ engine x)ï¼Œæ˜¯ä¸€å€‹å…è²»é–‹æºéåŒæ­¥æ¡†æ¶çš„web serverï¼Œå¸¸ç”¨æ–¼åå‘ä»£ç†ã€Http Cacheã€è² è¼‰å¹³è¡¡å™¨</p>
</li>
<li>
<p>ç‰¹æ€§:é«˜ä½µç™¼æ•ˆèƒ½å¥½ã€ç°¡å–®ã€æ¶ˆè€—ä½</p>
</li>
<li>
<p>å¯ä»¥ç”¨dockerå•Ÿå‹•<code>docker run -d -p 7777:80 --name nginx-web-server nginx</code></p>
</li>
<li>
<p>é€™è£¡å…ˆç”¨windowsç‰ˆï¼Œå®˜ç¶²ä¸‹è¼‰è§£å£“å°±èƒ½ç”¨ï¼Œè¨­å®šæª”åœ¨<code>/conf/nginx.conf</code></p>
</li>
</ul>
<pre tabindex="0"><code>    server {
    listen       9001;

    server_name  localhost;

    location ~ /hosp/ {
		proxy_pass http://localhost:8201;
    }
		location ~ /cmn/ {
	proxy_pass http://localhost:8202;
	}
}
</code></pre><ul>
<li>æ„æ€æ˜¯ç›£è½<code>localhost:9001</code>çš„è«‹æ±‚ï¼Œå¦‚æœæœ‰ç¬¦åˆ
<ul>
<li><code>~ /hosp/</code>å°±å°åˆ°<code>localhost:8201</code></li>
<li>~ æ˜¯æ­£å‰‡è¡¨é”</li>
</ul>
</li>
<li>é–‹ä¸€å€‹cmdï¼Œå•Ÿå‹•<code>nginx.exe</code>å³å¯</li>
</ul>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">ä¸Šæ¬¡ä¿®æ”¹æ–¼ 2022-01-16</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://yoziming.github.io/post/220117-agg-spring-07-mongodb/">
			ä¸‹ä¸€ç¯‡<br>MongoDB
                </a>
                
                
                
                <a class="older-posts" href="https://yoziming.github.io/post/220115-restful-api/">
			ä¸Šä¸€ç¯‡<br>RESTful API
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                








<div id="waline"></div>
<script>
    new Waline({
        el: '#waline',
        path: location.pathname,
        serverURL: "https://waline-pn38gfwbz-yoziming.vercel.app/" ,
		lang: 'en-US',
		visitor: true,
		meta: ['nick', 'mail'],
    });
    </script>



            </div>
        </div>
    </div>


                    </div>
            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
ç§»æ¤è‡ª <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Yoziming
	
</div>
            </div>
    
    <script src="/js/journal.js"></script>
    </body>
</html>
