<!DOCTYPE html>
<html><head>
<meta name="google-site-verification" content="XrwF-xUZWSGJVBBm7jM8vqemVqx--zo5Tb9d-Vr7BCc" />
<title>Cookieèˆ‡Sessionï¼Œæ›¸åŸè¨‚å–®æ¨¡çµ„</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="å°šç¡…è°·JavaWebç­†è¨˜-09">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="Cookieèˆ‡Sessionï¼Œæ›¸åŸè¨‚å–®æ¨¡çµ„" />
<meta property="og:description" content="å°šç¡…è°·JavaWebç­†è¨˜-09" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yoziming.github.io/post/220109-agg-javaweb-09/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-01-09T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-01-09T00:00:00+00:00" /><meta property="og:site_name" content="My Blog" />





<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Cookieèˆ‡Sessionï¼Œæ›¸åŸè¨‚å–®æ¨¡çµ„"/>
<meta name="twitter:description" content="å°šç¡…è°·JavaWebç­†è¨˜-09"/>







<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">


  




<link rel="icon" href="https://yoziming.github.io/images/favicon.png">



<link rel="stylesheet" href="https://yoziming.github.io/scss/journal.min.3f72a5fc8f5b5dd732a4b476aced0eece2156958d9d414316494ddb10593ddf7.css" integrity="sha256-P3Kl/I9bXdcypLR2rO0O7OIVaVjZ1BQxZJTdsQWT3fc=" media="screen">



<link rel="stylesheet" href="https://yoziming.github.io/scss/dark-mode.min.f7c2efa7183435a6bd1842f91c541481c7a5137b5991629a870f24e4a516ad4b.css" integrity="sha256-98Lvpxg0Naa9GEL5HFQUgcelE3tZkWKahw8k5KUWrUs=" media="screen">


<script src="/vendor/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>






  <script src="/js/toc.js"></script>











<script src="//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js"></script>





</head>
<body>
    	<div id="app"><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://yoziming.github.io/">
    
        <div class="nav-title">
            æŸšå­èŒ¶å®¤
        </div>
        
        <div class="nav-subtitle">
            ç´€éŒ„è‡ªå­¸å¤§å°äº‹
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/">
                é¦–é ğŸ 
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                æ¨™ç±¤ğŸ·ï¸
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                ç³»åˆ—æ–‡ğŸ“–
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about-me">
                é—œæ–¼æˆ‘ğŸ£
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
ç§»æ¤è‡ª <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Yoziming
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®éŒ„ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#cookie" onclick="onNavClick(`#cookie-nav`)" id="cookie-nav">
									Cookie
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%bd%bf%e7%94%a8" onclick="onNavClick(`#ä½¿ç”¨-nav`)" id="ä½¿ç”¨-nav">
									ä½¿ç”¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%b7%a8%e7%a2%bc%e5%95%8f%e9%a1%8c" onclick="onNavClick(`#ç·¨ç¢¼å•é¡Œ-nav`)" id="ç·¨ç¢¼å•é¡Œ-nav">
									ç·¨ç¢¼å•é¡Œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e8%a8%ad%e5%ae%9a%e8%b7%af%e5%be%91" onclick="onNavClick(`#è¨­å®šè·¯å¾‘-nav`)" id="è¨­å®šè·¯å¾‘-nav">
									è¨­å®šè·¯å¾‘
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#session" onclick="onNavClick(`#session-nav`)" id="session-nav">
									Session
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%bd%bf%e7%94%a8-1" onclick="onNavClick(`#ä½¿ç”¨-1-nav`)" id="ä½¿ç”¨-1-nav">
									ä½¿ç”¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%9c%a8session%e5%9f%9f%e5%ad%98%e6%94%be%e8%b3%87%e8%a8%8a" onclick="onNavClick(`#åœ¨sessionåŸŸå­˜æ”¾è³‡è¨Š-nav`)" id="åœ¨sessionåŸŸå­˜æ”¾è³‡è¨Š-nav">
									åœ¨SessionåŸŸå­˜æ”¾è³‡è¨Š
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e8%88%87cookie%e7%9a%84%e9%97%9c%e4%bf%82" onclick="onNavClick(`#èˆ‡cookieçš„é—œä¿‚-nav`)" id="èˆ‡cookieçš„é—œä¿‚-nav">
									èˆ‡Cookieçš„é—œä¿‚
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%9b%b8%e5%9f%8e%e9%a0%85%e7%9b%ae" onclick="onNavClick(`#æ›¸åŸé …ç›®-nav`)" id="æ›¸åŸé …ç›®-nav">
									æ›¸åŸé …ç›®
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%99%bb%e5%87%ba%e5%85%a5" onclick="onNavClick(`#ç™»å‡ºå…¥-nav`)" id="ç™»å‡ºå…¥-nav">
									ç™»å‡ºå…¥
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%a9%97%e8%ad%89%e7%a2%bc" onclick="onNavClick(`#é©—è­‰ç¢¼-nav`)" id="é©—è­‰ç¢¼-nav">
									é©—è­‰ç¢¼
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%89%8d%e7%ab%af" onclick="onNavClick(`#å‰ç«¯-nav`)" id="å‰ç«¯-nav">
									å‰ç«¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%8c%e7%ab%af" onclick="onNavClick(`#å¾Œç«¯-nav`)" id="å¾Œç«¯-nav">
									å¾Œç«¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e8%a8%82%e5%96%ae%e6%a8%a1%e7%b5%84" onclick="onNavClick(`#è¨‚å–®æ¨¡çµ„-nav`)" id="è¨‚å–®æ¨¡çµ„-nav">
									è¨‚å–®æ¨¡çµ„
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e9%97%9c%e6%96%bc%e8%bd%89%e5%9d%80" onclick="onNavClick(`#é—œæ–¼è½‰å€-nav`)" id="é—œæ–¼è½‰å€-nav">
									é—œæ–¼è½‰å€
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%89%8d%e7%ab%af%e9%83%a8%e5%88%86" onclick="onNavClick(`#å‰ç«¯éƒ¨åˆ†-nav`)" id="å‰ç«¯éƒ¨åˆ†-nav">
									å‰ç«¯éƒ¨åˆ†
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#webxml" onclick="onNavClick(`#webxml-nav`)" id="webxml-nav">
									web.xml
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%8c%e7%ab%af%e9%83%a8%e5%88%86" onclick="onNavClick(`#å¾Œç«¯éƒ¨åˆ†-nav`)" id="å¾Œç«¯éƒ¨åˆ†-nav">
									å¾Œç«¯éƒ¨åˆ†
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%b0%8f%e7%b5%90" onclick="onNavClick(`#å°çµ-nav`)" id="å°çµ-nav">
									å°çµ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#sql%e5%95%8f%e9%a1%8c" onclick="onNavClick(`#sqlå•é¡Œ-nav`)" id="sqlå•é¡Œ-nav">
									SQLå•é¡Œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#sql%e8%aa%9e%e5%8f%a5" onclick="onNavClick(`#sqlèªå¥-nav`)" id="sqlèªå¥-nav">
									SQLèªå¥
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#date%e9%a1%9e%e5%95%8f%e9%a1%8c" onclick="onNavClick(`#dateé¡å•é¡Œ-nav`)" id="dateé¡å•é¡Œ-nav">
									Dateé¡å•é¡Œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e9%bb%9e%e6%93%8a%e4%ba%8b%e4%bb%b6" onclick="onNavClick(`#é»æ“Šäº‹ä»¶-nav`)" id="é»æ“Šäº‹ä»¶-nav">
									é»æ“Šäº‹ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#http503" onclick="onNavClick(`#http503-nav`)" id="http503-nav">
									Http503
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/">
                    é¦–é ğŸ 
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    æ¨™ç±¤ğŸ·ï¸
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    ç³»åˆ—æ–‡ğŸ“–
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about-me">
                    é—œæ–¼æˆ‘ğŸ£
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®éŒ„ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#cookie" onclick="onNavClick(`#cookie-nav`)" id="cookie-nav">
									Cookie
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%bd%bf%e7%94%a8" onclick="onNavClick(`#ä½¿ç”¨-nav`)" id="ä½¿ç”¨-nav">
									ä½¿ç”¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%b7%a8%e7%a2%bc%e5%95%8f%e9%a1%8c" onclick="onNavClick(`#ç·¨ç¢¼å•é¡Œ-nav`)" id="ç·¨ç¢¼å•é¡Œ-nav">
									ç·¨ç¢¼å•é¡Œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e8%a8%ad%e5%ae%9a%e8%b7%af%e5%be%91" onclick="onNavClick(`#è¨­å®šè·¯å¾‘-nav`)" id="è¨­å®šè·¯å¾‘-nav">
									è¨­å®šè·¯å¾‘
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#session" onclick="onNavClick(`#session-nav`)" id="session-nav">
									Session
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%bd%bf%e7%94%a8-1" onclick="onNavClick(`#ä½¿ç”¨-1-nav`)" id="ä½¿ç”¨-1-nav">
									ä½¿ç”¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%9c%a8session%e5%9f%9f%e5%ad%98%e6%94%be%e8%b3%87%e8%a8%8a" onclick="onNavClick(`#åœ¨sessionåŸŸå­˜æ”¾è³‡è¨Š-nav`)" id="åœ¨sessionåŸŸå­˜æ”¾è³‡è¨Š-nav">
									åœ¨SessionåŸŸå­˜æ”¾è³‡è¨Š
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e8%88%87cookie%e7%9a%84%e9%97%9c%e4%bf%82" onclick="onNavClick(`#èˆ‡cookieçš„é—œä¿‚-nav`)" id="èˆ‡cookieçš„é—œä¿‚-nav">
									èˆ‡Cookieçš„é—œä¿‚
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%9b%b8%e5%9f%8e%e9%a0%85%e7%9b%ae" onclick="onNavClick(`#æ›¸åŸé …ç›®-nav`)" id="æ›¸åŸé …ç›®-nav">
									æ›¸åŸé …ç›®
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%99%bb%e5%87%ba%e5%85%a5" onclick="onNavClick(`#ç™»å‡ºå…¥-nav`)" id="ç™»å‡ºå…¥-nav">
									ç™»å‡ºå…¥
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%a9%97%e8%ad%89%e7%a2%bc" onclick="onNavClick(`#é©—è­‰ç¢¼-nav`)" id="é©—è­‰ç¢¼-nav">
									é©—è­‰ç¢¼
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%89%8d%e7%ab%af" onclick="onNavClick(`#å‰ç«¯-nav`)" id="å‰ç«¯-nav">
									å‰ç«¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%8c%e7%ab%af" onclick="onNavClick(`#å¾Œç«¯-nav`)" id="å¾Œç«¯-nav">
									å¾Œç«¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e8%a8%82%e5%96%ae%e6%a8%a1%e7%b5%84" onclick="onNavClick(`#è¨‚å–®æ¨¡çµ„-nav`)" id="è¨‚å–®æ¨¡çµ„-nav">
									è¨‚å–®æ¨¡çµ„
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e9%97%9c%e6%96%bc%e8%bd%89%e5%9d%80" onclick="onNavClick(`#é—œæ–¼è½‰å€-nav`)" id="é—œæ–¼è½‰å€-nav">
									é—œæ–¼è½‰å€
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%89%8d%e7%ab%af%e9%83%a8%e5%88%86" onclick="onNavClick(`#å‰ç«¯éƒ¨åˆ†-nav`)" id="å‰ç«¯éƒ¨åˆ†-nav">
									å‰ç«¯éƒ¨åˆ†
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#webxml" onclick="onNavClick(`#webxml-nav`)" id="webxml-nav">
									web.xml
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%8c%e7%ab%af%e9%83%a8%e5%88%86" onclick="onNavClick(`#å¾Œç«¯éƒ¨åˆ†-nav`)" id="å¾Œç«¯éƒ¨åˆ†-nav">
									å¾Œç«¯éƒ¨åˆ†
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%b0%8f%e7%b5%90" onclick="onNavClick(`#å°çµ-nav`)" id="å°çµ-nav">
									å°çµ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#sql%e5%95%8f%e9%a1%8c" onclick="onNavClick(`#sqlå•é¡Œ-nav`)" id="sqlå•é¡Œ-nav">
									SQLå•é¡Œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#sql%e8%aa%9e%e5%8f%a5" onclick="onNavClick(`#sqlèªå¥-nav`)" id="sqlèªå¥-nav">
									SQLèªå¥
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#date%e9%a1%9e%e5%95%8f%e9%a1%8c" onclick="onNavClick(`#dateé¡å•é¡Œ-nav`)" id="dateé¡å•é¡Œ-nav">
									Dateé¡å•é¡Œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e9%bb%9e%e6%93%8a%e4%ba%8b%e4%bb%b6" onclick="onNavClick(`#é»æ“Šäº‹ä»¶-nav`)" id="é»æ“Šäº‹ä»¶-nav">
									é»æ“Šäº‹ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#http503" onclick="onNavClick(`#http503-nav`)" id="http503-nav">
									Http503
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://yoziming.github.io/">
            æŸšå­èŒ¶å®¤
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://yoziming.github.io/">
        <div class="single-column-header-title">æŸšå­èŒ¶å®¤</div>
        
        <div class="single-column-header-subtitle">ç´€éŒ„è‡ªå­¸å¤§å°äº‹</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://yoziming.github.io/images/javaweb.jpg')"
                    
                
            >
                <div class="post-title">
                    Cookieèˆ‡Sessionï¼Œæ›¸åŸè¨‚å–®æ¨¡çµ„
                    
                    <div class="post-subtitle">
                        å°šç¡…è°·JavaWebç­†è¨˜-09
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2022-01-09 00:00
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/javaweb%E7%B7%9A%E4%B8%8A%E8%AA%B2">JavaWebç·šä¸Šèª²</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/java">Java</a>
                                &nbsp;
                            
                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h1 id="cookie">Cookie</h1>
<blockquote>
<p>å› ç‚ºHTTPæ˜¯ç„¡ç‹€æ…‹(stateless)çš„ï¼Œç•¶æˆ‘å€‘æƒ³ä¿å­˜è³‡è¨Šå°±è¦ç”¨åˆ°Cookie</p>
</blockquote>
<ul>
<li>ä¼ºæœå™¨é€šçŸ¥å®¢æˆ¶ç«¯ä¿å­˜éµå€¼å°çš„æŠ€è¡“
<ul>
<li>ç™½è©±:å«ç”¨æˆ¶ä¿å­˜ä½æŸå€‹å€¼</li>
</ul>
</li>
<li>æ‡‰ç”¨èˆ‰ä¾‹:è¨˜ä½ç”¨æˆ¶å</li>
<li>ç”±ç”¨æˆ¶çš„ç€è¦½å™¨ç¶­è­·ï¼Œè¦–ç”Ÿå‘½é€±æœŸå­˜åœ¨è¨˜æ†¶é«”æˆ–ç¡¬ç¢Ÿä¸­</li>
<li>å–®å€‹æœ€å¤š4 KB</li>
</ul>
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<blockquote>
<p>å¾ˆç°¡å–®å°±ä¸å¤šèªªäº†</p>
</blockquote>
<ul>
<li>åœ¨Javaä¸­æ˜¯Cookieé¡</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">protected</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">doCookie</span>(HttpServletRequest request, HttpServletResponse response) <span style="color:#8b008b;font-weight:bold">throws</span> ServletException,
</span></span><span style="display:flex;"><span>        IOException {
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// è¨­å®šç·¨ç¢¼
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    request.<span style="color:#658b00">setCharacterEncoding</span>(<span style="color:#cd5555">&#34;UTF-8&#34;</span>);
</span></span><span style="display:flex;"><span>    response.<span style="color:#658b00">setContentType</span>(<span style="color:#cd5555">&#34;text/html; charset=UTF-8&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// åœ¨Javaé€ Cookieé¡ç‰©ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    Cookie cookie1 = <span style="color:#8b008b;font-weight:bold">new</span> Cookie(<span style="color:#cd5555">&#34;key1&#34;</span>, <span style="color:#cd5555">&#34;value1&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// å¢ï¼Œæ³¨æ„æ˜¯responseå«å®¢æˆ¶ç«¯é€ cookie
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    response.<span style="color:#658b00">addCookie</span>(cookie1);
</span></span><span style="display:flex;"><span>    response.<span style="color:#658b00">getWriter</span>().<span style="color:#658b00">write</span>(<span style="color:#cd5555">&#34;cookieå‰µå»ºæˆåŠŸ!&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// å–
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    Cookie[] cookies = request.<span style="color:#658b00">getCookies</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// å–ä¾†çš„æ˜¯æ‰€æœ‰cookiesæ§‹æˆçš„æ•¸çµ„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">for</span> (Cookie cookie2 : cookies) {
</span></span><span style="display:flex;"><span>        response.<span style="color:#658b00">getWriter</span>().<span style="color:#658b00">write</span>(cookie2.<span style="color:#658b00">getName</span>() + <span style="color:#cd5555">&#34;=&#34;</span> + cookie2.<span style="color:#658b00">getValue</span>() + <span style="color:#cd5555">&#34;\n&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// å¯ä»¥åšäº›ifåˆ¤æ–·æ‹¿å‡ºæƒ³è¦çš„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æ”¹
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    Cookie cookie3 = <span style="color:#8b008b;font-weight:bold">new</span> Cookie(<span style="color:#cd5555">&#34;key1&#34;</span>, <span style="color:#cd5555">&#34;value3&#34;</span>);
</span></span><span style="display:flex;"><span>    response.<span style="color:#658b00">addCookie</span>(cookie3); <span style="color:#228b22">// ç”¨åŒæ¨£çš„&#34;key1&#34;å»è¦†è“‹&#34;value1&#34;ï¼Œè®Šæˆ&#34;value3&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>
</span></span><span style="display:flex;"><span>    cookie3.<span style="color:#658b00">setValue</span>(<span style="color:#cd5555">&#34;value4&#34;</span>); <span style="color:#228b22">// æˆ–æ˜¯ç”¨setValue
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    response.<span style="color:#658b00">addCookie</span>(cookie3); <span style="color:#228b22">// è®Šæˆ&#34;value4&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// æ§åˆ¶ç”Ÿå‘½ï¼Œç§’æ•¸
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    cookie3.<span style="color:#658b00">setMaxAge</span>(<span style="color:#b452cd">60</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// åˆª
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    cookie3.<span style="color:#658b00">setMaxAge</span>(<span style="color:#b452cd">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// ç”Ÿå‘½è·Ÿéš¨ç€è¦½å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    Cookie cookie5 = <span style="color:#8b008b;font-weight:bold">new</span> Cookie(<span style="color:#cd5555">&#34;key5&#34;</span>, <span style="color:#cd5555">&#34;value5&#34;</span>);
</span></span><span style="display:flex;"><span>    cookie5.<span style="color:#658b00">setMaxAge</span>(-<span style="color:#b452cd">1</span>);
</span></span><span style="display:flex;"><span>    response.<span style="color:#658b00">addCookie</span>(cookie5);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// è¨­å®šè·¯å¾‘
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    Cookie cookie6 = <span style="color:#8b008b;font-weight:bold">new</span> Cookie(<span style="color:#cd5555">&#34;key6&#34;</span>, <span style="color:#cd5555">&#34;value6&#34;</span>);
</span></span><span style="display:flex;"><span>    cookie6.<span style="color:#658b00">setPath</span>(<span style="color:#cd5555">&#34;/abc&#34;</span>);
</span></span><span style="display:flex;"><span>    cookie6.<span style="color:#658b00">setMaxAge</span>(-<span style="color:#b452cd">1</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    request.<span style="color:#658b00">getRequestDispatcher</span>(<span style="color:#cd5555">&#34;http://localhost:8080/book_war_exploded/cookie.html&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="ç·¨ç¢¼å•é¡Œ">ç·¨ç¢¼å•é¡Œ</h3>
<ul>
<li>ç”±æ–¼æ˜¯è·ŸHTTPå”è­°èµ°çš„ï¼ŒvalueåŸºæœ¬ä¸Šåªç”¨è‹±æ•¸å­—ï¼Œä¸è¦ç”¨ç¬¦è™Ÿè·Ÿä¸­æ–‡</li>
<li>æƒ³è¦ä¸­æ–‡å¯ä»¥ç”¨BASE64ç·¨ç¢¼ä¹‹é¡çš„</li>
</ul>
<h2 id="è¨­å®šè·¯å¾‘">è¨­å®šè·¯å¾‘</h2>
<ul>
<li>èµ·åˆ°ä¸€å€‹éæ¿¾çš„æ•ˆæœï¼ŒCookieé è¨­çš„Pathæ˜¯å·¥ç¨‹è·¯å¾‘</li>
<li>å¦‚æœæ‰‹å‹•çµ¦ä¸€å€‹CookieæŒ‡å®šPathï¼Œç­‰æ–¼èªªç”¨æˆ¶æ”¶åˆ°å‘½ä»¤å‰µå»ºé€™å€‹Cookieå¾Œï¼Œä¼ºæœå™¨å†æƒ³è¨ªå•é€™å€‹Cookieï¼Œéœ€è¦æ˜¯ç¬¦åˆé€™å€‹è·¯å¾‘çš„è«‹æ±‚ï¼Œå¦å‰‡ä¼ºæœå™¨è¦‹ä¸åˆ°è©²Cookie
<ul>
<li>é¡ä¼¼èªªæˆ‘åœ¨å®‰è¦ªç­é€ ä¸€å€‹å°å­©ï¼Œè©²å°å­©è‡ªå¸¶çš„å±¬æ€§æ˜¯æŒ‡å®šåªæœ‰å¾æŸæ¢è·¯ä¾†çš„äººå¯ä»¥è¨ªå•é€™å€‹å°å­©
<ul>
<li>å¯ä»¥èµ·åˆ°ç°¡å–®çš„éš”çµ•ï¼Œé˜²æ­¢æ¥éŒ¯å°å­©</li>
<li>ä¹Ÿèƒ½çœè³‡æºï¼Œä¸ç„¶æ¯æ¬¡è¨ªå•éƒ½æœ‰ä¸€å †å°å­©å‚³ä¾†å‚³å»
<ul>
<li>å› ç‚ºCookieçš„å‚³éæ˜¯é™„åŠ åœ¨æ¯å€‹HTTPè«‹æ±‚ä¸­</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h1 id="session">Session</h1>
<ul>
<li>Sessionå°±æ˜¯æœƒè©±ï¼Œæ˜¯ç”¨ä¾†ç¶­è­·ä¼ºæœå™¨èˆ‡ç”¨æˆ¶ç«¯ä¹‹é–“çš„é—œè¯</li>
<li>æ¯ä¸€å€‹ç”¨æˆ¶ç«¯æœ‰è‡ªå·±çš„ä¸€å€‹Session</li>
<li>Sessionç”±ä¼ºæœå™¨ç¶­è­· (Cookieç”±å®¢æˆ¶ç«¯çš„ç€è¦½å™¨ç¶­è­·)</li>
<li>æ‡‰ç”¨èˆ‰ä¾‹:ä¿å­˜ç”¨æˆ¶ç™»å…¥å¾Œçš„è¨Šæ¯</li>
</ul>
<h2 id="ä½¿ç”¨-1">ä½¿ç”¨</h2>
<ul>
<li>
<p>åœ¨Javaä¸­Sessionæ˜¯ä¸€å€‹æ¥å£(HttpSession)</p>
</li>
<li>
<p><code>getSession()</code>æœƒåˆ¤æ–·ç•¶å‰é€£ç·šæœƒè©±æ˜¯å¦å·²ç¶“å­˜åœ¨Sessionï¼Œè‹¥ç„¡å‰‡æ–°é€ ä¸€å€‹</p>
</li>
<li>
<p>æ¯ä¸€å€‹Sessionéƒ½æœ‰è‡ªå·±å”¯ä¸€çš„ID</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#228b22">// å¢ï¼Œæ³¨æ„æ˜¯requesté€ 
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>HttpSession session = request.<span style="color:#658b00">getSession</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">// åˆ¤æ–·æ˜¯å¦æ˜¯æ–°é€ çš„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#00688b;font-weight:bold">boolean</span> aNew = session.<span style="color:#658b00">isNew</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">// ç²å–id
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>String id = session.<span style="color:#658b00">getId</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">// ç”Ÿå‘½é€±æœŸ
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>session.<span style="color:#658b00">setMaxInactiveInterval</span>(<span style="color:#b452cd">60</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">// ç²å–é è¨­çš„æœ€å¤§ç”Ÿå‘½ï¼Œæ­¤å€¼ç”±webå®¹å™¨æ±ºå®šï¼Œå¯èƒ½è‡ªå·±åœ¨web.xmlæ”¹
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#00688b;font-weight:bold">int</span> maxInactiveInterval = session.<span style="color:#658b00">getMaxInactiveInterval</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">// ç«‹åˆ»æ®ºæ­»
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>session.<span style="color:#658b00">invalidate</span>();
</span></span></code></pre></div><h3 id="åœ¨sessionåŸŸå­˜æ”¾è³‡è¨Š">åœ¨SessionåŸŸå­˜æ”¾è³‡è¨Š</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>request.<span style="color:#658b00">getSession</span>().<span style="color:#658b00">setAttribute</span>(<span style="color:#cd5555">&#34;key1&#34;</span>, <span style="color:#cd5555">&#34;value1&#34;</span>);
</span></span><span style="display:flex;"><span>request.<span style="color:#658b00">getSession</span>().<span style="color:#658b00">getAttribute</span>(<span style="color:#cd5555">&#34;key1&#34;</span>);
</span></span></code></pre></div><h2 id="èˆ‡cookieçš„é—œä¿‚">èˆ‡Cookieçš„é—œä¿‚</h2>
<ul>
<li>
<p>æˆ‘å€‘èªªSessionæ˜¯ç”¨ä¾†ç¶­æŒä¼ºæœå™¨èˆ‡å®¢æˆ¶ç«¯ä¹‹é–“çš„é—œè¯ï¼Œæ—¢ç„¶äº‹æƒ…æ¶‰åŠåˆ°å…©ç«¯ï¼Œé‚£è‚¯å®šå°±ä¸åªä¸€é‚Šçš„äº‹</p>
</li>
<li>
<p>å·²çŸ¥Sessionç”±ä¼ºæœå™¨ç¶­è­·ï¼Œå­˜åœ¨æ–¼ä¼ºæœå™¨çš„è¨˜æ†¶é«”ä¸­ï¼Œæˆ‘ä¸€å€‹ä¼ºæœå™¨å¯èƒ½æœ‰ç„¡æ•¸çš„ä½¿ç”¨è€…ï¼Œé‚£æ€æ¨£çŸ¥é“æŸå€‹Sessioné€£çµ¦å“ªå€‹ä½¿ç”¨è€…?</p>
</li>
<li>
<p>ä¸€å€‹Sessionæœƒè©±æ˜¯ç”±å®¢æˆ¶ç«¯ç™¼èµ·ï¼Œæœ€åˆæ˜¯å®¢æˆ¶ç«¯ç™¼ä¾†çš„è«‹æ±‚ï¼Œæ‰€ä»¥æ˜¯<code>request.getSession()</code></p>
</li>
<li>
<p>ä¼ºæœå™¨æ”¶åˆ°é€™å€‹è«‹æ±‚ï¼Œæœƒåœ¨ä¼ºæœå™¨çš„è¨˜æ†¶é«”é–‹é—¢ä¸€å€‹Sessionçš„ç©ºé–“ï¼Œé€™å€‹ç©ºé–“æœ‰è‡ªå·±çš„<code>SessionID</code></p>
</li>
<li>
<p>åŒæ™‚ï¼Œä¼ºæœå™¨æœƒè¦æ±‚å®¢æˆ¶ç«¯å‰µé€ ä¸€å€‹Cookieï¼Œæ­¤Cookieçš„KEYå›ºå®šæ˜¯<code>JSESSIONID</code>ï¼Œå€¼å°±æ˜¯å°æ‡‰çš„<code>SessionID</code>ï¼Œå­˜åœ¨å®¢æˆ¶ç«¯çš„ç€è¦½å™¨</p>
</li>
<li>
<p>å‰é¢èªªéCookieæœƒé™„åŠ åœ¨æ¯å€‹HTTPè«‹æ±‚ï¼Œå› æ­¤æœƒè©±å°±æˆç«‹äº†ï¼Œåªè¦ç”¨æˆ¶ç«¯å­˜åœ¨è©²Cookieå°±å¯ä»¥éŒ¨å®šåˆ°ä¼ºæœå™¨ä¸­çš„æŒ‡å®šSessionï¼Œç›´åˆ°æŸä¸€æ–¹éæœŸç‚ºæ­¢</p>
</li>
</ul>
<hr>
<h1 id="æ›¸åŸé …ç›®">æ›¸åŸé …ç›®</h1>
<h2 id="ç™»å‡ºå…¥">ç™»å‡ºå…¥</h2>
<ul>
<li>å¾Œç«¯é©—è­‰ç™»å…¥æˆåŠŸåŒæ™‚å°‡userç‰©ä»¶ä¿å­˜åˆ°SessionåŸŸï¼Œå‰ç«¯ç”¨sessionScopeå–å‡ºç”¨æˆ¶è³‡æ–™</li>
<li>ç™»å‡ºå°±åˆªæ‰sessionï¼Œè½‰ç™¼åˆ°é¦–é </li>
</ul>
<h2 id="é©—è­‰ç¢¼">é©—è­‰ç¢¼</h2>
<ul>
<li>maven</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>com.github.penggle<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>kaptcha<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>2.3.2<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></div><ul>
<li>åœ¨web.xmlä¸­å¯ä»¥è¨­å®š</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;servlet&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;servlet-name&gt;</span>Kaptcha<span style="color:#8b008b;font-weight:bold">&lt;/servlet-name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;servlet-class&gt;</span>com.google.code.kaptcha.servlet.KaptchaServlet<span style="color:#8b008b;font-weight:bold">&lt;/servlet-class&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">&lt;!-- å®šç¾©é©—è­‰ç¢¼æ¨£å¼ --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">&lt;!-- æ˜¯å¦æœ‰é‚Šæ¡† --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>kaptcha.border<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">&lt;!-- æ²’æœ‰é‚Šæ¡† no --&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>yes<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">&lt;!-- å­—é«”é¡è‰² --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>kaptcha.textproducer.font.color<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>red<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">&lt;!-- åœ–ç‰‡å¯¬åº¦ --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>kaptcha.image.width<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>80<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">&lt;!-- ä½¿ç”¨å“ªäº›å­—ç¬¦ç”Ÿæˆé©—è­‰ç¢¼ --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>kaptcha.textproducer.char.string<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>12456890<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">&lt;!-- åœ–ç‰‡é«˜åº¦ --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>kaptcha.image.height<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>40<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">&lt;!-- å­—é«”å¤§å° --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>kaptcha.textproducer.font.size<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>35<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;description&gt;</span>æ–‡å­—é–“éš”<span style="color:#8b008b;font-weight:bold">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>kaptcha.textproducer.char.space<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>3<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">&lt;!--å»æ‰å¹²æ“¾ç·šcom.google.code.kaptcha.impl.NoNoise--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">&lt;!--åŠ å¹²æ“¾ç·šcom.google.code.kaptcha.impl.DefaultNoise--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;description&gt;</span>å¹²æ“¾å¯¦ç¾é¡<span style="color:#8b008b;font-weight:bold">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>kaptcha.noise.impl<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>
</span></span><span style="display:flex;"><span>                com.google.code.kaptcha.impl.NoNoise
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">&lt;!-- å¹¹æ“¾ç·šçš„é¡è‰² --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>kaptcha.noise.color<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>green<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;description&gt;</span>
</span></span><span style="display:flex;"><span>                åœ–ç‰‡æ¨£å¼ï¼š
</span></span><span style="display:flex;"><span>                æ°´ç´‹com.google.code.kaptcha.impl.WaterRipple
</span></span><span style="display:flex;"><span>                é­šçœ¼com.google.code.kaptcha.impl.FishEyeGimpy
</span></span><span style="display:flex;"><span>                é™°å½±com.google.code.kaptcha.impl.ShadowGimpy
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>kaptcha.obscurificator.impl<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>
</span></span><span style="display:flex;"><span>                com.google.code.kaptcha.impl.ShadowGimpy
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">&lt;!-- é©—è­‰ç¢¼å­—ç¬¦å€‹æ•¸ --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>kaptcha.textproducer.char.length<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>4<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">&lt;!-- å­—é«” --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>kaptcha.textproducer.font.names<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>Aria<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;description&gt;</span>
</span></span><span style="display:flex;"><span>                sessionä¸­å­˜æ”¾é©—è­‰ç¢¼çš„keyéµ
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>kaptcha.session.key<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>KAPTCHA_SESSION_KEY<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;description&gt;</span>
</span></span><span style="display:flex;"><span>                The date the kaptcha is generated is put into the
</span></span><span style="display:flex;"><span>                HttpSession. This is the key value for that item in the
</span></span><span style="display:flex;"><span>                session.
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>kaptcha.session.date<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>KAPTCHA_SESSION_DATE<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;/servlet&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;servlet-mapping&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;servlet-name&gt;</span>Kaptcha<span style="color:#8b008b;font-weight:bold">&lt;/servlet-name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;url-pattern&gt;</span>/captcha.jpg<span style="color:#8b008b;font-weight:bold">&lt;/url-pattern&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;/servlet-mapping&gt;</span>
</span></span></code></pre></div><h3 id="å‰ç«¯">å‰ç«¯</h3>
<p>åœ–ç‰‡ç¶²å€ç¶å®šä¸Šé¢çš„<code>&lt;url-pattern&gt;/captcha.jpg&lt;/url-pattern&gt;</code></p>
<pre tabindex="0"><code class="language-jsp" data-lang="jsp"> &lt;img id=&#34;code_img&#34; src=&#34;${pageScope.basePath}captcha.jpg&#34;&gt;
 ...
&lt;script type=&#34;text/javascript&#34;&gt;
    // é é¢åŠ è¼‰å®Œæˆä¹‹å¾Œ
    $(function () {
        // ç¶å®šåˆ·æ–°é©—è­‰ç¢¼
        $(&#34;#code_img&#34;).click(function () {
            this.src = &#34;${pageScope.basePath}captcha.jpg?d=&#34; + new Date();
        });
</code></pre><ul>
<li>é»æ“Šåˆ·æ–°åŠŸèƒ½ï¼Œç”¨æ™‚é–“ç•¶URLçš„è®Šæ•¸ï¼Œè®“æ¯æ¬¡åœ–ç‰‡éƒ½é‡æ–°è«‹æ±‚
<ul>
<li>é˜²æ­¢URLç›¸åŒï¼Œç€è¦½å™¨æŠŠåœ–ç‰‡å¿«å–èµ·ä¾†ä¸é¡¯ç¤ºæ–°çš„</li>
</ul>
</li>
</ul>
<h3 id="å¾Œç«¯">å¾Œç«¯</h3>
<ul>
<li>å‰é¢ç™¼çš„è«‹æ±‚æœƒåŒæ™‚æŠŠKEYå­˜åœ¨Sessionä¸­ï¼Œå–å‡ºå€¼:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>request.<span style="color:#658b00">getSession</span>().<span style="color:#658b00">getAttribute</span>(KAPTCHA_SESSION_KEY);
</span></span></code></pre></div><ul>
<li>åœ¨servletä¸­é©—è­‰è¡¨å–®å…§å®¹çš„æ–¹æ³•ä¸­ï¼Œç•¶æˆåŠŸå–å‡ºå€¼å°±æŠŠæ­¤Sessionåˆªæ‰ï¼Œé€™æ¨£ä¸€ä¾†å¦‚æœç”¨æˆ¶å¤šæ¬¡æäº¤è¡¨å–®ï¼Œåˆä¾†åˆ°é€™å€‹servletçš„é€™å€‹æ–¹æ³•ï¼Œç¬¬äºŒæ¬¡å»å–å€¼å°±å–ä¸åˆ°ï¼Œå°±æœƒå› ç‚ºé©—è­‰å¤±æ•—è€Œèµ°ä¸åˆ°è³‡æ–™åº«é‚£æ­¥</li>
<li>å¦‚æ­¤å°±å¯¦ç¾äº†ä»¥é©—è­‰ç¢¼é˜»æ­¢é‡è¤‡æäº¤è¡¨å–®çš„å•é¡Œ</li>
</ul>
<hr>
<h1 id="è¨‚å–®æ¨¡çµ„">è¨‚å–®æ¨¡çµ„</h1>
<blockquote>
<p>å€‹äººçš„è¸©å‘ç´€éŒ„</p>
</blockquote>
<h2 id="é—œæ–¼è½‰å€">é—œæ–¼è½‰å€</h2>
<blockquote>
<p>ä¹‹å‰ä¸€ç›´æ²’ææ¸…æ¥šurlå‰é¢è¦ä¸è¦å¯«/ï¼Œé€™æ¬¡å¥½å¥½é‡æ¸…å®ƒ</p>
</blockquote>
<h3 id="å‰ç«¯éƒ¨åˆ†">å‰ç«¯éƒ¨åˆ†</h3>
<blockquote>
<p>jspæˆ–html</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>ContextPathæ˜¯æœƒæ ¹æ“šéƒ¨å±¬æ”¹è®Šçš„ï¼Œä¾‹å¦‚tomcaté è¨­éƒ¨å±¬çš„é¦–é ç‚º
</span></span><span style="display:flex;"><span>http://localhost:8080/book_war_exploded/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>é€™å€‹urlå°æ‡‰çš„å¯¦é«”è³‡æºå°±æ˜¯webapp/è³‡æ–™å¤¾ä¸‹
</span></span><span style="display:flex;"><span>å¦‚æœæ²’æœ‰æŒ‡å®šï¼Œæœƒè‡ªå‹•æ‹¿æ ¹è·¯å¾‘çš„indexä½œç‚ºé¦–é é¡¯ç¤º
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>å°æ–¼å‰ç«¯ä¾†èªªï¼Œå¦‚æœæ²’æœ‰æŒ‡å®šé&lt;<span style="color:#8b008b;font-weight:bold">base</span> <span style="color:#658b00">href</span>=<span style="color:#cd5555">&#34;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">a</span> <span style="color:#658b00">href</span>=<span style="color:#cd5555">&#34;TestServlet&#34;</span>&gt;GOTEST&lt;/<span style="color:#8b008b;font-weight:bold">a</span>&gt;
</span></span><span style="display:flex;"><span>    ç›¸ç•¶æ–¼ç•¶å‰ç¶²å€+/TestServlet
</span></span><span style="display:flex;"><span>    å¯èƒ½åŒ…å«å·¥ç¨‹è·¯å¾‘èˆ‡ç¶²é è³‡æºæ‰€åœ¨è³‡æ–™å¤¾
</span></span><span style="display:flex;"><span>    é€™å€‹é é¢ä½æ–¼webapp/pages/
</span></span><span style="display:flex;"><span>    http://localhost:8080/book_war_exploded/pages/TestServlet
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">a</span> <span style="color:#658b00">href</span>=<span style="color:#cd5555">&#34;/TestServlet&#34;</span>&gt;GOTEST2&lt;/<span style="color:#8b008b;font-weight:bold">a</span>&gt;
</span></span><span style="display:flex;"><span>    ç›¸ç•¶æ–¼http://localhost:8080/TestServlet
</span></span><span style="display:flex;"><span>    å³è¿½æœ¬æº¯æºåˆ°æœ€é ‚ï¼Œç”¨é€™å€‹çš„è©±åˆ‡è¨˜æ³¨æ„éƒ¨å±¬æ™‚è¨­å®šçš„å·¥ç¨‹è·¯å¾‘
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">a</span> <span style="color:#658b00">href</span>=<span style="color:#cd5555">&#34;../TestServlet&#34;</span>&gt;GOTEST3&lt;/<span style="color:#8b008b;font-weight:bold">a</span>&gt;
</span></span><span style="display:flex;"><span>    IDEæœƒèªç‚ºä½ æ˜¯æƒ³è¨ªå•ä¸€å€‹æª”æ¡ˆ
</span></span><span style="display:flex;"><span>    ä½†ç€è¦½å™¨å»å¯ä»¥æ­£ç¢ºçš„æ‹¼æ¥
</span></span><span style="display:flex;"><span>    http://localhost:8080/book_war_exploded/TestServlet
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#8b008b;font-weight:bold">body</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ä¸ç®¡å‰ç«¯çš„jsæˆ–å¾Œç«¯ï¼Œä½¿ç”¨request.getContextPath()å¾—åˆ°çš„å°±æ˜¯å·¥ç¨‹è·¯å¾‘
</span></span><span style="display:flex;"><span>/book_war_exploded
</span></span><span style="display:flex;"><span>åœ¨å‰ç«¯ç”¨å¯ä»¥ç”¨jsæ‹šæ¥å‡ºå®Œæ•´çš„è·¯å¾‘
</span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">&lt;</span>%
</span></span><span style="display:flex;"><span>    String basePath = request.getScheme()
</span></span><span style="display:flex;"><span>            + &#34;://&#34;
</span></span><span style="display:flex;"><span>            + request.getServerName()
</span></span><span style="display:flex;"><span>            + &#34;:&#34;
</span></span><span style="display:flex;"><span>            + request.getServerPort()
</span></span><span style="display:flex;"><span>            + request.getContextPath()
</span></span><span style="display:flex;"><span>            + &#34;/&#34;;
</span></span><span style="display:flex;"><span>    pageContext.setAttribute(&#34;basePath&#34;, basePath);
</span></span><span style="display:flex;"><span>%&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">base</span> <span style="color:#658b00">href</span>=<span style="color:#cd5555">&#34;&lt;%=basePath%&gt;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ä½¿ç”¨<span style="color:#a61717;background-color:#e3d2d2">&lt;</span>%=basePath%&gt;å°±ç­‰åŒæ–¼é è¨­éƒ¨å±¬çš„é¦–é ï¼Œæ³¨æ„å·²ç¶“åŒ…å«äº†æœ€å°¾çš„/
</span></span><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">a</span> <span style="color:#658b00">href</span>=<span style="color:#cd5555">&#34;&lt;%=basePath%&gt;TestServlet&#34;</span>&gt;æ¸¬è©¦è·³è½‰&lt;/<span style="color:#8b008b;font-weight:bold">a</span>&gt;
</span></span></code></pre></div><ul>
<li>ä½¿ç”¨baseçµ±ä¸€ç®¡ç†ï¼Œæœ€å¥½æ˜¯ä¸è¦+ &ldquo;/&ldquo;çµå°¾ï¼Œè®“ç”¨æ³•è·Ÿå¾Œç«¯çµ±ä¸€</li>
<li>å–®ç¨ç”¨<code>/</code>è¦æ³¨æ„éƒ¨å±¬æ™‚çš„è¨­å®š</li>
</ul>
<h3 id="webxml">web.xml</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;servlet-mapping&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;servlet-name&gt;</span>Kaptcha<span style="color:#8b008b;font-weight:bold">&lt;/servlet-name&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;url-pattern&gt;</span>/captcha.jpg<span style="color:#8b008b;font-weight:bold">&lt;/url-pattern&gt;</span>
</span></span><span style="display:flex;"><span>    = http://localhost:8080/book_war_exploded/captcha.jpg
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;/servlet-mapping&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;servlet-mapping&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;servlet-name&gt;</span>TestServlet<span style="color:#8b008b;font-weight:bold">&lt;/servlet-name&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;url-pattern&gt;</span>/TestServlet<span style="color:#8b008b;font-weight:bold">&lt;/url-pattern&gt;</span>
</span></span><span style="display:flex;"><span>    = http://localhost:8080/book_war_exploded/TestServlet
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;/servlet-mapping&gt;</span>
</span></span></code></pre></div><ul>
<li>ç¶å®š <code>&lt;url-pattern&gt;/&lt;/url-pattern&gt;</code>å¼·åˆ¶è¦ä»¥<code>/</code>é–‹é ­ï¼Œå¦å‰‡ç›´æ¥å ±éŒ¯</li>
</ul>
<h3 id="å¾Œç«¯éƒ¨åˆ†">å¾Œç«¯éƒ¨åˆ†</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">åœ¨å¾Œç«¯ä½¿ç”¨è½‰ç™¼</span>
</span></span><span style="display:flex;"><span>response.<span style="color:#658b00">sendRedirect</span>(<span style="color:#cd5555">&#34;test.jsp&#34;</span>);
</span></span><span style="display:flex;"><span>request.<span style="color:#658b00">getRequestDispatcher</span>(<span style="color:#cd5555">&#34;test.jsp&#34;</span>).<span style="color:#658b00">forward</span>(request, response);
</span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">ä¸ä»¥`</span>/<span style="color:#a61717;background-color:#e3d2d2">`é–‹é ­å°±æœƒè¢«èªç‚ºæ˜¯ç›¸å°è·¯å¾‘ï¼Œå³ç•¶ä¸‹çš„</span>url/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">è€Œé€šå¸¸</span>webapp<span style="color:#a61717;background-color:#e3d2d2">ç¬¬ä¸€å±¤åªæœƒæ”¾</span>index<span style="color:#a61717;background-color:#e3d2d2">ï¼Œå…¶ä»–è¦è¨ªå•çš„é é¢æœƒåˆ†é¡åœ¨</span>pages<span style="color:#a61717;background-color:#e3d2d2">è³‡æ–™å¤¾ä¸‹ï¼Œä¾‹å¦‚</span>
</span></span><span style="display:flex;"><span>response.<span style="color:#658b00">sendRedirect</span>(<span style="color:#cd5555">&#34;pages/abc.jsp&#34;</span>);
</span></span><span style="display:flex;"><span>request.<span style="color:#658b00">getRequestDispatcher</span>(<span style="color:#cd5555">&#34;/pages/abc.jsp&#34;</span>).<span style="color:#658b00">forward</span>(request, response);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">å…©è€…å€åˆ¥åœ¨æ–¼</span>
</span></span><span style="display:flex;"><span>    response.<span style="color:#658b00">sendRedirect</span><span style="color:#a61717;background-color:#e3d2d2">æ˜¯å…©å€‹è«‹æ±‚ï¼Œå·²ç¶“è½‰ç™¼äº†ï¼Œç¶²å€æœƒè®ŠåŒ–</span>
</span></span><span style="display:flex;"><span>    request.<span style="color:#658b00">getRequestDispatcher</span><span style="color:#a61717;background-color:#e3d2d2">ç¶²å€ä¸æœƒè®Š</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">å¦‚æœå¦‚æœåœ¨ç¶²å€å‰åŠ äº†</span>/<span style="color:#a61717;background-color:#e3d2d2">ï¼Œå¯«æˆ</span><span style="color:#cd5555">&#34;/url&#34;</span><span style="color:#a61717;background-color:#e3d2d2">ï¼Œ</span>
</span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">å°æ–¼</span>response.<span style="color:#658b00">sendRedirect</span> <span style="color:#a61717;background-color:#e3d2d2">å› ç‚ºå®ƒæ˜¯å¯ä»¥è½‰åˆ°å¤–é¢å»çš„ï¼Œä¸å¯«é½Šå…¨æœƒå‡ºäº‹ï¼Œè¦æ‰‹å‹•åŠ ä¸Š</span>request.<span style="color:#658b00">getContextPath</span>()
</span></span><span style="display:flex;"><span>http:<span style="color:#228b22">//localhost:8080/
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>
</span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">è€Œ</span>request.<span style="color:#658b00">getRequestDispatcher</span><span style="color:#a61717;background-color:#e3d2d2">åŠ äº†</span>/<span style="color:#a61717;background-color:#e3d2d2">æ¯”å¦‚</span>(<span style="color:#cd5555">&#34;/pages/abc.jsp&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">å‰‡è¡¨ç¤º</span>Web<span style="color:#a61717;background-color:#e3d2d2">è³‡æºçš„æ ¹è·¯å¾‘</span>
</span></span></code></pre></div><h3 id="å°çµ">å°çµ</h3>
<ul>
<li>
<p>å‰ç«¯ä¸ä»¥<code>/</code>é–‹é ­å°±æœƒè¢«èªç‚ºæ˜¯ç›¸å°è·¯å¾‘ï¼Œå³ç•¶ä¸‹çš„url</p>
</li>
<li>
<p>å¾Œç«¯éƒ½åŠ ä¸Š<code>/</code></p>
<ul>
<li>ä¸¦ä¸”<code>response.sendRedirect</code>å…ˆä»¥<code>request.getContextPath()</code>é–‹é ­</li>
</ul>
</li>
<li>
<p>ç‚ºäº†æ–¹ä¾¿çµ±ä¸€ï¼Œå‰ç«¯ç”¨baseå…ˆæ‹šå‡ºå·¥ç¨‹è·¯å¾‘(ä½†ä¸è¦åŒ…å«æœ€å°¾çš„/)ï¼Œé€™æ¨£æ•´å€‹å°ˆæ¡ˆå°±éƒ½æ˜¯ç”¨/æ‰“é ­</p>
<ul>
<li>web.xmlä¸åŠ /æ ¹æœ¬ç„¡æ³•å•Ÿå‹•ï¼Œç¾åœ¨éƒ½ç”¨è¨»è§£æˆ–æ¡†æ¶ä¹Ÿä¸å¤ªç”¨ç®¡</li>
</ul>
</li>
</ul>
<hr>
<h2 id="sqlå•é¡Œ">SQLå•é¡Œ</h2>
<h3 id="sqlèªå¥">SQLèªå¥</h3>
<ul>
<li>å¯«daoImplçš„æ™‚å€™ï¼Œå¿˜è¨˜æ˜¯å¾è³‡æ–™åº«ä¸­å–æ±è¥¿çš„æ™‚å€™æ‰è¦åŠ åˆ¥åä½¿å…¶èˆ‡pojoç¬¦åˆ</li>
<li>æˆ‘ç«Ÿç„¶åœ¨<code>insert into</code>çš„åœ°æ–¹å¯«åˆ¥åé‚„é™¤éŒ¯äº†åŠå¤©ï¼Œæœ‰å¤ è ¢</li>
</ul>
<h3 id="dateé¡å•é¡Œ">Dateé¡å•é¡Œ</h3>
<pre tabindex="0"><code>cannot convert java.time.LocalDateTime to java.util.Date

æŠŠmysql-connector-java8.0.26æ›æˆ8.0.21ç‰ˆï¼Œå•é¡Œæ¶ˆå¤±
å› ç‚º26ç‰ˆæœƒå°‡datatimeè½‰æ›æˆjava.time.LocalDateTime
è€Œ21ç‰ˆè½‰æ›æˆjava.util.Date
</code></pre><pre tabindex="0"><code>The server time zone value &#39;ï¿½ï¿½ï¿½ï¿½Ğ·Ç®É¶ï¿½&#39; is unrecognized
21ç‰ˆé€£mysql 8ä¸æŒ‡å®šæ™‚é–“åˆæœƒå‡ºéŒ¯

jdbc:mysql://localhost:3306/bookstore?useSSL=false&amp;serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;allowPublicKeyRetrieval=true&amp;rewriteBatchedStatements=true

å¦å¤–mysqlé è¨­æ™‚å€è¦æ³¨æ„å¯èƒ½æ˜¯UTCå¯ä»¥å»è³‡æ–™åº«çœ‹
å…©é‚Šéƒ½è¨­å®š+8ï¼Œå°±æ˜¯GMT%2B8å°±ä¸æœƒå‡ºç¾æ™‚å·®å•é¡Œ
</code></pre><h2 id="é»æ“Šäº‹ä»¶">é»æ“Šäº‹ä»¶</h2>
<ul>
<li>ç”¨idç¶å®šï¼Œçµæœåªæœ‰ç¬¬ä¸€å€‹ç”Ÿæ•ˆï¼Œæ¸¬è©¦æ™‚éˆæ™‚ä¸éˆé‚„æ‰¾åŠå¤©åŸå› </li>
<li>æ•™è¨“:è¨˜ä½å¯èƒ½æœ‰å¤šå€‹ç‰©ä»¶æ™‚ç”¨<code>class</code>èˆ‡<code>.</code>ç¶å®š</li>
</ul>
<h2 id="http503">Http503</h2>
<ul>
<li>å…·é«”å ±éŒ¯æ˜¯<code>Servlet is currently unavailable</code></li>
<li>åŸå› åœ¨æˆ‘è¤‡è£½ä¸€å€‹jspé é¢ï¼ŒIDEAå®ƒJSTLå°å…¥æ€ªæ€ªçš„ï¼Œå¯«äº†ä¸€å€‹<code>&lt;c:if</code>å®ƒæç¤ºæˆ‘æ²’å°å…¥ï¼Œæ–¼æ˜¯alt+enterä¿®å¾©ï¼Œèª°çŸ¥é“ä¸€ä¿®å°±å£äº†</li>
<li>ä¾†å›æŠ˜é¨°å¾ˆä¹…ï¼ŒMavenå¼•äº†åˆå¼•æäº†åŠå¤©ï¼Œç¢ºå®šæœ‰é€™å…©å€‹</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.apache.taglibs<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>taglibs-standard-impl<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>1.2.5<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.apache.taglibs<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>taglibs-standard-spec<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>1.2.5<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></div><ul>
<li>æœ€å¾Œç™¼ç¾index.jspæ˜æ˜æ²’å°å…¥å»ä¸å ±éŒ¯ï¼Œå¾ˆè©­ç•°
<ul>
<li>åœ¨æœ€é ‚åŠ ä¸Š<code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</code>å°±è§£æ±ºäº†</li>
</ul>
</li>
<li>æ•™è¨“:ä¸è¦è¼•æ˜“ä½¿ç”¨IDEAçš„è¤‡è£½è·Ÿç§»å‹•æ–‡ä»¶åŠŸèƒ½ï¼Œå¯§é¡˜é€ ä¸€å€‹å…¨æ–°é é¢ç„¶å¾Œå…¨é¸è¤‡è£½è²¼ä¸Š</li>
</ul>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">ä¸Šæ¬¡ä¿®æ”¹æ–¼ 2022-01-09</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://yoziming.github.io/post/220110-agg-javaweb-10/">
			ä¸‹ä¸€ç¯‡<br>Filteréæ¿¾å™¨ã€ThreadLocal
                </a>
                
                
                
                <a class="older-posts" href="https://yoziming.github.io/post/220108-agg-javaweb-08/">
			ä¸Šä¸€ç¯‡<br>æ›¸åŸé …ç›®:Mavenç®¡ç†ä¾è³´ã€åœ–æ›¸æ¨¡å¡Š
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                








<div id="waline"></div>
<script>
    new Waline({
        el: '#waline',
        path: location.pathname,
        serverURL: "https://waline-pn38gfwbz-yoziming.vercel.app/" ,
		lang: 'en-US',
		visitor: true,
		meta: ['nick', 'mail'],
    });
    </script>



            </div>
        </div>
    </div>


                    </div>
            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
ç§»æ¤è‡ª <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Yoziming
	
</div>
            </div>
    
    <script src="/js/journal.js"></script>
    </body>
</html>
